(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function bw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rd={exports:{}},Aa={},id={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function Fw(){if(rg)return Ce;rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,z={};function j(O,K,fe){this.props=O,this.context=K,this.refs=z,this.updater=fe||V}j.prototype.isReactComponent={},j.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},j.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=j.prototype;function X(O,K,fe){this.props=O,this.context=K,this.refs=z,this.updater=fe||V}var re=X.prototype=new H;re.constructor=X,b(re,j.prototype),re.isPureReactComponent=!0;var de=Array.isArray,Se=Object.prototype.hasOwnProperty,Te={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(O,K,fe){var Re,Ae={},De=null,be=null;if(K!=null)for(Re in K.ref!==void 0&&(be=K.ref),K.key!==void 0&&(De=""+K.key),K)Se.call(K,Re)&&!x.hasOwnProperty(Re)&&(Ae[Re]=K[Re]);var Fe=arguments.length-2;if(Fe===1)Ae.children=fe;else if(1<Fe){for(var $e=Array(Fe),yt=0;yt<Fe;yt++)$e[yt]=arguments[yt+2];Ae.children=$e}if(O&&O.defaultProps)for(Re in Fe=O.defaultProps,Fe)Ae[Re]===void 0&&(Ae[Re]=Fe[Re]);return{$$typeof:r,type:O,key:De,ref:be,props:Ae,_owner:Te.current}}function A(O,K){return{$$typeof:r,type:O.type,key:K,ref:O.ref,props:O.props,_owner:O._owner}}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function D(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return K[fe]})}var L=/\/+/g;function C(O,K){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):K.toString(36)}function nt(O,K,fe,Re,Ae){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var be=!1;if(O===null)be=!0;else switch(De){case"string":case"number":be=!0;break;case"object":switch(O.$$typeof){case r:case e:be=!0}}if(be)return be=O,Ae=Ae(be),O=Re===""?"."+C(be,0):Re,de(Ae)?(fe="",O!=null&&(fe=O.replace(L,"$&/")+"/"),nt(Ae,K,fe,"",function(yt){return yt})):Ae!=null&&(k(Ae)&&(Ae=A(Ae,fe+(!Ae.key||be&&be.key===Ae.key?"":(""+Ae.key).replace(L,"$&/")+"/")+O)),K.push(Ae)),1;if(be=0,Re=Re===""?".":Re+":",de(O))for(var Fe=0;Fe<O.length;Fe++){De=O[Fe];var $e=Re+C(De,Fe);be+=nt(De,K,fe,$e,Ae)}else if($e=R(O),typeof $e=="function")for(O=$e.call(O),Fe=0;!(De=O.next()).done;)De=De.value,$e=Re+C(De,Fe++),be+=nt(De,K,fe,$e,Ae);else if(De==="object")throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return be}function Nt(O,K,fe){if(O==null)return O;var Re=[],Ae=0;return nt(O,Re,"","",function(De){return K.call(fe,De,Ae++)}),Re}function Dt(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var Be={current:null},te={transition:null},me={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:te,ReactCurrentOwner:Te};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Nt,forEach:function(O,K,fe){Nt(O,function(){K.apply(this,arguments)},fe)},count:function(O){var K=0;return Nt(O,function(){K++}),K},toArray:function(O){return Nt(O,function(K){return K})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ce.Component=j,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=X,Ce.StrictMode=s,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=se,Ce.cloneElement=function(O,K,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Re=b({},O.props),Ae=O.key,De=O.ref,be=O._owner;if(K!=null){if(K.ref!==void 0&&(De=K.ref,be=Te.current),K.key!==void 0&&(Ae=""+K.key),O.type&&O.type.defaultProps)var Fe=O.type.defaultProps;for($e in K)Se.call(K,$e)&&!x.hasOwnProperty($e)&&(Re[$e]=K[$e]===void 0&&Fe!==void 0?Fe[$e]:K[$e])}var $e=arguments.length-2;if($e===1)Re.children=fe;else if(1<$e){Fe=Array($e);for(var yt=0;yt<$e;yt++)Fe[yt]=arguments[yt+2];Re.children=Fe}return{$$typeof:r,type:O.type,key:Ae,ref:De,props:Re,_owner:be}},Ce.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Ce.createElement=I,Ce.createFactory=function(O){var K=I.bind(null,O);return K.type=O,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:f,render:O}},Ce.isValidElement=k,Ce.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:Dt}},Ce.memo=function(O,K){return{$$typeof:y,type:O,compare:K===void 0?null:K}},Ce.startTransition=function(O){var K=te.transition;te.transition={};try{O()}finally{te.transition=K}},Ce.unstable_act=se,Ce.useCallback=function(O,K){return Be.current.useCallback(O,K)},Ce.useContext=function(O){return Be.current.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O){return Be.current.useDeferredValue(O)},Ce.useEffect=function(O,K){return Be.current.useEffect(O,K)},Ce.useId=function(){return Be.current.useId()},Ce.useImperativeHandle=function(O,K,fe){return Be.current.useImperativeHandle(O,K,fe)},Ce.useInsertionEffect=function(O,K){return Be.current.useInsertionEffect(O,K)},Ce.useLayoutEffect=function(O,K){return Be.current.useLayoutEffect(O,K)},Ce.useMemo=function(O,K){return Be.current.useMemo(O,K)},Ce.useReducer=function(O,K,fe){return Be.current.useReducer(O,K,fe)},Ce.useRef=function(O){return Be.current.useRef(O)},Ce.useState=function(O){return Be.current.useState(O)},Ce.useSyncExternalStore=function(O,K,fe){return Be.current.useSyncExternalStore(O,K,fe)},Ce.useTransition=function(){return Be.current.useTransition()},Ce.version="18.3.1",Ce}var ig;function Yd(){return ig||(ig=1,id.exports=Fw()),id.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function Uw(){if(sg)return Aa;sg=1;var r=Yd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var w,T={},R=null,V=null;y!==void 0&&(R=""+y),p.key!==void 0&&(R=""+p.key),p.ref!==void 0&&(V=p.ref);for(w in p)s.call(p,w)&&!l.hasOwnProperty(w)&&(T[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)T[w]===void 0&&(T[w]=p[w]);return{$$typeof:e,type:f,key:R,ref:V,props:T,_owner:o.current}}return Aa.Fragment=t,Aa.jsx=h,Aa.jsxs=h,Aa}var og;function jw(){return og||(og=1,rd.exports=Uw()),rd.exports}var ne=jw(),q=Yd(),Ru={},sd={exports:{}},Zt={},od={exports:{}},ad={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function Bw(){return ag||(ag=1,function(r){function e(te,me){var se=te.length;te.push(me);e:for(;0<se;){var O=se-1>>>1,K=te[O];if(0<o(K,me))te[O]=me,te[se]=K,se=O;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var me=te[0],se=te.pop();if(se!==me){te[0]=se;e:for(var O=0,K=te.length,fe=K>>>1;O<fe;){var Re=2*(O+1)-1,Ae=te[Re],De=Re+1,be=te[De];if(0>o(Ae,se))De<K&&0>o(be,Ae)?(te[O]=be,te[De]=se,O=De):(te[O]=Ae,te[Re]=se,O=Re);else if(De<K&&0>o(be,se))te[O]=be,te[De]=se,O=De;else break e}}return me}function o(te,me){var se=te.sortIndex-me.sortIndex;return se!==0?se:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var p=[],y=[],w=1,T=null,R=3,V=!1,b=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(te){for(var me=t(y);me!==null;){if(me.callback===null)s(y);else if(me.startTime<=te)s(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(y)}}function de(te){if(z=!1,re(te),!b)if(t(p)!==null)b=!0,Dt(Se);else{var me=t(y);me!==null&&Be(de,me.startTime-te)}}function Se(te,me){b=!1,z&&(z=!1,H(I),I=-1),V=!0;var se=R;try{for(re(me),T=t(p);T!==null&&(!(T.expirationTime>me)||te&&!D());){var O=T.callback;if(typeof O=="function"){T.callback=null,R=T.priorityLevel;var K=O(T.expirationTime<=me);me=r.unstable_now(),typeof K=="function"?T.callback=K:T===t(p)&&s(p),re(me)}else s(p);T=t(p)}if(T!==null)var fe=!0;else{var Re=t(y);Re!==null&&Be(de,Re.startTime-me),fe=!1}return fe}finally{T=null,R=se,V=!1}}var Te=!1,x=null,I=-1,A=5,k=-1;function D(){return!(r.unstable_now()-k<A)}function L(){if(x!==null){var te=r.unstable_now();k=te;var me=!0;try{me=x(!0,te)}finally{me?C():(Te=!1,x=null)}}else Te=!1}var C;if(typeof X=="function")C=function(){X(L)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Nt=nt.port2;nt.port1.onmessage=L,C=function(){Nt.postMessage(null)}}else C=function(){j(L,0)};function Dt(te){x=te,Te||(Te=!0,C())}function Be(te,me){I=j(function(){te(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){b||V||(b=!0,Dt(Se))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(te){switch(R){case 1:case 2:case 3:var me=3;break;default:me=R}var se=R;R=me;try{return te()}finally{R=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=R;R=te;try{return me()}finally{R=se}},r.unstable_scheduleCallback=function(te,me,se){var O=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?O+se:O):se=O,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,te={id:w++,callback:me,priorityLevel:te,startTime:se,expirationTime:K,sortIndex:-1},se>O?(te.sortIndex=se,e(y,te),t(p)===null&&te===t(y)&&(z?(H(I),I=-1):z=!0,Be(de,se-O))):(te.sortIndex=K,e(p,te),b||V||(b=!0,Dt(Se))),te},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(te){var me=R;return function(){var se=R;R=me;try{return te.apply(this,arguments)}finally{R=se}}}}(ad)),ad}var lg;function zw(){return lg||(lg=1,od.exports=Bw()),od.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function $w(){if(ug)return Zt;ug=1;var r=Yd(),e=zw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function R(n){return p.call(T,n)?!0:p.call(w,n)?!1:y.test(n)?T[n]=!0:(w[n]=!0,!1)}function V(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,i,a,c){if(i===null||typeof i>"u"||V(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function z(n,i,a,c,d,g,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=_}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new z(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(H,X);j[i]=new z(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(H,X);j[i]=new z(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(H,X);j[i]=new z(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function re(n,i,a,c){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,a,d,c)&&(a=null),c||d===null?R(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var de=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Te=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),Nt=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),te=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,O;function K(n){if(O===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+n}var fe=!1;function Re(n,i){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),g=c.stack.split(`
`),_=d.length-1,S=g.length-1;1<=_&&0<=S&&d[_]!==g[S];)S--;for(;1<=_&&0<=S;_--,S--)if(d[_]!==g[S]){if(_!==1||S!==1)do if(_--,S--,0>S||d[_]!==g[S]){var P=`
`+d[_].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=_&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ae(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case Te:return"Portal";case A:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case nt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case L:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Nt:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Dt:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(n){var i=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,g.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function sr(n){n._valueTracker||(n._valueTracker=yt(n))}function ds(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Or(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Si(n,i){var a=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function fs(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Do(n,i){i=i.checked,i!=null&&re(n,"checked",i,!1)}function Vo(n,i){Do(n,i);var a=Fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ps(n,i.type,a):i.hasOwnProperty("defaultValue")&&ps(n,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function cl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ps(n,i,a){(i!=="number"||Or(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var or=Array.isArray;function ar(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Oo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ms(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(or(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Fe(a)}}function gs(n,i){var a=Fe(i.value),c=Fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Lo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ct(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lr,Mo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=lr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Lr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ai=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(n){Ai.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ri[i]=Ri[n]})});function bo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ri.hasOwnProperty(n)&&Ri[n]?(""+i).trim():i+"px"}function Fo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=bo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Uo=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jo(n,i){if(i){if(Uo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Bo(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ci=null;function ys(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vs=null,cn=null,Un=null;function _s(n){if(n=ha(n)){if(typeof vs!="function")throw Error(t(280));var i=n.stateNode;i&&(i=jl(i),vs(n.stateNode,n.type,i))}}function jn(n){cn?Un?Un.push(n):Un=[n]:cn=n}function zo(){if(cn){var n=cn,i=Un;if(Un=cn=null,_s(n),i)for(n=0;n<i.length;n++)_s(i[n])}}function Pi(n,i){return n(i)}function $o(){}var ur=!1;function qo(n,i,a){if(ur)return n(i,a);ur=!0;try{return Pi(n,i,a)}finally{ur=!1,(cn!==null||Un!==null)&&($o(),zo())}}function rt(n,i){var a=n.stateNode;if(a===null)return null;var c=jl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var ws=!1;if(f)try{var En={};Object.defineProperty(En,"passive",{get:function(){ws=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{ws=!1}function ki(n,i,a,c,d,g,_,S,P){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(Y){this.onError(Y)}}var xi=!1,Es=null,Tn=!1,Wo=null,Nc={onError:function(n){xi=!0,Es=n}};function Ts(n,i,a,c,d,g,_,S,P){xi=!1,Es=null,ki.apply(Nc,arguments)}function hl(n,i,a,c,d,g,_,S,P){if(Ts.apply(this,arguments),xi){if(xi){var B=Es;xi=!1,Es=null}else throw Error(t(198));Tn||(Tn=!0,Wo=B)}}function In(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ni(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Sn(n){if(In(n)!==n)throw Error(t(188))}function dl(n){var i=n.alternate;if(!i){if(i=In(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Sn(d),n;if(g===c)return Sn(d),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var _=!1,S=d.child;S;){if(S===a){_=!0,a=d,c=g;break}if(S===c){_=!0,c=d,a=g;break}S=S.sibling}if(!_){for(S=g.child;S;){if(S===a){_=!0,a=g,c=d;break}if(S===c){_=!0,c=g,a=d;break}S=S.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ho(n){return n=dl(n),n!==null?Is(n):null}function Is(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Is(n);if(i!==null)return i;n=n.sibling}return null}var Ss=e.unstable_scheduleCallback,Ko=e.unstable_cancelCallback,fl=e.unstable_shouldYield,Dc=e.unstable_requestPaint,qe=e.unstable_now,pl=e.unstable_getCurrentPriorityLevel,Di=e.unstable_ImmediatePriority,Mr=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Go=e.unstable_LowPriority,ml=e.unstable_IdlePriority,Vi=null,tn=null;function gl(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Vi,n,void 0,(n.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:vl,Qo=Math.log,yl=Math.LN2;function vl(n){return n>>>=0,n===0?32:31-(Qo(n)/yl|0)|0}var Rs=64,As=4194304;function br(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Oi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var S=_&~d;S!==0?c=br(S):(g&=_,g!==0&&(c=br(g)))}else _=a&~d,_!==0?c=br(_):g!==0&&(c=br(g));if(c===0)return 0;if(i!==0&&i!==c&&!(i&d)&&(d=c&-c,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if(c&4&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Bt(i),d=1<<a,c|=n[a],i&=~d;return c}function Vc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-Bt(g),S=1<<_,P=d[_];P===-1?(!(S&a)||S&c)&&(d[_]=Vc(S,i)):P<=i&&(n.expiredLanes|=S),g&=~S}}function nn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Li(){var n=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),n}function Fr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ur(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Bt(i),n[i]=a}function ze(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Bt(a),g=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function jr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Bt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var xe=0;function Br(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var _l,Cs,wl,El,Tl,Yo=!1,Bn=[],It=null,Rn=null,An=null,zr=new Map,dn=new Map,zn=[],Oc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Il(n,i){switch(n){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":zr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(i.pointerId)}}function Ht(n,i,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},i!==null&&(i=ha(i),i!==null&&Cs(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Lc(n,i,a,c,d){switch(i){case"focusin":return It=Ht(It,n,i,a,c,d),!0;case"dragenter":return Rn=Ht(Rn,n,i,a,c,d),!0;case"mouseover":return An=Ht(An,n,i,a,c,d),!0;case"pointerover":var g=d.pointerId;return zr.set(g,Ht(zr.get(g)||null,n,i,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,dn.set(g,Ht(dn.get(g)||null,n,i,a,c,d)),!0}return!1}function Sl(n){var i=ji(n.target);if(i!==null){var a=In(i);if(a!==null){if(i=a.tag,i===13){if(i=Ni(a),i!==null){n.blockedOn=i,Tl(n.priority,function(){wl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Ps(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ci=c,a.target.dispatchEvent(c),Ci=null}else return i=ha(a),i!==null&&Cs(i),n.blockedOn=a,!1;i.shift()}return!0}function Mi(n,i,a){hr(n)&&a.delete(i)}function Rl(){Yo=!1,It!==null&&hr(It)&&(It=null),Rn!==null&&hr(Rn)&&(Rn=null),An!==null&&hr(An)&&(An=null),zr.forEach(Mi),dn.forEach(Mi)}function Cn(n,i){n.blockedOn===i&&(n.blockedOn=null,Yo||(Yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rl)))}function Pn(n){function i(d){return Cn(d,n)}if(0<Bn.length){Cn(Bn[0],n);for(var a=1;a<Bn.length;a++){var c=Bn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(It!==null&&Cn(It,n),Rn!==null&&Cn(Rn,n),An!==null&&Cn(An,n),zr.forEach(i),dn.forEach(i),a=0;a<zn.length;a++)c=zn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<zn.length&&(a=zn[0],a.blockedOn===null);)Sl(a),a.blockedOn===null&&zn.shift()}var dr=de.ReactCurrentBatchConfig,$r=!0;function Qe(n,i,a,c){var d=xe,g=dr.transition;dr.transition=null;try{xe=1,Xo(n,i,a,c)}finally{xe=d,dr.transition=g}}function Mc(n,i,a,c){var d=xe,g=dr.transition;dr.transition=null;try{xe=4,Xo(n,i,a,c)}finally{xe=d,dr.transition=g}}function Xo(n,i,a,c){if($r){var d=Ps(n,i,a,c);if(d===null)Kc(n,i,c,bi,a),Il(n,c);else if(Lc(d,n,i,a,c))c.stopPropagation();else if(Il(n,c),i&4&&-1<Oc.indexOf(n)){for(;d!==null;){var g=ha(d);if(g!==null&&_l(g),g=Ps(n,i,a,c),g===null&&Kc(n,i,c,bi,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else Kc(n,i,c,null,a)}}var bi=null;function Ps(n,i,a,c){if(bi=null,n=ys(c),n=ji(n),n!==null)if(i=In(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Ni(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return bi=n,null}function Jo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pl()){case Di:return 1;case Mr:return 4;case hn:case Go:return 16;case ml:return 536870912;default:return 16}default:return 16}}var rn=null,ks=null,Kt=null;function Zo(){if(Kt)return Kt;var n,i=ks,a=i.length,c,d="value"in rn?rn.value:rn.textContent,g=d.length;for(n=0;n<a&&i[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&i[a-c]===d[g-c];c++);return Kt=d.slice(n,1<c?1-c:void 0)}function xs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function $n(){return!0}function ea(){return!1}function St(n){function i(a,c,d,g,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$n:ea,this.isPropagationStopped=ea,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),i}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ns=St(kn),qn=se({},kn,{view:0,detail:0}),bc=St(qn),Ds,fr,qr,Fi=se({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qr&&(qr&&n.type==="mousemove"?(Ds=n.screenX-qr.screenX,fr=n.screenY-qr.screenY):fr=Ds=0,qr=n),Ds)},movementY:function(n){return"movementY"in n?n.movementY:fr}}),Vs=St(Fi),ta=se({},Fi,{dataTransfer:0}),Al=St(ta),Os=se({},qn,{relatedTarget:0}),Ls=St(Os),Cl=se({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),pr=St(Cl),Pl=se({},kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kl=St(Pl),xl=se({},kn,{data:0}),na=St(xl),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Nl[n])?!!i[n]:!1}function Wn(){return Dl}var u=se({},qn,{key:function(n){if(n.key){var i=Ms[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=xs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wn,charCode:function(n){return n.type==="keypress"?xs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=St(u),v=se({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=St(v),M=se({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wn}),$=St(M),ee=se({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=St(ee),dt=se({},Fi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=St(dt),vt=[9,13,27,32],ot=f&&"CompositionEvent"in window,fn=null;f&&"documentMode"in document&&(fn=document.documentMode);var sn=f&&"TextEvent"in window&&!fn,Ui=f&&(!ot||fn&&8<fn&&11>=fn),bs=" ",Xf=!1;function Jf(n,i){switch(n){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fs=!1;function O0(n,i){switch(n){case"compositionend":return Zf(i);case"keypress":return i.which!==32?null:(Xf=!0,bs);case"textInput":return n=i.data,n===bs&&Xf?null:n;default:return null}}function L0(n,i){if(Fs)return n==="compositionend"||!ot&&Jf(n,i)?(n=Zo(),Kt=ks=rn=null,Fs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ui&&i.locale!=="ko"?null:i.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ep(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!M0[n.type]:i==="textarea"}function tp(n,i,a,c){jn(c),i=bl(i,"onChange"),0<i.length&&(a=new Ns("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ra=null,ia=null;function b0(n){_p(n,0)}function Vl(n){var i=$s(n);if(ds(i))return n}function F0(n,i){if(n==="change")return i}var np=!1;if(f){var Fc;if(f){var Uc="oninput"in document;if(!Uc){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),Uc=typeof rp.oninput=="function"}Fc=Uc}else Fc=!1;np=Fc&&(!document.documentMode||9<document.documentMode)}function ip(){ra&&(ra.detachEvent("onpropertychange",sp),ia=ra=null)}function sp(n){if(n.propertyName==="value"&&Vl(ia)){var i=[];tp(i,ia,n,ys(n)),qo(b0,i)}}function U0(n,i,a){n==="focusin"?(ip(),ra=i,ia=a,ra.attachEvent("onpropertychange",sp)):n==="focusout"&&ip()}function j0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vl(ia)}function B0(n,i){if(n==="click")return Vl(i)}function z0(n,i){if(n==="input"||n==="change")return Vl(i)}function $0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:$0;function sa(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(i,d)||!xn(n[d],i[d]))return!1}return!0}function op(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ap(n,i){var a=op(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=op(a)}}function lp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?lp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function up(){for(var n=window,i=Or();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Or(n.document)}return i}function jc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function q0(n){var i=up(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&lp(a.ownerDocument.documentElement,a)){if(c!==null&&jc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=ap(a,g);var _=ap(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var W0=f&&"documentMode"in document&&11>=document.documentMode,Us=null,Bc=null,oa=null,zc=!1;function cp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zc||Us==null||Us!==Or(c)||(c=Us,"selectionStart"in c&&jc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),oa&&sa(oa,c)||(oa=c,c=bl(Bc,"onSelect"),0<c.length&&(i=new Ns("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Us)))}function Ol(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var js={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},$c={},hp={};f&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function Ll(n){if($c[n])return $c[n];if(!js[n])return n;var i=js[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in hp)return $c[n]=i[a];return n}var dp=Ll("animationend"),fp=Ll("animationiteration"),pp=Ll("animationstart"),mp=Ll("transitionend"),gp=new Map,yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(n,i){gp.set(n,i),l(i,[n])}for(var qc=0;qc<yp.length;qc++){var Wc=yp[qc],H0=Wc.toLowerCase(),K0=Wc[0].toUpperCase()+Wc.slice(1);Wr(H0,"on"+K0)}Wr(dp,"onAnimationEnd"),Wr(fp,"onAnimationIteration"),Wr(pp,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(mp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G0=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function vp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,hl(c,i,void 0,n),n.currentTarget=null}function _p(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var _=c.length-1;0<=_;_--){var S=c[_],P=S.instance,B=S.currentTarget;if(S=S.listener,P!==g&&d.isPropagationStopped())break e;vp(d,S,B),g=P}else for(_=0;_<c.length;_++){if(S=c[_],P=S.instance,B=S.currentTarget,S=S.listener,P!==g&&d.isPropagationStopped())break e;vp(d,S,B),g=P}}}if(Tn)throw n=Wo,Tn=!1,Wo=null,n}function He(n,i){var a=i[Zc];a===void 0&&(a=i[Zc]=new Set);var c=n+"__bubble";a.has(c)||(wp(i,n,2,!1),a.add(c))}function Hc(n,i,a){var c=0;i&&(c|=4),wp(a,n,c,i)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function la(n){if(!n[Ml]){n[Ml]=!0,s.forEach(function(a){a!=="selectionchange"&&(G0.has(a)||Hc(a,!1,n),Hc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ml]||(i[Ml]=!0,Hc("selectionchange",!1,i))}}function wp(n,i,a,c){switch(Jo(i)){case 1:var d=Qe;break;case 4:d=Mc;break;default:d=Xo}a=d.bind(null,i,a,n),d=void 0,!ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Kc(n,i,a,c,d){var g=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;_=_.return}for(;S!==null;){if(_=ji(S),_===null)return;if(P=_.tag,P===5||P===6){c=g=_;continue e}S=S.parentNode}}c=c.return}qo(function(){var B=g,Y=ys(a),J=[];e:{var Q=gp.get(n);if(Q!==void 0){var ie=Ns,ue=n;switch(n){case"keypress":if(xs(a)===0)break e;case"keydown":case"keyup":ie=m;break;case"focusin":ue="focus",ie=Ls;break;case"focusout":ue="blur",ie=Ls;break;case"beforeblur":case"afterblur":ie=Ls;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Al;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=$;break;case dp:case fp:case pp:ie=pr;break;case mp:ie=je;break;case"scroll":ie=bc;break;case"wheel":ie=Ve;break;case"copy":case"cut":case"paste":ie=kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var ce=(i&4)!==0,it=!ce&&n==="scroll",F=ce?Q!==null?Q+"Capture":null:Q;ce=[];for(var N=B,U;N!==null;){U=N;var Z=U.stateNode;if(U.tag===5&&Z!==null&&(U=Z,F!==null&&(Z=rt(N,F),Z!=null&&ce.push(ua(N,Z,U)))),it)break;N=N.return}0<ce.length&&(Q=new ie(Q,ue,null,a,Y),J.push({event:Q,listeners:ce}))}}if(!(i&7)){e:{if(Q=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",Q&&a!==Ci&&(ue=a.relatedTarget||a.fromElement)&&(ji(ue)||ue[mr]))break e;if((ie||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=B,ue=ue?ji(ue):null,ue!==null&&(it=In(ue),ue!==it||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=B),ie!==ue)){if(ce=Vs,Z="onMouseLeave",F="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(ce=E,Z="onPointerLeave",F="onPointerEnter",N="pointer"),it=ie==null?Q:$s(ie),U=ue==null?Q:$s(ue),Q=new ce(Z,N+"leave",ie,a,Y),Q.target=it,Q.relatedTarget=U,Z=null,ji(Y)===B&&(ce=new ce(F,N+"enter",ue,a,Y),ce.target=U,ce.relatedTarget=it,Z=ce),it=Z,ie&&ue)t:{for(ce=ie,F=ue,N=0,U=ce;U;U=Bs(U))N++;for(U=0,Z=F;Z;Z=Bs(Z))U++;for(;0<N-U;)ce=Bs(ce),N--;for(;0<U-N;)F=Bs(F),U--;for(;N--;){if(ce===F||F!==null&&ce===F.alternate)break t;ce=Bs(ce),F=Bs(F)}ce=null}else ce=null;ie!==null&&Ep(J,Q,ie,ce,!1),ue!==null&&it!==null&&Ep(J,it,ue,ce,!0)}}e:{if(Q=B?$s(B):window,ie=Q.nodeName&&Q.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Q.type==="file")var he=F0;else if(ep(Q))if(np)he=z0;else{he=j0;var ge=U0}else(ie=Q.nodeName)&&ie.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(he=B0);if(he&&(he=he(n,B))){tp(J,he,a,Y);break e}ge&&ge(n,Q,B),n==="focusout"&&(ge=Q._wrapperState)&&ge.controlled&&Q.type==="number"&&ps(Q,"number",Q.value)}switch(ge=B?$s(B):window,n){case"focusin":(ep(ge)||ge.contentEditable==="true")&&(Us=ge,Bc=B,oa=null);break;case"focusout":oa=Bc=Us=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,cp(J,a,Y);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":cp(J,a,Y)}var ye;if(ot)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Fs?Jf(n,a)&&(_e="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Ui&&a.locale!=="ko"&&(Fs||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Fs&&(ye=Zo()):(rn=Y,ks="value"in rn?rn.value:rn.textContent,Fs=!0)),ge=bl(B,_e),0<ge.length&&(_e=new na(_e,n,null,a,Y),J.push({event:_e,listeners:ge}),ye?_e.data=ye:(ye=Zf(a),ye!==null&&(_e.data=ye)))),(ye=sn?O0(n,a):L0(n,a))&&(B=bl(B,"onBeforeInput"),0<B.length&&(Y=new na("onBeforeInput","beforeinput",null,a,Y),J.push({event:Y,listeners:B}),Y.data=ye))}_p(J,i)})}function ua(n,i,a){return{instance:n,listener:i,currentTarget:a}}function bl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=rt(n,a),g!=null&&c.unshift(ua(n,g,d)),g=rt(n,i),g!=null&&c.push(ua(n,g,d))),n=n.return}return c}function Bs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ep(n,i,a,c,d){for(var g=i._reactName,_=[];a!==null&&a!==c;){var S=a,P=S.alternate,B=S.stateNode;if(P!==null&&P===c)break;S.tag===5&&B!==null&&(S=B,d?(P=rt(a,g),P!=null&&_.unshift(ua(a,P,S))):d||(P=rt(a,g),P!=null&&_.push(ua(a,P,S)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Q0=/\r\n?/g,Y0=/\u0000|\uFFFD/g;function Tp(n){return(typeof n=="string"?n:""+n).replace(Q0,`
`).replace(Y0,"")}function Fl(n,i,a){if(i=Tp(i),Tp(n)!==i&&a)throw Error(t(425))}function Ul(){}var Gc=null,Qc=null;function Yc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Xc=typeof setTimeout=="function"?setTimeout:void 0,X0=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,J0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(n){return Ip.resolve(null).then(n).catch(Z0)}:Xc;function Z0(n){setTimeout(function(){throw n})}function Jc(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Pn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Pn(i)}function Hr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Sp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var zs=Math.random().toString(36).slice(2),Hn="__reactFiber$"+zs,ca="__reactProps$"+zs,mr="__reactContainer$"+zs,Zc="__reactEvents$"+zs,ew="__reactListeners$"+zs,tw="__reactHandles$"+zs;function ji(n){var i=n[Hn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[mr]||a[Hn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Sp(n);n!==null;){if(a=n[Hn])return a;n=Sp(n)}return i}n=a,a=n.parentNode}return null}function ha(n){return n=n[Hn]||n[mr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $s(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function jl(n){return n[ca]||null}var eh=[],qs=-1;function Kr(n){return{current:n}}function Ke(n){0>qs||(n.current=eh[qs],eh[qs]=null,qs--)}function We(n,i){qs++,eh[qs]=n.current,n.current=i}var Gr={},Vt=Kr(Gr),Gt=Kr(!1),Bi=Gr;function Ws(n,i){var a=n.type.contextTypes;if(!a)return Gr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Qt(n){return n=n.childContextTypes,n!=null}function Bl(){Ke(Gt),Ke(Vt)}function Rp(n,i,a){if(Vt.current!==Gr)throw Error(t(168));We(Vt,i),We(Gt,a)}function Ap(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,be(n)||"Unknown",d));return se({},a,c)}function zl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gr,Bi=Vt.current,We(Vt,n),We(Gt,Gt.current),!0}function Cp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Ap(n,i,Bi),c.__reactInternalMemoizedMergedChildContext=n,Ke(Gt),Ke(Vt),We(Vt,n)):Ke(Gt),We(Gt,a)}var gr=null,$l=!1,th=!1;function Pp(n){gr===null?gr=[n]:gr.push(n)}function nw(n){$l=!0,Pp(n)}function Qr(){if(!th&&gr!==null){th=!0;var n=0,i=xe;try{var a=gr;for(xe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}gr=null,$l=!1}catch(d){throw gr!==null&&(gr=gr.slice(n+1)),Ss(Di,Qr),d}finally{xe=i,th=!1}}return null}var Hs=[],Ks=0,ql=null,Wl=0,pn=[],mn=0,zi=null,yr=1,vr="";function $i(n,i){Hs[Ks++]=Wl,Hs[Ks++]=ql,ql=n,Wl=i}function kp(n,i,a){pn[mn++]=yr,pn[mn++]=vr,pn[mn++]=zi,zi=n;var c=yr;n=vr;var d=32-Bt(c)-1;c&=~(1<<d),a+=1;var g=32-Bt(i)+d;if(30<g){var _=d-d%5;g=(c&(1<<_)-1).toString(32),c>>=_,d-=_,yr=1<<32-Bt(i)+d|a<<d|c,vr=g+n}else yr=1<<g|a<<d|c,vr=n}function nh(n){n.return!==null&&($i(n,1),kp(n,1,0))}function rh(n){for(;n===ql;)ql=Hs[--Ks],Hs[Ks]=null,Wl=Hs[--Ks],Hs[Ks]=null;for(;n===zi;)zi=pn[--mn],pn[mn]=null,vr=pn[--mn],pn[mn]=null,yr=pn[--mn],pn[mn]=null}var on=null,an=null,Ye=!1,Nn=null;function xp(n,i){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Np(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,on=n,an=Hr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,on=n,an=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=zi!==null?{id:yr,overflow:vr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function ih(n){return(n.mode&1)!==0&&(n.flags&128)===0}function sh(n){if(Ye){var i=an;if(i){var a=i;if(!Np(n,i)){if(ih(n))throw Error(t(418));i=Hr(a.nextSibling);var c=on;i&&Np(n,i)?xp(c,a):(n.flags=n.flags&-4097|2,Ye=!1,on=n)}}else{if(ih(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ye=!1,on=n}}}function Dp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Hl(n){if(n!==on)return!1;if(!Ye)return Dp(n),Ye=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Yc(n.type,n.memoizedProps)),i&&(i=an)){if(ih(n))throw Vp(),Error(t(418));for(;i;)xp(n,i),i=Hr(i.nextSibling)}if(Dp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){an=Hr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}an=null}}else an=on?Hr(n.stateNode.nextSibling):null;return!0}function Vp(){for(var n=an;n;)n=Hr(n.nextSibling)}function Gs(){an=on=null,Ye=!1}function oh(n){Nn===null?Nn=[n]:Nn.push(n)}var rw=de.ReactCurrentBatchConfig;function da(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(_){var S=d.refs;_===null?delete S[g]:S[g]=_},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Kl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Op(n){var i=n._init;return i(n._payload)}function Lp(n){function i(F,N){if(n){var U=F.deletions;U===null?(F.deletions=[N],F.flags|=16):U.push(N)}}function a(F,N){if(!n)return null;for(;N!==null;)i(F,N),N=N.sibling;return null}function c(F,N){for(F=new Map;N!==null;)N.key!==null?F.set(N.key,N):F.set(N.index,N),N=N.sibling;return F}function d(F,N){return F=ri(F,N),F.index=0,F.sibling=null,F}function g(F,N,U){return F.index=U,n?(U=F.alternate,U!==null?(U=U.index,U<N?(F.flags|=2,N):U):(F.flags|=2,N)):(F.flags|=1048576,N)}function _(F){return n&&F.alternate===null&&(F.flags|=2),F}function S(F,N,U,Z){return N===null||N.tag!==6?(N=Xh(U,F.mode,Z),N.return=F,N):(N=d(N,U),N.return=F,N)}function P(F,N,U,Z){var he=U.type;return he===x?Y(F,N,U.props.children,Z,U.key):N!==null&&(N.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Dt&&Op(he)===N.type)?(Z=d(N,U.props),Z.ref=da(F,N,U),Z.return=F,Z):(Z=yu(U.type,U.key,U.props,null,F.mode,Z),Z.ref=da(F,N,U),Z.return=F,Z)}function B(F,N,U,Z){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=Jh(U,F.mode,Z),N.return=F,N):(N=d(N,U.children||[]),N.return=F,N)}function Y(F,N,U,Z,he){return N===null||N.tag!==7?(N=Xi(U,F.mode,Z,he),N.return=F,N):(N=d(N,U),N.return=F,N)}function J(F,N,U){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Xh(""+N,F.mode,U),N.return=F,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Se:return U=yu(N.type,N.key,N.props,null,F.mode,U),U.ref=da(F,null,N),U.return=F,U;case Te:return N=Jh(N,F.mode,U),N.return=F,N;case Dt:var Z=N._init;return J(F,Z(N._payload),U)}if(or(N)||me(N))return N=Xi(N,F.mode,U,null),N.return=F,N;Kl(F,N)}return null}function Q(F,N,U,Z){var he=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return he!==null?null:S(F,N,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Se:return U.key===he?P(F,N,U,Z):null;case Te:return U.key===he?B(F,N,U,Z):null;case Dt:return he=U._init,Q(F,N,he(U._payload),Z)}if(or(U)||me(U))return he!==null?null:Y(F,N,U,Z,null);Kl(F,U)}return null}function ie(F,N,U,Z,he){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return F=F.get(U)||null,S(N,F,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Se:return F=F.get(Z.key===null?U:Z.key)||null,P(N,F,Z,he);case Te:return F=F.get(Z.key===null?U:Z.key)||null,B(N,F,Z,he);case Dt:var ge=Z._init;return ie(F,N,U,ge(Z._payload),he)}if(or(Z)||me(Z))return F=F.get(U)||null,Y(N,F,Z,he,null);Kl(N,Z)}return null}function ue(F,N,U,Z){for(var he=null,ge=null,ye=N,_e=N=0,Et=null;ye!==null&&_e<U.length;_e++){ye.index>_e?(Et=ye,ye=null):Et=ye.sibling;var Me=Q(F,ye,U[_e],Z);if(Me===null){ye===null&&(ye=Et);break}n&&ye&&Me.alternate===null&&i(F,ye),N=g(Me,N,_e),ge===null?he=Me:ge.sibling=Me,ge=Me,ye=Et}if(_e===U.length)return a(F,ye),Ye&&$i(F,_e),he;if(ye===null){for(;_e<U.length;_e++)ye=J(F,U[_e],Z),ye!==null&&(N=g(ye,N,_e),ge===null?he=ye:ge.sibling=ye,ge=ye);return Ye&&$i(F,_e),he}for(ye=c(F,ye);_e<U.length;_e++)Et=ie(ye,F,_e,U[_e],Z),Et!==null&&(n&&Et.alternate!==null&&ye.delete(Et.key===null?_e:Et.key),N=g(Et,N,_e),ge===null?he=Et:ge.sibling=Et,ge=Et);return n&&ye.forEach(function(ii){return i(F,ii)}),Ye&&$i(F,_e),he}function ce(F,N,U,Z){var he=me(U);if(typeof he!="function")throw Error(t(150));if(U=he.call(U),U==null)throw Error(t(151));for(var ge=he=null,ye=N,_e=N=0,Et=null,Me=U.next();ye!==null&&!Me.done;_e++,Me=U.next()){ye.index>_e?(Et=ye,ye=null):Et=ye.sibling;var ii=Q(F,ye,Me.value,Z);if(ii===null){ye===null&&(ye=Et);break}n&&ye&&ii.alternate===null&&i(F,ye),N=g(ii,N,_e),ge===null?he=ii:ge.sibling=ii,ge=ii,ye=Et}if(Me.done)return a(F,ye),Ye&&$i(F,_e),he;if(ye===null){for(;!Me.done;_e++,Me=U.next())Me=J(F,Me.value,Z),Me!==null&&(N=g(Me,N,_e),ge===null?he=Me:ge.sibling=Me,ge=Me);return Ye&&$i(F,_e),he}for(ye=c(F,ye);!Me.done;_e++,Me=U.next())Me=ie(ye,F,_e,Me.value,Z),Me!==null&&(n&&Me.alternate!==null&&ye.delete(Me.key===null?_e:Me.key),N=g(Me,N,_e),ge===null?he=Me:ge.sibling=Me,ge=Me);return n&&ye.forEach(function(Mw){return i(F,Mw)}),Ye&&$i(F,_e),he}function it(F,N,U,Z){if(typeof U=="object"&&U!==null&&U.type===x&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Se:e:{for(var he=U.key,ge=N;ge!==null;){if(ge.key===he){if(he=U.type,he===x){if(ge.tag===7){a(F,ge.sibling),N=d(ge,U.props.children),N.return=F,F=N;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Dt&&Op(he)===ge.type){a(F,ge.sibling),N=d(ge,U.props),N.ref=da(F,ge,U),N.return=F,F=N;break e}a(F,ge);break}else i(F,ge);ge=ge.sibling}U.type===x?(N=Xi(U.props.children,F.mode,Z,U.key),N.return=F,F=N):(Z=yu(U.type,U.key,U.props,null,F.mode,Z),Z.ref=da(F,N,U),Z.return=F,F=Z)}return _(F);case Te:e:{for(ge=U.key;N!==null;){if(N.key===ge)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){a(F,N.sibling),N=d(N,U.children||[]),N.return=F,F=N;break e}else{a(F,N);break}else i(F,N);N=N.sibling}N=Jh(U,F.mode,Z),N.return=F,F=N}return _(F);case Dt:return ge=U._init,it(F,N,ge(U._payload),Z)}if(or(U))return ue(F,N,U,Z);if(me(U))return ce(F,N,U,Z);Kl(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,N!==null&&N.tag===6?(a(F,N.sibling),N=d(N,U),N.return=F,F=N):(a(F,N),N=Xh(U,F.mode,Z),N.return=F,F=N),_(F)):a(F,N)}return it}var Qs=Lp(!0),Mp=Lp(!1),Gl=Kr(null),Ql=null,Ys=null,ah=null;function lh(){ah=Ys=Ql=null}function uh(n){var i=Gl.current;Ke(Gl),n._currentValue=i}function ch(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Xs(n,i){Ql=n,ah=Ys=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(Yt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(ah!==n)if(n={context:n,memoizedValue:i,next:null},Ys===null){if(Ql===null)throw Error(t(308));Ys=n,Ql.dependencies={lanes:0,firstContext:n}}else Ys=Ys.next=n;return i}var qi=null;function hh(n){qi===null?qi=[n]:qi.push(n)}function bp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,hh(i)):(a.next=d.next,d.next=a),i.interleaved=a,_r(n,c)}function _r(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Yr=!1;function dh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Xr(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Le&2){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,_r(n,a)}return d=c.interleaved,d===null?(i.next=i,hh(c)):(i.next=d.next,d.next=i),c.interleaved=i,_r(n,a)}function Yl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,jr(n,a)}}function Up(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?d=g=i:g=g.next=i}else d=g=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Xl(n,i,a,c){var d=n.updateQueue;Yr=!1;var g=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var P=S,B=P.next;P.next=null,_===null?g=B:_.next=B,_=P;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==_&&(S===null?Y.firstBaseUpdate=B:S.next=B,Y.lastBaseUpdate=P))}if(g!==null){var J=d.baseState;_=0,Y=B=P=null,S=g;do{var Q=S.lane,ie=S.eventTime;if((c&Q)===Q){Y!==null&&(Y=Y.next={eventTime:ie,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=n,ce=S;switch(Q=i,ie=a,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){J=ue.call(ie,J,Q);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,Q=typeof ue=="function"?ue.call(ie,J,Q):ue,Q==null)break e;J=se({},J,Q);break e;case 2:Yr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,Q=d.effects,Q===null?d.effects=[S]:Q.push(S))}else ie={eventTime:ie,lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(B=Y=ie,P=J):Y=Y.next=ie,_|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(Y===null&&(P=J),d.baseState=P,d.firstBaseUpdate=B,d.lastBaseUpdate=Y,i=d.shared.interleaved,i!==null){d=i;do _|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);Ki|=_,n.lanes=_,n.memoizedState=J}}function jp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var fa={},Kn=Kr(fa),pa=Kr(fa),ma=Kr(fa);function Wi(n){if(n===fa)throw Error(t(174));return n}function fh(n,i){switch(We(ma,i),We(pa,n),We(Kn,fa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ht(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ht(i,n)}Ke(Kn),We(Kn,i)}function Js(){Ke(Kn),Ke(pa),Ke(ma)}function Bp(n){Wi(ma.current);var i=Wi(Kn.current),a=ht(i,n.type);i!==a&&(We(pa,n),We(Kn,a))}function ph(n){pa.current===n&&(Ke(Kn),Ke(pa))}var Xe=Kr(0);function Jl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var mh=[];function gh(){for(var n=0;n<mh.length;n++)mh[n]._workInProgressVersionPrimary=null;mh.length=0}var Zl=de.ReactCurrentDispatcher,yh=de.ReactCurrentBatchConfig,Hi=0,Je=null,ft=null,_t=null,eu=!1,ga=!1,ya=0,iw=0;function Ot(){throw Error(t(321))}function vh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!xn(n[a],i[a]))return!1;return!0}function _h(n,i,a,c,d,g){if(Hi=g,Je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Zl.current=n===null||n.memoizedState===null?lw:uw,n=a(c,d),ga){g=0;do{if(ga=!1,ya=0,25<=g)throw Error(t(301));g+=1,_t=ft=null,i.updateQueue=null,Zl.current=cw,n=a(c,d)}while(ga)}if(Zl.current=ru,i=ft!==null&&ft.next!==null,Hi=0,_t=ft=Je=null,eu=!1,i)throw Error(t(300));return n}function wh(){var n=ya!==0;return ya=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Je.memoizedState=_t=n:_t=_t.next=n,_t}function yn(){if(ft===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var i=_t===null?Je.memoizedState:_t.next;if(i!==null)_t=i,ft=n;else{if(n===null)throw Error(t(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},_t===null?Je.memoizedState=_t=n:_t=_t.next=n}return _t}function va(n,i){return typeof i=="function"?i(n):i}function Eh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=ft,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var _=d.next;d.next=g.next,g.next=_}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var S=_=null,P=null,B=g;do{var Y=B.lane;if((Hi&Y)===Y)P!==null&&(P=P.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var J={lane:Y,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};P===null?(S=P=J,_=c):P=P.next=J,Je.lanes|=Y,Ki|=Y}B=B.next}while(B!==null&&B!==g);P===null?_=c:P.next=S,xn(c,i.memoizedState)||(Yt=!0),i.memoizedState=c,i.baseState=_,i.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,Je.lanes|=g,Ki|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Th(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do g=n(g,_.action),_=_.next;while(_!==d);xn(g,i.memoizedState)||(Yt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function zp(){}function $p(n,i){var a=Je,c=yn(),d=i(),g=!xn(c.memoizedState,d);if(g&&(c.memoizedState=d,Yt=!0),c=c.queue,Ih(Hp.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||_t!==null&&_t.memoizedState.tag&1){if(a.flags|=2048,_a(9,Wp.bind(null,a,c,d,i),void 0,null),wt===null)throw Error(t(349));Hi&30||qp(a,i,d)}return d}function qp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Je.updateQueue,i===null?(i={lastEffect:null,stores:null},Je.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Wp(n,i,a,c){i.value=a,i.getSnapshot=c,Kp(i)&&Gp(n)}function Hp(n,i,a){return a(function(){Kp(i)&&Gp(n)})}function Kp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!xn(n,a)}catch{return!0}}function Gp(n){var i=_r(n,1);i!==null&&Ln(i,n,1,-1)}function Qp(n){var i=Gn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},i.queue=n,n=n.dispatch=aw.bind(null,Je,n),[i.memoizedState,n]}function _a(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Je.updateQueue,i===null?(i={lastEffect:null,stores:null},Je.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Yp(){return yn().memoizedState}function tu(n,i,a,c){var d=Gn();Je.flags|=n,d.memoizedState=_a(1|i,a,void 0,c===void 0?null:c)}function nu(n,i,a,c){var d=yn();c=c===void 0?null:c;var g=void 0;if(ft!==null){var _=ft.memoizedState;if(g=_.destroy,c!==null&&vh(c,_.deps)){d.memoizedState=_a(i,a,g,c);return}}Je.flags|=n,d.memoizedState=_a(1|i,a,g,c)}function Xp(n,i){return tu(8390656,8,n,i)}function Ih(n,i){return nu(2048,8,n,i)}function Jp(n,i){return nu(4,2,n,i)}function Zp(n,i){return nu(4,4,n,i)}function em(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function tm(n,i,a){return a=a!=null?a.concat([n]):null,nu(4,4,em.bind(null,i,n),a)}function Sh(){}function nm(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&vh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function rm(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&vh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function im(n,i,a){return Hi&21?(xn(a,i)||(a=Li(),Je.lanes|=a,Ki|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=a)}function sw(n,i){var a=xe;xe=a!==0&&4>a?a:4,n(!0);var c=yh.transition;yh.transition={};try{n(!1),i()}finally{xe=a,yh.transition=c}}function sm(){return yn().memoizedState}function ow(n,i,a){var c=ti(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},om(n))am(i,a);else if(a=bp(n,i,a,c),a!==null){var d=qt();Ln(a,n,c,d),lm(a,i,c)}}function aw(n,i,a){var c=ti(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(om(n))am(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,S=g(_,a);if(d.hasEagerState=!0,d.eagerState=S,xn(S,_)){var P=i.interleaved;P===null?(d.next=d,hh(i)):(d.next=P.next,P.next=d),i.interleaved=d;return}}catch{}finally{}a=bp(n,i,d,c),a!==null&&(d=qt(),Ln(a,n,c,d),lm(a,i,c))}}function om(n){var i=n.alternate;return n===Je||i!==null&&i===Je}function am(n,i){ga=eu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function lm(n,i,a){if(a&4194240){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,jr(n,a)}}var ru={readContext:gn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},lw={readContext:gn,useCallback:function(n,i){return Gn().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:Xp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,tu(4194308,4,em.bind(null,i,n),a)},useLayoutEffect:function(n,i){return tu(4194308,4,n,i)},useInsertionEffect:function(n,i){return tu(4,2,n,i)},useMemo:function(n,i){var a=Gn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Gn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=ow.bind(null,Je,n),[c.memoizedState,n]},useRef:function(n){var i=Gn();return n={current:n},i.memoizedState=n},useState:Qp,useDebugValue:Sh,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=Qp(!1),i=n[0];return n=sw.bind(null,n[1]),Gn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Je,d=Gn();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),wt===null)throw Error(t(349));Hi&30||qp(c,i,a)}d.memoizedState=a;var g={value:a,getSnapshot:i};return d.queue=g,Xp(Hp.bind(null,c,g,n),[n]),c.flags|=2048,_a(9,Wp.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Gn(),i=wt.identifierPrefix;if(Ye){var a=vr,c=yr;a=(c&~(1<<32-Bt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ya++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=iw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},uw={readContext:gn,useCallback:nm,useContext:gn,useEffect:Ih,useImperativeHandle:tm,useInsertionEffect:Jp,useLayoutEffect:Zp,useMemo:rm,useReducer:Eh,useRef:Yp,useState:function(){return Eh(va)},useDebugValue:Sh,useDeferredValue:function(n){var i=yn();return im(i,ft.memoizedState,n)},useTransition:function(){var n=Eh(va)[0],i=yn().memoizedState;return[n,i]},useMutableSource:zp,useSyncExternalStore:$p,useId:sm,unstable_isNewReconciler:!1},cw={readContext:gn,useCallback:nm,useContext:gn,useEffect:Ih,useImperativeHandle:tm,useInsertionEffect:Jp,useLayoutEffect:Zp,useMemo:rm,useReducer:Th,useRef:Yp,useState:function(){return Th(va)},useDebugValue:Sh,useDeferredValue:function(n){var i=yn();return ft===null?i.memoizedState=n:im(i,ft.memoizedState,n)},useTransition:function(){var n=Th(va)[0],i=yn().memoizedState;return[n,i]},useMutableSource:zp,useSyncExternalStore:$p,useId:sm,unstable_isNewReconciler:!1};function Dn(n,i){if(n&&n.defaultProps){i=se({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Rh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:se({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var iu={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=qt(),d=ti(n),g=wr(c,d);g.payload=i,a!=null&&(g.callback=a),i=Xr(n,g,d),i!==null&&(Ln(i,n,d,c),Yl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=qt(),d=ti(n),g=wr(c,d);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Xr(n,g,d),i!==null&&(Ln(i,n,d,c),Yl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=qt(),c=ti(n),d=wr(a,c);d.tag=2,i!=null&&(d.callback=i),i=Xr(n,d,c),i!==null&&(Ln(i,n,c,a),Yl(i,n,c))}};function um(n,i,a,c,d,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,_):i.prototype&&i.prototype.isPureReactComponent?!sa(a,c)||!sa(d,g):!0}function cm(n,i,a){var c=!1,d=Gr,g=i.contextType;return typeof g=="object"&&g!==null?g=gn(g):(d=Qt(i)?Bi:Vt.current,c=i.contextTypes,g=(c=c!=null)?Ws(n,d):Gr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=iu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),i}function hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&iu.enqueueReplaceState(i,i.state,null)}function Ah(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},dh(n);var g=i.contextType;typeof g=="object"&&g!==null?d.context=gn(g):(g=Qt(i)?Bi:Vt.current,d.context=Ws(n,g)),d.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Rh(n,i,g,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&iu.enqueueReplaceState(d,d.state,null),Xl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Zs(n,i){try{var a="",c=i;do a+=Ae(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:d,digest:null}}function Ch(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Ph(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var hw=typeof WeakMap=="function"?WeakMap:Map;function dm(n,i,a){a=wr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){hu||(hu=!0,$h=c),Ph(n,i)},a}function fm(n,i,a){a=wr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Ph(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ph(n,i),typeof c!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function pm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new hw;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=Rw.bind(null,n,i,a),i.then(n,n))}function mm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function gm(n,i,a,c,d){return n.mode&1?(n.flags|=65536,n.lanes=d,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=wr(-1,1),i.tag=2,Xr(a,i,1))),a.lanes|=1),n)}var dw=de.ReactCurrentOwner,Yt=!1;function $t(n,i,a,c){i.child=n===null?Mp(i,null,a,c):Qs(i,n.child,a,c)}function ym(n,i,a,c,d){a=a.render;var g=i.ref;return Xs(i,d),c=_h(n,i,a,c,g,d),a=wh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Er(n,i,d)):(Ye&&a&&nh(i),i.flags|=1,$t(n,i,c,d),i.child)}function vm(n,i,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!Yh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,_m(n,i,g,c,d)):(n=yu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!(n.lanes&d)){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:sa,a(_,c)&&n.ref===i.ref)return Er(n,i,d)}return i.flags|=1,n=ri(g,c),n.ref=i.ref,n.return=i,i.child=n}function _m(n,i,a,c,d){if(n!==null){var g=n.memoizedProps;if(sa(g,c)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=c=g,(n.lanes&d)!==0)n.flags&131072&&(Yt=!0);else return i.lanes=n.lanes,Er(n,i,d)}return kh(n,i,a,c,d)}function wm(n,i,a){var c=i.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(to,ln),ln|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(to,ln),ln|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(to,ln),ln|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,We(to,ln),ln|=c;return $t(n,i,d,a),i.child}function Em(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function kh(n,i,a,c,d){var g=Qt(a)?Bi:Vt.current;return g=Ws(i,g),Xs(i,d),a=_h(n,i,a,c,g,d),c=wh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Er(n,i,d)):(Ye&&c&&nh(i),i.flags|=1,$t(n,i,a,d),i.child)}function Tm(n,i,a,c,d){if(Qt(a)){var g=!0;zl(i)}else g=!1;if(Xs(i,d),i.stateNode===null)ou(n,i),cm(i,a,c),Ah(i,a,c,d),c=!0;else if(n===null){var _=i.stateNode,S=i.memoizedProps;_.props=S;var P=_.context,B=a.contextType;typeof B=="object"&&B!==null?B=gn(B):(B=Qt(a)?Bi:Vt.current,B=Ws(i,B));var Y=a.getDerivedStateFromProps,J=typeof Y=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==c||P!==B)&&hm(i,_,c,B),Yr=!1;var Q=i.memoizedState;_.state=Q,Xl(i,c,_,d),P=i.memoizedState,S!==c||Q!==P||Gt.current||Yr?(typeof Y=="function"&&(Rh(i,a,Y,c),P=i.memoizedState),(S=Yr||um(i,a,S,c,Q,P,B))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=P),_.props=c,_.state=P,_.context=B,c=S):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{_=i.stateNode,Fp(n,i),S=i.memoizedProps,B=i.type===i.elementType?S:Dn(i.type,S),_.props=B,J=i.pendingProps,Q=_.context,P=a.contextType,typeof P=="object"&&P!==null?P=gn(P):(P=Qt(a)?Bi:Vt.current,P=Ws(i,P));var ie=a.getDerivedStateFromProps;(Y=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==J||Q!==P)&&hm(i,_,c,P),Yr=!1,Q=i.memoizedState,_.state=Q,Xl(i,c,_,d);var ue=i.memoizedState;S!==J||Q!==ue||Gt.current||Yr?(typeof ie=="function"&&(Rh(i,a,ie,c),ue=i.memoizedState),(B=Yr||um(i,a,B,c,Q,ue,P)||!1)?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ue,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ue,P)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),_.props=c,_.state=ue,_.context=P,c=B):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),c=!1)}return xh(n,i,a,c,g,d)}function xh(n,i,a,c,d,g){Em(n,i);var _=(i.flags&128)!==0;if(!c&&!_)return d&&Cp(i,a,!1),Er(n,i,g);c=i.stateNode,dw.current=i;var S=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&_?(i.child=Qs(i,n.child,null,g),i.child=Qs(i,null,S,g)):$t(n,i,S,g),i.memoizedState=c.state,d&&Cp(i,a,!0),i.child}function Im(n){var i=n.stateNode;i.pendingContext?Rp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Rp(n,i.context,!1),fh(n,i.containerInfo)}function Sm(n,i,a,c,d){return Gs(),oh(d),i.flags|=256,$t(n,i,a,c),i.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Dh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Rm(n,i,a){var c=i.pendingProps,d=Xe.current,g=!1,_=(i.flags&128)!==0,S;if((S=_)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),We(Xe,d&1),n===null)return sh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(_=c.children,n=c.fallback,g?(c=i.mode,g=i.child,_={mode:"hidden",children:_},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=_):g=vu(_,c,0,null),n=Xi(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Dh(a),i.memoizedState=Nh,n):Vh(i,_));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return fw(n,i,_,c,S,d,a);if(g){g=c.fallback,_=i.mode,d=n.child,S=d.sibling;var P={mode:"hidden",children:c.children};return!(_&1)&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=P,i.deletions=null):(c=ri(d,P),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?g=ri(S,g):(g=Xi(g,_,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,_=n.child.memoizedState,_=_===null?Dh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,i.memoizedState=Nh,c}return g=n.child,n=g.sibling,c=ri(g,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Vh(n,i){return i=vu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function su(n,i,a,c){return c!==null&&oh(c),Qs(i,n.child,null,a),n=Vh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function fw(n,i,a,c,d,g,_){if(a)return i.flags&256?(i.flags&=-257,c=Ch(Error(t(422))),su(n,i,_,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,d=i.mode,c=vu({mode:"visible",children:c.children},d,0,null),g=Xi(g,d,_,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,i.mode&1&&Qs(i,n.child,null,_),i.child.memoizedState=Dh(_),i.memoizedState=Nh,g);if(!(i.mode&1))return su(n,i,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,g=Error(t(419)),c=Ch(g,c,void 0),su(n,i,_,c)}if(S=(_&n.childLanes)!==0,Yt||S){if(c=wt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|_)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,_r(n,d),Ln(c,n,d,-1))}return Qh(),c=Ch(Error(t(421))),su(n,i,_,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=Aw.bind(null,n),d._reactRetry=i,null):(n=g.treeContext,an=Hr(d.nextSibling),on=i,Ye=!0,Nn=null,n!==null&&(pn[mn++]=yr,pn[mn++]=vr,pn[mn++]=zi,yr=n.id,vr=n.overflow,zi=i),i=Vh(i,c.children),i.flags|=4096,i)}function Am(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),ch(n.return,i,a)}function Oh(n,i,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function Cm(n,i,a){var c=i.pendingProps,d=c.revealOrder,g=c.tail;if($t(n,i,c.children,a),c=Xe.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Am(n,a,i);else if(n.tag===19)Am(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Xe,c),!(i.mode&1))i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Jl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Oh(i,!1,d,a,g);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Jl(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Oh(i,!0,a,null,g);break;case"together":Oh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ou(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Er(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ki|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ri(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ri(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function pw(n,i,a){switch(i.tag){case 3:Im(i),Gs();break;case 5:Bp(i);break;case 1:Qt(i.type)&&zl(i);break;case 4:fh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;We(Gl,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(We(Xe,Xe.current&1),i.flags|=128,null):a&i.child.childLanes?Rm(n,i,a):(We(Xe,Xe.current&1),n=Er(n,i,a),n!==null?n.sibling:null);We(Xe,Xe.current&1);break;case 19:if(c=(a&i.childLanes)!==0,n.flags&128){if(c)return Cm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Xe,Xe.current),c)break;return null;case 22:case 23:return i.lanes=0,wm(n,i,a)}return Er(n,i,a)}var Pm,Lh,km,xm;Pm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Lh=function(){},km=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Wi(Kn.current);var g=null;switch(a){case"input":d=Si(n,d),c=Si(n,c),g=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),g=[];break;case"textarea":d=Oo(n,d),c=Oo(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ul)}jo(a,c);var _;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var S=d[B];for(_ in S)S.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var P=c[B];if(S=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&P!==S&&(P!=null||S!=null))if(B==="style")if(S){for(_ in S)!S.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in P)P.hasOwnProperty(_)&&S[_]!==P[_]&&(a||(a={}),a[_]=P[_])}else a||(g||(g=[]),g.push(B,a)),a=P;else B==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,S=S?S.__html:void 0,P!=null&&S!==P&&(g=g||[]).push(B,P)):B==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(B,""+P):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(P!=null&&B==="onScroll"&&He("scroll",n),g||S===P||(g=[])):(g=g||[]).push(B,P))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},xm=function(n,i,a,c){a!==c&&(i.flags|=4)};function wa(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function mw(n,i,a){var c=i.pendingProps;switch(rh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(i),null;case 1:return Qt(i.type)&&Bl(),Lt(i),null;case 3:return c=i.stateNode,Js(),Ke(Gt),Ke(Vt),gh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Hl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Nn!==null&&(Hh(Nn),Nn=null))),Lh(n,i),Lt(i),null;case 5:ph(i);var d=Wi(ma.current);if(a=i.type,n!==null&&i.stateNode!=null)km(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Lt(i),null}if(n=Wi(Kn.current),Hl(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[Hn]=i,c[ca]=g,n=(i.mode&1)!==0,a){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(d=0;d<aa.length;d++)He(aa[d],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":fs(c,g),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},He("invalid",c);break;case"textarea":ms(c,g),He("invalid",c)}jo(a,g),d=null;for(var _ in g)if(g.hasOwnProperty(_)){var S=g[_];_==="children"?typeof S=="string"?c.textContent!==S&&(g.suppressHydrationWarning!==!0&&Fl(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&Fl(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(_)&&S!=null&&_==="onScroll"&&He("scroll",c)}switch(a){case"input":sr(c),cl(c,g,!0);break;case"textarea":sr(c),Lo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Ul)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ct(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[Hn]=i,n[ca]=c,Pm(n,i,!1,!1),i.stateNode=n;e:{switch(_=Bo(a,c),a){case"dialog":He("cancel",n),He("close",n),d=c;break;case"iframe":case"object":case"embed":He("load",n),d=c;break;case"video":case"audio":for(d=0;d<aa.length;d++)He(aa[d],n);d=c;break;case"source":He("error",n),d=c;break;case"img":case"image":case"link":He("error",n),He("load",n),d=c;break;case"details":He("toggle",n),d=c;break;case"input":fs(n,c),d=Si(n,c),He("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),He("invalid",n);break;case"textarea":ms(n,c),d=Oo(n,c),He("invalid",n);break;default:d=c}jo(a,d),S=d;for(g in S)if(S.hasOwnProperty(g)){var P=S[g];g==="style"?Fo(n,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Mo(n,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Lr(n,P):typeof P=="number"&&Lr(n,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&He("scroll",n):P!=null&&re(n,g,P,_))}switch(a){case"input":sr(n),cl(n,c,!1);break;case"textarea":sr(n),Lo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?ar(n,!!c.multiple,g,!1):c.defaultValue!=null&&ar(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ul)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Lt(i),null;case 6:if(n&&i.stateNode!=null)xm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Wi(ma.current),Wi(Kn.current),Hl(i)){if(c=i.stateNode,a=i.memoizedProps,c[Hn]=i,(g=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:Fl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fl(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Hn]=i,i.stateNode=c}return Lt(i),null;case 13:if(Ke(Xe),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&an!==null&&i.mode&1&&!(i.flags&128))Vp(),Gs(),i.flags|=98560,g=!1;else if(g=Hl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Hn]=i}else Gs(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Lt(i),g=!1}else Nn!==null&&(Hh(Nn),Nn=null),g=!0;if(!g)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||Xe.current&1?pt===0&&(pt=3):Qh())),i.updateQueue!==null&&(i.flags|=4),Lt(i),null);case 4:return Js(),Lh(n,i),n===null&&la(i.stateNode.containerInfo),Lt(i),null;case 10:return uh(i.type._context),Lt(i),null;case 17:return Qt(i.type)&&Bl(),Lt(i),null;case 19:if(Ke(Xe),g=i.memoizedState,g===null)return Lt(i),null;if(c=(i.flags&128)!==0,_=g.rendering,_===null)if(c)wa(g,!1);else{if(pt!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(_=Jl(n),_!==null){for(i.flags|=128,wa(g,!1),c=_.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Xe,Xe.current&1|2),i.child}n=n.sibling}g.tail!==null&&qe()>no&&(i.flags|=128,c=!0,wa(g,!1),i.lanes=4194304)}else{if(!c)if(n=Jl(_),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Ye)return Lt(i),null}else 2*qe()-g.renderingStartTime>no&&a!==1073741824&&(i.flags|=128,c=!0,wa(g,!1),i.lanes=4194304);g.isBackwards?(_.sibling=i.child,i.child=_):(a=g.last,a!==null?a.sibling=_:i.child=_,g.last=_)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=qe(),i.sibling=null,a=Xe.current,We(Xe,c?a&1|2:a&1),i):(Lt(i),null);case 22:case 23:return Gh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?ln&1073741824&&(Lt(i),i.subtreeFlags&6&&(i.flags|=8192)):Lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function gw(n,i){switch(rh(i),i.tag){case 1:return Qt(i.type)&&Bl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Js(),Ke(Gt),Ke(Vt),gh(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return ph(i),null;case 13:if(Ke(Xe),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ke(Xe),null;case 4:return Js(),null;case 10:return uh(i.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var au=!1,Mt=!1,yw=typeof WeakSet=="function"?WeakSet:Set,ae=null;function eo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){tt(n,i,c)}else a.current=null}function Mh(n,i,a){try{a()}catch(c){tt(n,i,c)}}var Nm=!1;function vw(n,i){if(Gc=$r,n=up(),jc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,S=-1,P=-1,B=0,Y=0,J=n,Q=null;t:for(;;){for(var ie;J!==a||d!==0&&J.nodeType!==3||(S=_+d),J!==g||c!==0&&J.nodeType!==3||(P=_+c),J.nodeType===3&&(_+=J.nodeValue.length),(ie=J.firstChild)!==null;)Q=J,J=ie;for(;;){if(J===n)break t;if(Q===a&&++B===d&&(S=_),Q===g&&++Y===c&&(P=_),(ie=J.nextSibling)!==null)break;J=Q,Q=J.parentNode}J=ie}a=S===-1||P===-1?null:{start:S,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qc={focusedElem:n,selectionRange:a},$r=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var ue=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,it=ue.memoizedState,F=i.stateNode,N=F.getSnapshotBeforeUpdate(i.elementType===i.type?ce:Dn(i.type,ce),it);F.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){tt(i,i.return,Z)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return ue=Nm,Nm=!1,ue}function Ea(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&Mh(i,a,g)}d=d.next}while(d!==c)}}function lu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function bh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Dm(n){var i=n.alternate;i!==null&&(n.alternate=null,Dm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Hn],delete i[ca],delete i[Zc],delete i[ew],delete i[tw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Vm(n){return n.tag===5||n.tag===3||n.tag===4}function Om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Vm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ul));else if(c!==4&&(n=n.child,n!==null))for(Fh(n,i,a),n=n.sibling;n!==null;)Fh(n,i,a),n=n.sibling}function Uh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Uh(n,i,a),n=n.sibling;n!==null;)Uh(n,i,a),n=n.sibling}var Rt=null,Vn=!1;function Jr(n,i,a){for(a=a.child;a!==null;)Lm(n,i,a),a=a.sibling}function Lm(n,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Vi,a)}catch{}switch(a.tag){case 5:Mt||eo(a,i);case 6:var c=Rt,d=Vn;Rt=null,Jr(n,i,a),Rt=c,Vn=d,Rt!==null&&(Vn?(n=Rt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Rt.removeChild(a.stateNode));break;case 18:Rt!==null&&(Vn?(n=Rt,a=a.stateNode,n.nodeType===8?Jc(n.parentNode,a):n.nodeType===1&&Jc(n,a),Pn(n)):Jc(Rt,a.stateNode));break;case 4:c=Rt,d=Vn,Rt=a.stateNode.containerInfo,Vn=!0,Jr(n,i,a),Rt=c,Vn=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,_=g.destroy;g=g.tag,_!==void 0&&(g&2||g&4)&&Mh(a,i,_),d=d.next}while(d!==c)}Jr(n,i,a);break;case 1:if(!Mt&&(eo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){tt(a,i,S)}Jr(n,i,a);break;case 21:Jr(n,i,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,Jr(n,i,a),Mt=c):Jr(n,i,a);break;default:Jr(n,i,a)}}function Mm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new yw),i.forEach(function(c){var d=Cw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 5:Rt=S.stateNode,Vn=!1;break e;case 3:Rt=S.stateNode.containerInfo,Vn=!0;break e;case 4:Rt=S.stateNode.containerInfo,Vn=!0;break e}S=S.return}if(Rt===null)throw Error(t(160));Lm(g,_,d),Rt=null,Vn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(B){tt(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)bm(i,n),i=i.sibling}function bm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(i,n),Qn(n),c&4){try{Ea(3,n,n.return),lu(3,n)}catch(ce){tt(n,n.return,ce)}try{Ea(5,n,n.return)}catch(ce){tt(n,n.return,ce)}}break;case 1:On(i,n),Qn(n),c&512&&a!==null&&eo(a,a.return);break;case 5:if(On(i,n),Qn(n),c&512&&a!==null&&eo(a,a.return),n.flags&32){var d=n.stateNode;try{Lr(d,"")}catch(ce){tt(n,n.return,ce)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,S=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&Do(d,g),Bo(S,_);var B=Bo(S,g);for(_=0;_<P.length;_+=2){var Y=P[_],J=P[_+1];Y==="style"?Fo(d,J):Y==="dangerouslySetInnerHTML"?Mo(d,J):Y==="children"?Lr(d,J):re(d,Y,J,B)}switch(S){case"input":Vo(d,g);break;case"textarea":gs(d,g);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var ie=g.value;ie!=null?ar(d,!!g.multiple,ie,!1):Q!==!!g.multiple&&(g.defaultValue!=null?ar(d,!!g.multiple,g.defaultValue,!0):ar(d,!!g.multiple,g.multiple?[]:"",!1))}d[ca]=g}catch(ce){tt(n,n.return,ce)}}break;case 6:if(On(i,n),Qn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(ce){tt(n,n.return,ce)}}break;case 3:if(On(i,n),Qn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Pn(i.containerInfo)}catch(ce){tt(n,n.return,ce)}break;case 4:On(i,n),Qn(n);break;case 13:On(i,n),Qn(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(zh=qe())),c&4&&Mm(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=(B=Mt)||Y,On(i,n),Mt=B):On(i,n),Qn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Y&&n.mode&1)for(ae=n,Y=n.child;Y!==null;){for(J=ae=Y;ae!==null;){switch(Q=ae,ie=Q.child,Q.tag){case 0:case 11:case 14:case 15:Ea(4,Q,Q.return);break;case 1:eo(Q,Q.return);var ue=Q.stateNode;if(typeof ue.componentWillUnmount=="function"){c=Q,a=Q.return;try{i=c,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(ce){tt(c,a,ce)}}break;case 5:eo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){jm(J);continue}}ie!==null?(ie.return=Q,ae=ie):jm(J)}Y=Y.sibling}e:for(Y=null,J=n;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,B?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=J.stateNode,P=J.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,S.style.display=bo("display",_))}catch(ce){tt(n,n.return,ce)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(ce){tt(n,n.return,ce)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:On(i,n),Qn(n),c&4&&Mm(n);break;case 21:break;default:On(i,n),Qn(n)}}function Qn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Vm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Lr(d,""),c.flags&=-33);var g=Om(n);Uh(n,g,d);break;case 3:case 4:var _=c.stateNode.containerInfo,S=Om(n);Fh(n,S,_);break;default:throw Error(t(161))}}catch(P){tt(n,n.return,P)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function _w(n,i,a){ae=n,Fm(n)}function Fm(n,i,a){for(var c=(n.mode&1)!==0;ae!==null;){var d=ae,g=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||au;if(!_){var S=d.alternate,P=S!==null&&S.memoizedState!==null||Mt;S=au;var B=Mt;if(au=_,(Mt=P)&&!B)for(ae=d;ae!==null;)_=ae,P=_.child,_.tag===22&&_.memoizedState!==null?Bm(d):P!==null?(P.return=_,ae=P):Bm(d);for(;g!==null;)ae=g,Fm(g),g=g.sibling;ae=d,au=S,Mt=B}Um(n)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ae=g):Um(n)}}function Um(n){for(;ae!==null;){var i=ae;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Mt||lu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Dn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&jp(i,g,c);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}jp(i,_,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var Y=B.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&Pn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||i.flags&512&&bh(i)}catch(Q){tt(i,i.return,Q)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function jm(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function Bm(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{lu(4,i)}catch(P){tt(i,a,P)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(P){tt(i,d,P)}}var g=i.return;try{bh(i)}catch(P){tt(i,g,P)}break;case 5:var _=i.return;try{bh(i)}catch(P){tt(i,_,P)}}}catch(P){tt(i,i.return,P)}if(i===n){ae=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ae=S;break}ae=i.return}}var ww=Math.ceil,uu=de.ReactCurrentDispatcher,jh=de.ReactCurrentOwner,vn=de.ReactCurrentBatchConfig,Le=0,wt=null,at=null,At=0,ln=0,to=Kr(0),pt=0,Ta=null,Ki=0,cu=0,Bh=0,Ia=null,Xt=null,zh=0,no=1/0,Tr=null,hu=!1,$h=null,Zr=null,du=!1,ei=null,fu=0,Sa=0,qh=null,pu=-1,mu=0;function qt(){return Le&6?qe():pu!==-1?pu:pu=qe()}function ti(n){return n.mode&1?Le&2&&At!==0?At&-At:rw.transition!==null?(mu===0&&(mu=Li()),mu):(n=xe,n!==0||(n=window.event,n=n===void 0?16:Jo(n.type)),n):1}function Ln(n,i,a,c){if(50<Sa)throw Sa=0,qh=null,Error(t(185));Ur(n,a,c),(!(Le&2)||n!==wt)&&(n===wt&&(!(Le&2)&&(cu|=a),pt===4&&ni(n,At)),Jt(n,c),a===1&&Le===0&&!(i.mode&1)&&(no=qe()+500,$l&&Qr()))}function Jt(n,i){var a=n.callbackNode;cr(n,i);var c=Oi(n,n===wt?At:0);if(c===0)a!==null&&Ko(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ko(a),i===1)n.tag===0?nw($m.bind(null,n)):Pp($m.bind(null,n)),J0(function(){!(Le&6)&&Qr()}),a=null;else{switch(Br(c)){case 1:a=Di;break;case 4:a=Mr;break;case 16:a=hn;break;case 536870912:a=ml;break;default:a=hn}a=Xm(a,zm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function zm(n,i){if(pu=-1,mu=0,Le&6)throw Error(t(327));var a=n.callbackNode;if(ro()&&n.callbackNode!==a)return null;var c=Oi(n,n===wt?At:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=gu(n,c);else{i=c;var d=Le;Le|=2;var g=Wm();(wt!==n||At!==i)&&(Tr=null,no=qe()+500,Qi(n,i));do try{Iw();break}catch(S){qm(n,S)}while(!0);lh(),uu.current=g,Le=d,at!==null?i=0:(wt=null,At=0,i=pt)}if(i!==0){if(i===2&&(d=nn(n),d!==0&&(c=d,i=Wh(n,d))),i===1)throw a=Ta,Qi(n,0),ni(n,c),Jt(n,qe()),a;if(i===6)ni(n,c);else{if(d=n.current.alternate,!(c&30)&&!Ew(d)&&(i=gu(n,c),i===2&&(g=nn(n),g!==0&&(c=g,i=Wh(n,g))),i===1))throw a=Ta,Qi(n,0),ni(n,c),Jt(n,qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Yi(n,Xt,Tr);break;case 3:if(ni(n,c),(c&130023424)===c&&(i=zh+500-qe(),10<i)){if(Oi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Xc(Yi.bind(null,n,Xt,Tr),i);break}Yi(n,Xt,Tr);break;case 4:if(ni(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var _=31-Bt(c);g=1<<_,_=i[_],_>d&&(d=_),c&=~g}if(c=d,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*ww(c/1960))-c,10<c){n.timeoutHandle=Xc(Yi.bind(null,n,Xt,Tr),c);break}Yi(n,Xt,Tr);break;case 5:Yi(n,Xt,Tr);break;default:throw Error(t(329))}}}return Jt(n,qe()),n.callbackNode===a?zm.bind(null,n):null}function Wh(n,i){var a=Ia;return n.current.memoizedState.isDehydrated&&(Qi(n,i).flags|=256),n=gu(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&Hh(i)),n}function Hh(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function Ew(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!xn(g(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ni(n,i){for(i&=~Bh,i&=~cu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Bt(i),c=1<<a;n[a]=-1,i&=~c}}function $m(n){if(Le&6)throw Error(t(327));ro();var i=Oi(n,0);if(!(i&1))return Jt(n,qe()),null;var a=gu(n,i);if(n.tag!==0&&a===2){var c=nn(n);c!==0&&(i=c,a=Wh(n,c))}if(a===1)throw a=Ta,Qi(n,0),ni(n,i),Jt(n,qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Yi(n,Xt,Tr),Jt(n,qe()),null}function Kh(n,i){var a=Le;Le|=1;try{return n(i)}finally{Le=a,Le===0&&(no=qe()+500,$l&&Qr())}}function Gi(n){ei!==null&&ei.tag===0&&!(Le&6)&&ro();var i=Le;Le|=1;var a=vn.transition,c=xe;try{if(vn.transition=null,xe=1,n)return n()}finally{xe=c,vn.transition=a,Le=i,!(Le&6)&&Qr()}}function Gh(){ln=to.current,Ke(to)}function Qi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,X0(a)),at!==null)for(a=at.return;a!==null;){var c=a;switch(rh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Bl();break;case 3:Js(),Ke(Gt),Ke(Vt),gh();break;case 5:ph(c);break;case 4:Js();break;case 13:Ke(Xe);break;case 19:Ke(Xe);break;case 10:uh(c.type._context);break;case 22:case 23:Gh()}a=a.return}if(wt=n,at=n=ri(n.current,null),At=ln=i,pt=0,Ta=null,Bh=cu=Ki=0,Xt=Ia=null,qi!==null){for(i=0;i<qi.length;i++)if(a=qi[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var _=g.next;g.next=d,c.next=_}a.pending=c}qi=null}return n}function qm(n,i){do{var a=at;try{if(lh(),Zl.current=ru,eu){for(var c=Je.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}eu=!1}if(Hi=0,_t=ft=Je=null,ga=!1,ya=0,jh.current=null,a===null||a.return===null){pt=1,Ta=i,at=null;break}e:{var g=n,_=a.return,S=a,P=i;if(i=At,S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var B=P,Y=S,J=Y.tag;if(!(Y.mode&1)&&(J===0||J===11||J===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ie=mm(_);if(ie!==null){ie.flags&=-257,gm(ie,_,S,g,i),ie.mode&1&&pm(g,B,i),i=ie,P=B;var ue=i.updateQueue;if(ue===null){var ce=new Set;ce.add(P),i.updateQueue=ce}else ue.add(P);break e}else{if(!(i&1)){pm(g,B,i),Qh();break e}P=Error(t(426))}}else if(Ye&&S.mode&1){var it=mm(_);if(it!==null){!(it.flags&65536)&&(it.flags|=256),gm(it,_,S,g,i),oh(Zs(P,S));break e}}g=P=Zs(P,S),pt!==4&&(pt=2),Ia===null?Ia=[g]:Ia.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var F=dm(g,P,i);Up(g,F);break e;case 1:S=P;var N=g.type,U=g.stateNode;if(!(g.flags&128)&&(typeof N.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Zr===null||!Zr.has(U)))){g.flags|=65536,i&=-i,g.lanes|=i;var Z=fm(g,S,i);Up(g,Z);break e}}g=g.return}while(g!==null)}Km(a)}catch(he){i=he,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function Wm(){var n=uu.current;return uu.current=ru,n===null?ru:n}function Qh(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||!(Ki&268435455)&&!(cu&268435455)||ni(wt,At)}function gu(n,i){var a=Le;Le|=2;var c=Wm();(wt!==n||At!==i)&&(Tr=null,Qi(n,i));do try{Tw();break}catch(d){qm(n,d)}while(!0);if(lh(),Le=a,uu.current=c,at!==null)throw Error(t(261));return wt=null,At=0,pt}function Tw(){for(;at!==null;)Hm(at)}function Iw(){for(;at!==null&&!fl();)Hm(at)}function Hm(n){var i=Ym(n.alternate,n,ln);n.memoizedProps=n.pendingProps,i===null?Km(n):at=i,jh.current=null}function Km(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=gw(a,i),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pt=6,at=null;return}}else if(a=mw(a,i,ln),a!==null){at=a;return}if(i=i.sibling,i!==null){at=i;return}at=i=n}while(i!==null);pt===0&&(pt=5)}function Yi(n,i,a){var c=xe,d=vn.transition;try{vn.transition=null,xe=1,Sw(n,i,a,c)}finally{vn.transition=d,xe=c}return null}function Sw(n,i,a,c){do ro();while(ei!==null);if(Le&6)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(ze(n,g),n===wt&&(at=wt=null,At=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||du||(du=!0,Xm(hn,function(){return ro(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=vn.transition,vn.transition=null;var _=xe;xe=1;var S=Le;Le|=4,jh.current=null,vw(n,a),bm(a,n),q0(Qc),$r=!!Gc,Qc=Gc=null,n.current=a,_w(a),Dc(),Le=S,xe=_,vn.transition=g}else n.current=a;if(du&&(du=!1,ei=n,fu=d),g=n.pendingLanes,g===0&&(Zr=null),gl(a.stateNode),Jt(n,qe()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(hu)throw hu=!1,n=$h,$h=null,n;return fu&1&&n.tag!==0&&ro(),g=n.pendingLanes,g&1?n===qh?Sa++:(Sa=0,qh=n):Sa=0,Qr(),null}function ro(){if(ei!==null){var n=Br(fu),i=vn.transition,a=xe;try{if(vn.transition=null,xe=16>n?16:n,ei===null)var c=!1;else{if(n=ei,ei=null,fu=0,Le&6)throw Error(t(331));var d=Le;for(Le|=4,ae=n.current;ae!==null;){var g=ae,_=g.child;if(ae.flags&16){var S=g.deletions;if(S!==null){for(var P=0;P<S.length;P++){var B=S[P];for(ae=B;ae!==null;){var Y=ae;switch(Y.tag){case 0:case 11:case 15:Ea(8,Y,g)}var J=Y.child;if(J!==null)J.return=Y,ae=J;else for(;ae!==null;){Y=ae;var Q=Y.sibling,ie=Y.return;if(Dm(Y),Y===B){ae=null;break}if(Q!==null){Q.return=ie,ae=Q;break}ae=ie}}}var ue=g.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var it=ce.sibling;ce.sibling=null,ce=it}while(ce!==null)}}ae=g}}if(g.subtreeFlags&2064&&_!==null)_.return=g,ae=_;else e:for(;ae!==null;){if(g=ae,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ea(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ae=F;break e}ae=g.return}}var N=n.current;for(ae=N;ae!==null;){_=ae;var U=_.child;if(_.subtreeFlags&2064&&U!==null)U.return=_,ae=U;else e:for(_=N;ae!==null;){if(S=ae,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:lu(9,S)}}catch(he){tt(S,S.return,he)}if(S===_){ae=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,ae=Z;break e}ae=S.return}}if(Le=d,Qr(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Vi,n)}catch{}c=!0}return c}finally{xe=a,vn.transition=i}}return!1}function Gm(n,i,a){i=Zs(a,i),i=dm(n,i,1),n=Xr(n,i,1),i=qt(),n!==null&&(Ur(n,1,i),Jt(n,i))}function tt(n,i,a){if(n.tag===3)Gm(n,n,a);else for(;i!==null;){if(i.tag===3){Gm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zr===null||!Zr.has(c))){n=Zs(a,n),n=fm(i,n,1),i=Xr(i,n,1),n=qt(),i!==null&&(Ur(i,1,n),Jt(i,n));break}}i=i.return}}function Rw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=qt(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(At&a)===a&&(pt===4||pt===3&&(At&130023424)===At&&500>qe()-zh?Qi(n,0):Bh|=a),Jt(n,i)}function Qm(n,i){i===0&&(n.mode&1?(i=As,As<<=1,!(As&130023424)&&(As=4194304)):i=1);var a=qt();n=_r(n,i),n!==null&&(Ur(n,i,a),Jt(n,a))}function Aw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Qm(n,a)}function Cw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Qm(n,a)}var Ym;Ym=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Gt.current)Yt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return Yt=!1,pw(n,i,a);Yt=!!(n.flags&131072)}else Yt=!1,Ye&&i.flags&1048576&&kp(i,Wl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;ou(n,i),n=i.pendingProps;var d=Ws(i,Vt.current);Xs(i,a),d=_h(null,i,c,n,d,a);var g=wh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Qt(c)?(g=!0,zl(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,dh(i),d.updater=iu,i.stateNode=d,d._reactInternals=i,Ah(i,c,n,a),i=xh(null,i,c,!0,g,a)):(i.tag=0,Ye&&g&&nh(i),$t(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(ou(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=kw(c),n=Dn(c,n),d){case 0:i=kh(null,i,c,n,a);break e;case 1:i=Tm(null,i,c,n,a);break e;case 11:i=ym(null,i,c,n,a);break e;case 14:i=vm(null,i,c,Dn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),kh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),Tm(n,i,c,d,a);case 3:e:{if(Im(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,d=g.element,Fp(n,i),Xl(i,c,null,a);var _=i.memoizedState;if(c=_.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=Zs(Error(t(423)),i),i=Sm(n,i,c,a,d);break e}else if(c!==d){d=Zs(Error(t(424)),i),i=Sm(n,i,c,a,d);break e}else for(an=Hr(i.stateNode.containerInfo.firstChild),on=i,Ye=!0,Nn=null,a=Mp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gs(),c===d){i=Er(n,i,a);break e}$t(n,i,c,a)}i=i.child}return i;case 5:return Bp(i),n===null&&sh(i),c=i.type,d=i.pendingProps,g=n!==null?n.memoizedProps:null,_=d.children,Yc(c,d)?_=null:g!==null&&Yc(c,g)&&(i.flags|=32),Em(n,i),$t(n,i,_,a),i.child;case 6:return n===null&&sh(i),null;case 13:return Rm(n,i,a);case 4:return fh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Qs(i,null,c,a):$t(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),ym(n,i,c,d,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,g=i.memoizedProps,_=d.value,We(Gl,c._currentValue),c._currentValue=_,g!==null)if(xn(g.value,_)){if(g.children===d.children&&!Gt.current){i=Er(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var S=g.dependencies;if(S!==null){_=g.child;for(var P=S.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=wr(-1,a&-a),P.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var Y=B.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),B.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),ch(g.return,a,i),S.lanes|=a;break}P=P.next}}else if(g.tag===10)_=g.type===i.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,S=_.alternate,S!==null&&(S.lanes|=a),ch(_,a,i),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}$t(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,Xs(i,a),d=gn(d),c=c(d),i.flags|=1,$t(n,i,c,a),i.child;case 14:return c=i.type,d=Dn(c,i.pendingProps),d=Dn(c.type,d),vm(n,i,c,d,a);case 15:return _m(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),ou(n,i),i.tag=1,Qt(c)?(n=!0,zl(i)):n=!1,Xs(i,a),cm(i,c,d),Ah(i,c,d,a),xh(null,i,c,!0,n,a);case 19:return Cm(n,i,a);case 22:return wm(n,i,a)}throw Error(t(156,i.tag))};function Xm(n,i){return Ss(n,i)}function Pw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,i,a,c){return new Pw(n,i,a,c)}function Yh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kw(n){if(typeof n=="function")return Yh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===Nt)return 14}return 2}function ri(n,i){var a=n.alternate;return a===null?(a=_n(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function yu(n,i,a,c,d,g){var _=2;if(c=n,typeof n=="function")Yh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case x:return Xi(a.children,d,g,i);case I:_=8,d|=8;break;case A:return n=_n(12,a,i,d|2),n.elementType=A,n.lanes=g,n;case C:return n=_n(13,a,i,d),n.elementType=C,n.lanes=g,n;case nt:return n=_n(19,a,i,d),n.elementType=nt,n.lanes=g,n;case Be:return vu(a,d,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:_=10;break e;case D:_=9;break e;case L:_=11;break e;case Nt:_=14;break e;case Dt:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=_n(_,a,i,d),i.elementType=n,i.type=c,i.lanes=g,i}function Xi(n,i,a,c){return n=_n(7,n,c,i),n.lanes=a,n}function vu(n,i,a,c){return n=_n(22,n,c,i),n.elementType=Be,n.lanes=a,n.stateNode={isHidden:!1},n}function Xh(n,i,a){return n=_n(6,n,null,i),n.lanes=a,n}function Jh(n,i,a){return i=_n(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function xw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fr(0),this.expirationTimes=Fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Zh(n,i,a,c,d,g,_,S,P){return n=new xw(n,i,a,S,P),i===1?(i=1,g===!0&&(i|=8)):i=0,g=_n(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(g),n}function Nw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Jm(n){if(!n)return Gr;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Qt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Qt(a))return Ap(n,a,i)}return i}function Zm(n,i,a,c,d,g,_,S,P){return n=Zh(a,c,!0,n,d,g,_,S,P),n.context=Jm(null),a=n.current,c=qt(),d=ti(a),g=wr(c,d),g.callback=i??null,Xr(a,g,d),n.current.lanes=d,Ur(n,d,c),Jt(n,c),n}function _u(n,i,a,c){var d=i.current,g=qt(),_=ti(d);return a=Jm(a),i.context===null?i.context=a:i.pendingContext=a,i=wr(g,_),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Xr(d,i,_),n!==null&&(Ln(n,d,_,g),Yl(n,d,_)),_}function wu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function eg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ed(n,i){eg(n,i),(n=n.alternate)&&eg(n,i)}function Dw(){return null}var tg=typeof reportError=="function"?reportError:function(n){console.error(n)};function td(n){this._internalRoot=n}Eu.prototype.render=td.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));_u(n,i,null,null)},Eu.prototype.unmount=td.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Gi(function(){_u(null,n,null,null)}),i[mr]=null}};function Eu(n){this._internalRoot=n}Eu.prototype.unstable_scheduleHydration=function(n){if(n){var i=El();n={blockedOn:null,target:n,priority:i};for(var a=0;a<zn.length&&i!==0&&i<zn[a].priority;a++);zn.splice(a,0,n),a===0&&Sl(n)}};function nd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Tu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ng(){}function Vw(n,i,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var B=wu(_);g.call(B)}}var _=Zm(i,c,n,0,null,!1,!1,"",ng);return n._reactRootContainer=_,n[mr]=_.current,la(n.nodeType===8?n.parentNode:n),Gi(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var B=wu(P);S.call(B)}}var P=Zh(n,0,!1,null,null,!1,!1,"",ng);return n._reactRootContainer=P,n[mr]=P.current,la(n.nodeType===8?n.parentNode:n),Gi(function(){_u(i,P,a,c)}),P}function Iu(n,i,a,c,d){var g=a._reactRootContainer;if(g){var _=g;if(typeof d=="function"){var S=d;d=function(){var P=wu(_);S.call(P)}}_u(i,_,n,d)}else _=Vw(a,i,n,d,c);return wu(_)}_l=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=br(i.pendingLanes);a!==0&&(jr(i,a|1),Jt(i,qe()),!(Le&6)&&(no=qe()+500,Qr()))}break;case 13:Gi(function(){var c=_r(n,1);if(c!==null){var d=qt();Ln(c,n,1,d)}}),ed(n,1)}},Cs=function(n){if(n.tag===13){var i=_r(n,134217728);if(i!==null){var a=qt();Ln(i,n,134217728,a)}ed(n,134217728)}},wl=function(n){if(n.tag===13){var i=ti(n),a=_r(n,i);if(a!==null){var c=qt();Ln(a,n,i,c)}ed(n,i)}},El=function(){return xe},Tl=function(n,i){var a=xe;try{return xe=n,i()}finally{xe=a}},vs=function(n,i,a){switch(i){case"input":if(Vo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=jl(c);if(!d)throw Error(t(90));ds(c),Vo(c,d)}}}break;case"textarea":gs(n,a);break;case"select":i=a.value,i!=null&&ar(n,!!a.multiple,i,!1)}},Pi=Kh,$o=Gi;var Ow={usingClientEntryPoint:!1,Events:[ha,$s,jl,jn,zo,Kh]},Ra={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lw={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ho(n),n===null?null:n.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||Dw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{Vi=Su.inject(Lw),tn=Su}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ow,Zt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nd(i))throw Error(t(200));return Nw(n,i,null,a)},Zt.createRoot=function(n,i){if(!nd(n))throw Error(t(299));var a=!1,c="",d=tg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Zh(n,1,!1,null,null,a,!1,c,d),n[mr]=i.current,la(n.nodeType===8?n.parentNode:n),new td(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ho(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return Gi(n)},Zt.hydrate=function(n,i,a){if(!Tu(i))throw Error(t(200));return Iu(null,n,i,!0,a)},Zt.hydrateRoot=function(n,i,a){if(!nd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",_=tg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=Zm(i,null,n,1,a??null,d,!1,g,_),n[mr]=i.current,la(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Eu(i)},Zt.render=function(n,i,a){if(!Tu(i))throw Error(t(200));return Iu(null,n,i,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Tu(n))throw Error(t(40));return n._reactRootContainer?(Gi(function(){Iu(null,null,n,!1,function(){n._reactRootContainer=null,n[mr]=null})}),!0):!1},Zt.unstable_batchedUpdates=Kh,Zt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Tu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Iu(n,i,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var cg;function qw(){if(cg)return sd.exports;cg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sd.exports=$w(),sd.exports}var hg;function Ww(){if(hg)return Ru;hg=1;var r=qw();return Ru.createRoot=r.createRoot,Ru.hydrateRoot=r.hydrateRoot,Ru}var Hw=Ww(),dg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Kw=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},jy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let R=(f&15)<<2|y>>6,V=y&63;p||(V=64,h||(R=64)),s.push(t[w],t[T],t[R],t[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Uy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Kw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new Gw;const R=l<<2|f>>4;if(s.push(R),y!==64){const V=f<<4&240|y>>2;if(s.push(V),T!==64){const b=y<<6&192|T;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Gw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qw=function(r){const e=Uy(r);return jy.encodeByteArray(e,!0)},Ku=function(r){return Qw(r).replace(/\./g,"")},By=function(r){try{return jy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=()=>Yw().__FIREBASE_DEFAULTS__,Jw=()=>{if(typeof process>"u"||typeof dg>"u")return;const r=dg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Zw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&By(r[1]);return e&&JSON.parse(e)},cc=()=>{try{return Xw()||Jw()||Zw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},zy=r=>{var e,t;return(t=(e=cc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},eE=r=>{const e=zy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},$y=()=>{var r;return(r=cc())===null||r===void 0?void 0:r.config},qy=r=>{var e;return(e=cc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ku(JSON.stringify(t)),Ku(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function iE(){var r;const e=(r=cc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function aE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lE(){const r=jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function uE(){return!iE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cE(){try{return typeof indexedDB=="object"}catch{return!1}}function hE(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="FirebaseError";class Dr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=dE,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?fE(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Dr(o,f,s)}}function fE(r,e){return r.replace(pE,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const pE=/\{\$([^}]+)}/g;function mE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Gu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(fg(l)&&fg(h)){if(!Gu(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function fg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ka(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function xa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function gE(r,e){const t=new yE(r,e);return t.subscribe.bind(t)}class yE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");vE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=ld),o.error===void 0&&(o.error=ld),o.complete===void 0&&(o.complete=ld);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(r){return r&&r._delegate?r._delegate:r}class ts{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new tE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EE(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:wE(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wE(r){return r===Ji?void 0:r}function EE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _E(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const IE={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},SE=Pe.INFO,RE={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},AE=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=RE[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xd{constructor(e){this.name=e,this._logLevel=SE,this._logHandler=AE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const CE=(r,e)=>e.some(t=>r instanceof t);let pg,mg;function PE(){return pg||(pg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kE(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wy=new WeakMap,Sd=new WeakMap,Hy=new WeakMap,ud=new WeakMap,Jd=new WeakMap;function xE(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(hi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Wy.set(t,r)}).catch(()=>{}),Jd.set(e,r),e}function NE(r){if(Sd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Sd.set(r,e)}let Rd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Sd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Hy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function DE(r){Rd=r(Rd)}function VE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(cd(this),e,...t);return Hy.set(s,e.sort?e.sort():[e]),hi(s)}:kE().includes(r)?function(...e){return r.apply(cd(this),e),hi(Wy.get(this))}:function(...e){return hi(r.apply(cd(this),e))}}function OE(r){return typeof r=="function"?VE(r):(r instanceof IDBTransaction&&NE(r),CE(r,PE())?new Proxy(r,Rd):r)}function hi(r){if(r instanceof IDBRequest)return xE(r);if(ud.has(r))return ud.get(r);const e=OE(r);return e!==r&&(ud.set(r,e),Jd.set(e,r)),e}const cd=r=>Jd.get(r);function LE(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=hi(h);return s&&h.addEventListener("upgradeneeded",p=>{s(hi(h.result),p.oldVersion,p.newVersion,hi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const ME=["get","getKey","getAll","getAllKeys","count"],bE=["put","add","delete","clear"],hd=new Map;function gg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(hd.get(e))return hd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=bE.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||ME.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return hd.set(e,l),l}DE(r=>({...r,get:(e,t,s)=>gg(e,t)||r.get(e,t,s),has:(e,t)=>!!gg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UE(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function UE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ad="@firebase/app",yg="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Xd("@firebase/app"),jE="@firebase/app-compat",BE="@firebase/analytics-compat",zE="@firebase/analytics",$E="@firebase/app-check-compat",qE="@firebase/app-check",WE="@firebase/auth",HE="@firebase/auth-compat",KE="@firebase/database",GE="@firebase/data-connect",QE="@firebase/database-compat",YE="@firebase/functions",XE="@firebase/functions-compat",JE="@firebase/installations",ZE="@firebase/installations-compat",eT="@firebase/messaging",tT="@firebase/messaging-compat",nT="@firebase/performance",rT="@firebase/performance-compat",iT="@firebase/remote-config",sT="@firebase/remote-config-compat",oT="@firebase/storage",aT="@firebase/storage-compat",lT="@firebase/firestore",uT="@firebase/vertexai",cT="@firebase/firestore-compat",hT="firebase",dT="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]",fT={[Ad]:"fire-core",[jE]:"fire-core-compat",[zE]:"fire-analytics",[BE]:"fire-analytics-compat",[qE]:"fire-app-check",[$E]:"fire-app-check-compat",[WE]:"fire-auth",[HE]:"fire-auth-compat",[KE]:"fire-rtdb",[GE]:"fire-data-connect",[QE]:"fire-rtdb-compat",[YE]:"fire-fn",[XE]:"fire-fn-compat",[JE]:"fire-iid",[ZE]:"fire-iid-compat",[eT]:"fire-fcm",[tT]:"fire-fcm-compat",[nT]:"fire-perf",[rT]:"fire-perf-compat",[iT]:"fire-rc",[sT]:"fire-rc-compat",[oT]:"fire-gcs",[aT]:"fire-gcs-compat",[lT]:"fire-fst",[cT]:"fire-fst-compat",[uT]:"fire-vertex","fire-js":"fire-js",[hT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,pT=new Map,Pd=new Map;function vg(r,e){try{r.container.addComponent(e)}catch(t){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function po(r){const e=r.name;if(Pd.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,r);for(const t of Qu.values())vg(t,r);for(const t of pT.values())vg(t,r);return!0}function Zd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Yn(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Xa("app","Firebase",mT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=dT;function Ky(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Cd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw di.create("bad-app-name",{appName:String(o)});if(t||(t=$y()),!t)throw di.create("no-options");const l=Qu.get(o);if(l){if(Gu(t,l.options)&&Gu(s,l.config))return l;throw di.create("duplicate-app",{appName:o})}const h=new TE(o);for(const p of Pd.values())h.addComponent(p);const f=new gT(t,s,h);return Qu.set(o,f),f}function Gy(r=Cd){const e=Qu.get(r);if(!e&&r===Cd&&$y())return Ky();if(!e)throw di.create("no-app",{appName:r});return e}function fi(r,e,t){var s;let o=(s=fT[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(f.join(" "));return}po(new ts(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firebase-heartbeat-database",vT=1,Ua="firebase-heartbeat-store";let dd=null;function Qy(){return dd||(dd=LE(yT,vT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ua)}catch(t){console.warn(t)}}}}).catch(r=>{throw di.create("idb-open",{originalErrorMessage:r.message})})),dd}async function _T(r){try{const t=(await Qy()).transaction(Ua),s=await t.objectStore(Ua).get(Yy(r));return await t.done,s}catch(e){if(e instanceof Dr)Pr.warn(e.message);else{const t=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pr.warn(t.message)}}}async function _g(r,e){try{const s=(await Qy()).transaction(Ua,"readwrite");await s.objectStore(Ua).put(e,Yy(r)),await s.done}catch(t){if(t instanceof Dr)Pr.warn(t.message);else{const s=di.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pr.warn(s.message)}}}function Yy(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=1024,ET=30*24*60*60*1e3;class TT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ST(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=wg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=ET}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wg(),{heartbeatsToSend:s,unsentEntries:o}=IT(this._heartbeatsCache.heartbeats),l=Ku(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Pr.warn(t),""}}}function wg(){return new Date().toISOString().substring(0,10)}function IT(r,e=wT){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Eg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Eg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class ST{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cE()?hE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _T(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return _g(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return _g(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Eg(r){return Ku(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(r){po(new ts("platform-logger",e=>new FE(e),"PRIVATE")),po(new ts("heartbeat",e=>new TT(e),"PRIVATE")),fi(Ad,yg,r),fi(Ad,yg,"esm2017"),fi("fire-js","")}RT("");var AT="firebase",CT="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(AT,CT,"app");function ef(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Xy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PT=Xy,Jy=new Xa("auth","Firebase",Xy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Xd("@firebase/auth");function kT(r,...e){Yu.logLevel<=Pe.WARN&&Yu.warn(`Auth (${Io}): ${r}`,...e)}function Ou(r,...e){Yu.logLevel<=Pe.ERROR&&Yu.error(`Auth (${Io}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(r,...e){throw tf(r,...e)}function Xn(r,...e){return tf(r,...e)}function Zy(r,e,t){const s=Object.assign(Object.assign({},PT()),{[e]:t});return new Xa("auth","Firebase",s).create(e,{appName:r.name})}function Ar(r){return Zy(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Jy.create(r,...e)}function ve(r,e,...t){if(!r)throw tf(e,...t)}function Ir(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ou(e),new Error(e)}function kr(r,e){r||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function xT(){return Tg()==="http:"||Tg()==="https:"}function Tg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xT()||oE()||"connection"in navigator)?navigator.onLine:!0}function DT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=rE()||aE()}get(){return NT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(r,e){kr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new Za(3e4,6e4);function Ti(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ii(r,e,t,s,o={}){return tv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=Ja(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return sE()||(y.referrerPolicy="no-referrer"),ev.fetch()(nv(r,r.config.apiHost,t,f),y)})}async function tv(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},VT),e);try{const o=new MT(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Au(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Au(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Au(r,"user-disabled",h);const w=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Zy(r,w,y);bn(r,w)}}catch(o){if(o instanceof Dr)throw o;bn(r,"network-request-failed",{message:String(o)})}}async function el(r,e,t,s,o={}){const l=await Ii(r,e,t,s,o);return"mfaPendingCredential"in l&&bn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function nv(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?nf(r.config,o):`${r.config.apiScheme}://${o}`}function LT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Xn(this.auth,"network-request-failed")),OT.get())})}}function Au(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Xn(r,e,s);return o.customData._tokenResponse=t,o}function Ig(r){return r!==void 0&&r.enterprise!==void 0}class bT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FT(r,e){return Ii(r,"GET","/v2/recaptchaConfig",Ti(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(r,e){return Ii(r,"POST","/v1/accounts:delete",e)}async function rv(r,e){return Ii(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jT(r,e=!1){const t=Wt(r),s=await t.getIdToken(e),o=rf(s);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Oa(fd(o.auth_time)),issuedAtTime:Oa(fd(o.iat)),expirationTime:Oa(fd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function fd(r){return Number(r)*1e3}function rf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const o=By(t);return o?JSON.parse(o):(Ou("Failed to decode base64 JWT payload"),null)}catch(o){return Ou("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sg(r){const e=rf(r);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Dr&&BT(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function BT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(r){var e;const t=r.auth,s=await r.getIdToken(),o=await ja(r,rv(t,{idToken:s}));ve(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?iv(l.providerUserInfo):[],f=qT(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),w=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new xd(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function $T(r){const e=Wt(r);await Xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qT(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function iv(r){return r.map(e=>{var{providerId:t}=e,s=ef(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(r,e){const t=await tv(r,{},async()=>{const s=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=nv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",ev.fetch()(h,{method:"POST",headers:f,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HT(r,e){return Ii(r,"POST","/v2/accounts:revokeToken",Ti(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=Sg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await WT(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new uo;return s&&(ve(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,e){ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=ef(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new xd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ja(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jT(this,e)}reload(){return $T(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Xu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await ja(this,UT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,f,p,y,w;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,R=(o=t.email)!==null&&o!==void 0?o:void 0,V=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,b=(h=t.photoURL)!==null&&h!==void 0?h:void 0,z=(f=t.tenantId)!==null&&f!==void 0?f:void 0,j=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(y=t.createdAt)!==null&&y!==void 0?y:void 0,X=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:re,emailVerified:de,isAnonymous:Se,providerData:Te,stsTokenManager:x}=t;ve(re&&x,e,"internal-error");const I=uo.fromJSON(this.name,x);ve(typeof re=="string",e,"internal-error"),si(T,e.name),si(R,e.name),ve(typeof de=="boolean",e,"internal-error"),ve(typeof Se=="boolean",e,"internal-error"),si(V,e.name),si(b,e.name),si(z,e.name),si(j,e.name),si(H,e.name),si(X,e.name);const A=new Sr({uid:re,auth:e,email:R,emailVerified:de,displayName:T,isAnonymous:Se,photoURL:b,phoneNumber:V,tenantId:z,stsTokenManager:I,createdAt:H,lastLoginAt:X});return Te&&Array.isArray(Te)&&(A.providerData=Te.map(k=>Object.assign({},k))),j&&(A._redirectEventId=j),A}static async _fromIdTokenResponse(e,t,s=!1){const o=new uo;o.updateFromServerResponse(t);const l=new Sr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Xu(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?iv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new uo;f.updateFromIdToken(s);const p=new Sr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new xd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new Map;function Rr(r){kr(r instanceof Function,"Expected a class definition");let e=Rg.get(r);return e?(kr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Rg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sv.type="NONE";const Ag=sv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(r,e,t){return`firebase:${r}:${e}:${t}`}class co{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Lu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Lu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Sr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new co(Rr(Ag),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Rr(Ag);const h=Lu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){const T=Sr._fromJSON(e,w);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new co(l,e,s):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new co(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ov(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hv(e))return"Blackberry";if(dv(e))return"Webos";if(av(e))return"Safari";if((e.includes("chrome/")||lv(e))&&!e.includes("edge/"))return"Chrome";if(cv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ov(r=jt()){return/firefox\//i.test(r)}function av(r=jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lv(r=jt()){return/crios\//i.test(r)}function uv(r=jt()){return/iemobile/i.test(r)}function cv(r=jt()){return/android/i.test(r)}function hv(r=jt()){return/blackberry/i.test(r)}function dv(r=jt()){return/webos/i.test(r)}function sf(r=jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KT(r=jt()){var e;return sf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GT(){return lE()&&document.documentMode===10}function fv(r=jt()){return sf(r)||cv(r)||dv(r)||hv(r)||/windows phone/i.test(r)||uv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(r,e=[]){let t;switch(r){case"Browser":t=Cg(jt());break;case"Worker":t=`${Cg(jt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(r,e={}){return Ii(r,"GET","/v2/passwordPolicy",Ti(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=6;class JT{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:XT,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pg(this),this.idTokenSubscription=new Pg(this),this.beforeStateQueue=new QT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rv(this,{idToken:e}),s=await Sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Ar(this));const t=e?Wt(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YT(this),t=new JT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await HT(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rr(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ss(r){return Wt(r)}class Pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=gE(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eI(r){hc=r}function mv(r){return hc.loadJS(r)}function tI(){return hc.recaptchaEnterpriseScript}function nI(){return hc.gapiScript}function rI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class iI{constructor(){this.enterprise=new sI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oI="recaptcha-enterprise",gv="NO_RECAPTCHA";class aI{constructor(e){this.type=oI,this.auth=ss(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{FT(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new bT(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;Ig(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(gv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iI().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&Ig(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=tI();p.length!==0&&(p+=f),mv(p).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function kg(r,e,t,s=!1,o=!1){const l=new aI(r);let h;if(o)h=gv;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Nd(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await kg(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await kg(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(r,e){const t=Zd(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Gu(l,e??{}))return o;bn(o,"already-initialized")}return t.initialize({options:e})}function uI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Rr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function cI(r,e,t){const s=ss(r);ve(s._canInitEmulator,s,"emulator-config-failed"),ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=yv(e),{host:h,port:f}=hI(e),p=f===null?"":`:${f}`;s.config.emulator={url:`${l}//${h}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),dI()}function yv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function hI(r){const e=yv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:xg(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:xg(h)}}}function xg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function dI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,t){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function fI(r,e){return Ii(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(r,e){return el(r,"POST","/v1/accounts:signInWithPassword",Ti(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,e){return el(r,"POST","/v1/accounts:signInWithEmailLink",Ti(r,e))}async function gI(r,e){return el(r,"POST","/v1/accounts:signInWithEmailLink",Ti(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends of{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ba(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ba(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nd(e,t,"signInWithPassword",pI);case"emailLink":return mI(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nd(e,s,"signUpPassword",fI);case"emailLink":return gI(e,{idToken:t,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(r,e){return el(r,"POST","/v1/accounts:signInWithIdp",Ti(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="http://localhost";class ns extends of{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=ef(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ns(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ho(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ho(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ho(e,t)}buildRequest(){const e={requestUri:yI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ja(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _I(r){const e=ka(xa(r)).link,t=e?ka(xa(e)).deep_link_id:null,s=ka(xa(r)).deep_link_id;return(s?ka(xa(s)).link:null)||s||t||e||r}class af{constructor(e){var t,s,o,l,h,f;const p=ka(xa(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,w=(s=p.oobCode)!==null&&s!==void 0?s:null,T=vI((o=p.mode)!==null&&o!==void 0?o:null);ve(y&&w&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=w,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=_I(e);try{return new af(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,t){return Ba._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=af.parseLink(t);return ve(s,"argument-error"),Ba._fromEmailAndCode(e,s.code,s.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends vv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends tl{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ns._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ai.credential(t,s)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends tl{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.GITHUB_SIGN_IN_METHOD="github.com";li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends tl{constructor(){super("twitter.com")}static credential(e,t){return ns._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ui.credential(t,s)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(r,e){return el(r,"POST","/v1/accounts:signUp",Ti(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Sr._fromIdTokenResponse(e,s,o),h=Ng(s);return new rs({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ng(s);return new rs({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ng(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Dr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Ju(e,t,s,o)}}function _v(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ju._fromErrorAndOperation(r,l,e,s):l})}async function EI(r,e,t=!1){const s=await ja(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return rs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(r,e,t=!1){const{auth:s}=r;if(Yn(s.app))return Promise.reject(Ar(s));const o="reauthenticate";try{const l=await ja(r,_v(s,o,e,r),t);ve(l.idToken,s,"internal-error");const h=rf(l.idToken);ve(h,s,"internal-error");const{sub:f}=h;return ve(r.uid===f,s,"user-mismatch"),rs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&bn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv(r,e,t=!1){if(Yn(r.app))return Promise.reject(Ar(r));const s="signIn",o=await _v(r,s,e),l=await rs._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function II(r,e){return wv(ss(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ev(r){const e=ss(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SI(r,e,t){if(Yn(r.app))return Promise.reject(Ar(r));const s=ss(r),h=await Nd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wI).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Ev(r),p}),f=await rs._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function RI(r,e,t){return Yn(r.app)?Promise.reject(Ar(r)):II(Wt(r),So.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Ev(r),s})}function AI(r,e,t,s){return Wt(r).onIdTokenChanged(e,t,s)}function CI(r,e,t){return Wt(r).beforeAuthStateChanged(e,t)}function PI(r,e,t,s){return Wt(r).onAuthStateChanged(e,t,s)}function kI(r){return Wt(r).signOut()}const Zu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zu,"1"),this.storage.removeItem(Zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=1e3,NI=10;class Iv extends Tv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);GT()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,NI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},xI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iv.type="LOCAL";const DI=Iv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv extends Tv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sv.type="SESSION";const Rv=Sv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new dc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await VI(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=lf("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const R=T;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(R.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function LI(r){Jn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function MI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function FI(){return Av()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="firebaseLocalStorageDb",UI=1,ec="firebaseLocalStorage",Pv="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fc(r,e){return r.transaction([ec],e?"readwrite":"readonly").objectStore(ec)}function jI(){const r=indexedDB.deleteDatabase(Cv);return new nl(r).toPromise()}function Dd(){const r=indexedDB.open(Cv,UI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ec,{keyPath:Pv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ec)?e(s):(s.close(),await jI(),e(await Dd()))})})}async function Dg(r,e,t){const s=fc(r,!0).put({[Pv]:e,value:t});return new nl(s).toPromise()}async function BI(r,e){const t=fc(r,!1).get(e),s=await new nl(t).toPromise();return s===void 0?null:s.value}function Vg(r,e){const t=fc(r,!0).delete(e);return new nl(t).toPromise()}const zI=800,$I=3;class kv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>$I)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Av()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dc._getInstance(FI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await MI(),!this.activeServiceWorker)return;this.sender=new OI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dd();return await Dg(e,Zu,"1"),await Vg(e,Zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Dg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>BI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=fc(o,!1).getAll();return new nl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kv.type="LOCAL";const qI=kv;new Za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r,e){return e?Rr(e):(ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends of{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function HI(r){return wv(r.auth,new uf(r),r.bypassAuthState)}function KI(r){const{auth:e,user:t}=r;return ve(t,e,"internal-error"),TI(t,new uf(r),r.bypassAuthState)}async function GI(r){const{auth:e,user:t}=r;return ve(t,e,"internal-error"),EI(t,new uf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HI;case"linkViaPopup":case"linkViaRedirect":return GI;case"reauthViaPopup":case"reauthViaRedirect":return KI;default:bn(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Za(2e3,1e4);class lo extends xv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=lf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QI.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="pendingRedirect",Mu=new Map;class XI extends xv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const s=await JI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JI(r,e){const t=t1(e),s=e1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function ZI(r,e){Mu.set(r._key(),e)}function e1(r){return Rr(r._redirectPersistence)}function t1(r){return Lu(YI,r.config.apiKey,r.name)}async function n1(r,e,t=!1){if(Yn(r.app))return Promise.reject(Ar(r));const s=ss(r),o=WI(s,e),h=await new XI(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=10*60*1e3;class i1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Nv(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Xn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Og(e))}saveEventToCache(e){this.cachedEventUids.add(Og(e)),this.lastProcessedEventTime=Date.now()}}function Og(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Nv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(r,e={}){return Ii(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l1=/^https?/;async function u1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await o1(r);for(const t of e)try{if(c1(t))return}catch{}bn(r,"unauthorized-domain")}function c1(r){const e=kd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!l1.test(t))return!1;if(a1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new Za(3e4,6e4);function Lg(){const r=Jn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function d1(r){return new Promise((e,t)=>{var s,o,l;function h(){Lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lg(),t(Xn(r,"network-request-failed"))},timeout:h1.get()})}if(!((o=(s=Jn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Jn().gapi)===null||l===void 0)&&l.load)h();else{const f=rI("iframefcb");return Jn()[f]=()=>{gapi.load?h():t(Xn(r,"network-request-failed"))},mv(`${nI()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw bu=null,e})}let bu=null;function f1(r){return bu=bu||d1(r),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Za(5e3,15e3),m1="__/auth/iframe",g1="emulator/auth/iframe",y1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _1(r){const e=r.config;ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?nf(e,g1):`https://${r.config.authDomain}/${m1}`,s={apiKey:e.apiKey,appName:r.name,v:Io},o=v1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Ja(s).slice(1)}`}async function w1(r){const e=await f1(r),t=Jn().gapi;return ve(t,r,"internal-error"),e.open({where:document.body,url:_1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Xn(r,"network-request-failed"),f=Jn().setTimeout(()=>{l(h)},p1.get());function p(){Jn().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T1=500,I1=600,S1="_blank",R1="http://localhost";class Mg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A1(r,e,t,s=T1,o=I1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},E1),{width:s.toString(),height:o.toString(),top:l,left:h}),y=jt().toLowerCase();t&&(f=lv(y)?S1:t),ov(y)&&(e=e||R1,p.scrollbars="yes");const w=Object.entries(p).reduce((R,[V,b])=>`${R}${V}=${b},`,"");if(KT(y)&&f!=="_self")return C1(e||"",f),new Mg(null);const T=window.open(e||"",f,w);ve(T,r,"popup-blocked");try{T.focus()}catch{}return new Mg(T)}function C1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="__/auth/handler",k1="emulator/auth/handler",x1=encodeURIComponent("fac");async function bg(r,e,t,s,o,l){ve(r.config.authDomain,r,"auth-domain-config-required"),ve(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Io,eventId:o};if(e instanceof vv){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",mE(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof tl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const p=await r._getAppCheckToken(),y=p?`#${x1}=${encodeURIComponent(p)}`:"";return`${N1(r)}?${Ja(f).slice(1)}${y}`}function N1({config:r}){return r.emulator?nf(r,k1):`https://${r.authDomain}/${P1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="webStorageSupport";class D1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rv,this._completeRedirectFn=n1,this._overrideRedirectResult=ZI}async _openPopup(e,t,s,o){var l;kr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await bg(e,t,s,kd(),o);return A1(e,h,lf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await bg(e,t,s,kd(),o);return LI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(kr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await w1(e),s=new i1(e);return t.register("authEvent",o=>(ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pd,{type:pd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[pd];h!==void 0&&t(!!h),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=u1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fv()||av()||sf()}}const V1=D1;var Fg="@firebase/auth",Ug="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M1(r){po(new ts("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;ve(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pv(r)},y=new ZT(s,o,l,p);return uI(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),po(new ts("auth-internal",e=>{const t=ss(e.getProvider("auth").getImmediate());return(s=>new O1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(Fg,Ug,L1(r)),fi(Fg,Ug,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=5*60,F1=qy("authIdTokenMaxAge")||b1;let jg=null;const U1=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>F1)return;const o=t==null?void 0:t.token;jg!==o&&(jg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function j1(r=Gy()){const e=Zd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=lI(r,{popupRedirectResolver:V1,persistence:[qI,DI,Rv]}),s=qy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=U1(l.toString());CI(t,h,()=>h(t.currentUser)),AI(t,f=>h(f))}}const o=zy("auth");return o&&cI(t,`http://${o}`),t}function B1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}eI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Xn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",B1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M1("Browser");var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,Dv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function A(){}A.prototype=I.prototype,x.D=I.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(k,D,L){for(var C=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)C[nt-2]=arguments[nt];return I.prototype[D].apply(k,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)k[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;16>D;++D)k[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=x.g[0],A=x.g[1],D=x.g[2];var L=x.g[3],C=I+(L^A&(D^L))+k[0]+3614090360&4294967295;I=A+(C<<7&4294967295|C>>>25),C=L+(D^I&(A^D))+k[1]+3905402710&4294967295,L=I+(C<<12&4294967295|C>>>20),C=D+(A^L&(I^A))+k[2]+606105819&4294967295,D=L+(C<<17&4294967295|C>>>15),C=A+(I^D&(L^I))+k[3]+3250441966&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(L^A&(D^L))+k[4]+4118548399&4294967295,I=A+(C<<7&4294967295|C>>>25),C=L+(D^I&(A^D))+k[5]+1200080426&4294967295,L=I+(C<<12&4294967295|C>>>20),C=D+(A^L&(I^A))+k[6]+2821735955&4294967295,D=L+(C<<17&4294967295|C>>>15),C=A+(I^D&(L^I))+k[7]+4249261313&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(L^A&(D^L))+k[8]+1770035416&4294967295,I=A+(C<<7&4294967295|C>>>25),C=L+(D^I&(A^D))+k[9]+2336552879&4294967295,L=I+(C<<12&4294967295|C>>>20),C=D+(A^L&(I^A))+k[10]+4294925233&4294967295,D=L+(C<<17&4294967295|C>>>15),C=A+(I^D&(L^I))+k[11]+2304563134&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(L^A&(D^L))+k[12]+1804603682&4294967295,I=A+(C<<7&4294967295|C>>>25),C=L+(D^I&(A^D))+k[13]+4254626195&4294967295,L=I+(C<<12&4294967295|C>>>20),C=D+(A^L&(I^A))+k[14]+2792965006&4294967295,D=L+(C<<17&4294967295|C>>>15),C=A+(I^D&(L^I))+k[15]+1236535329&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(D^L&(A^D))+k[1]+4129170786&4294967295,I=A+(C<<5&4294967295|C>>>27),C=L+(A^D&(I^A))+k[6]+3225465664&4294967295,L=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(L^I))+k[11]+643717713&4294967295,D=L+(C<<14&4294967295|C>>>18),C=A+(L^I&(D^L))+k[0]+3921069994&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(D^L&(A^D))+k[5]+3593408605&4294967295,I=A+(C<<5&4294967295|C>>>27),C=L+(A^D&(I^A))+k[10]+38016083&4294967295,L=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(L^I))+k[15]+3634488961&4294967295,D=L+(C<<14&4294967295|C>>>18),C=A+(L^I&(D^L))+k[4]+3889429448&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(D^L&(A^D))+k[9]+568446438&4294967295,I=A+(C<<5&4294967295|C>>>27),C=L+(A^D&(I^A))+k[14]+3275163606&4294967295,L=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(L^I))+k[3]+4107603335&4294967295,D=L+(C<<14&4294967295|C>>>18),C=A+(L^I&(D^L))+k[8]+1163531501&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(D^L&(A^D))+k[13]+2850285829&4294967295,I=A+(C<<5&4294967295|C>>>27),C=L+(A^D&(I^A))+k[2]+4243563512&4294967295,L=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(L^I))+k[7]+1735328473&4294967295,D=L+(C<<14&4294967295|C>>>18),C=A+(L^I&(D^L))+k[12]+2368359562&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(A^D^L)+k[5]+4294588738&4294967295,I=A+(C<<4&4294967295|C>>>28),C=L+(I^A^D)+k[8]+2272392833&4294967295,L=I+(C<<11&4294967295|C>>>21),C=D+(L^I^A)+k[11]+1839030562&4294967295,D=L+(C<<16&4294967295|C>>>16),C=A+(D^L^I)+k[14]+4259657740&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(A^D^L)+k[1]+2763975236&4294967295,I=A+(C<<4&4294967295|C>>>28),C=L+(I^A^D)+k[4]+1272893353&4294967295,L=I+(C<<11&4294967295|C>>>21),C=D+(L^I^A)+k[7]+4139469664&4294967295,D=L+(C<<16&4294967295|C>>>16),C=A+(D^L^I)+k[10]+3200236656&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(A^D^L)+k[13]+681279174&4294967295,I=A+(C<<4&4294967295|C>>>28),C=L+(I^A^D)+k[0]+3936430074&4294967295,L=I+(C<<11&4294967295|C>>>21),C=D+(L^I^A)+k[3]+3572445317&4294967295,D=L+(C<<16&4294967295|C>>>16),C=A+(D^L^I)+k[6]+76029189&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(A^D^L)+k[9]+3654602809&4294967295,I=A+(C<<4&4294967295|C>>>28),C=L+(I^A^D)+k[12]+3873151461&4294967295,L=I+(C<<11&4294967295|C>>>21),C=D+(L^I^A)+k[15]+530742520&4294967295,D=L+(C<<16&4294967295|C>>>16),C=A+(D^L^I)+k[2]+3299628645&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(D^(A|~L))+k[0]+4096336452&4294967295,I=A+(C<<6&4294967295|C>>>26),C=L+(A^(I|~D))+k[7]+1126891415&4294967295,L=I+(C<<10&4294967295|C>>>22),C=D+(I^(L|~A))+k[14]+2878612391&4294967295,D=L+(C<<15&4294967295|C>>>17),C=A+(L^(D|~I))+k[5]+4237533241&4294967295,A=D+(C<<21&4294967295|C>>>11),C=I+(D^(A|~L))+k[12]+1700485571&4294967295,I=A+(C<<6&4294967295|C>>>26),C=L+(A^(I|~D))+k[3]+2399980690&4294967295,L=I+(C<<10&4294967295|C>>>22),C=D+(I^(L|~A))+k[10]+4293915773&4294967295,D=L+(C<<15&4294967295|C>>>17),C=A+(L^(D|~I))+k[1]+2240044497&4294967295,A=D+(C<<21&4294967295|C>>>11),C=I+(D^(A|~L))+k[8]+1873313359&4294967295,I=A+(C<<6&4294967295|C>>>26),C=L+(A^(I|~D))+k[15]+4264355552&4294967295,L=I+(C<<10&4294967295|C>>>22),C=D+(I^(L|~A))+k[6]+2734768916&4294967295,D=L+(C<<15&4294967295|C>>>17),C=A+(L^(D|~I))+k[13]+1309151649&4294967295,A=D+(C<<21&4294967295|C>>>11),C=I+(D^(A|~L))+k[4]+4149444226&4294967295,I=A+(C<<6&4294967295|C>>>26),C=L+(A^(I|~D))+k[11]+3174756917&4294967295,L=I+(C<<10&4294967295|C>>>22),C=D+(I^(L|~A))+k[2]+718787259&4294967295,D=L+(C<<15&4294967295|C>>>17),C=A+(L^(D|~I))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var A=I-this.blockSize,k=this.B,D=this.h,L=0;L<I;){if(D==0)for(;L<=A;)o(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<I;)if(k[D++]=x.charCodeAt(L++),D==this.blockSize){o(this,k),D=0;break}}else for(;L<I;)if(k[D++]=x[L++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=I},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var A=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=A&255,A/=256;for(this.u(x),x=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)x[A++]=this.g[I]>>>k&255;return x};function l(x,I){var A=f;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=I(x)}function h(x,I){this.h=I;for(var A=[],k=!0,D=x.length-1;0<=D;D--){var L=x[D]|0;k&&L==I||(A[D]=L,k=!1)}this.g=A}var f={};function p(x){return-128<=x&&128>x?l(x,function(I){return new h([I|0],0>I?-1:0)}):new h([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return j(y(-x));for(var I=[],A=1,k=0;x>=A;k++)I[k]=x/A|0,A*=4294967296;return new h(I,0)}function w(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return j(w(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(I,8)),k=T,D=0;D<x.length;D+=8){var L=Math.min(8,x.length-D),C=parseInt(x.substring(D,D+L),I);8>L?(L=y(Math.pow(I,L)),k=k.j(L).add(y(C))):(k=k.j(A),k=k.add(y(C)))}return k}var T=p(0),R=p(1),V=p(16777216);r=h.prototype,r.m=function(){if(z(this))return-j(this).m();for(var x=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);x+=(0<=k?k:4294967296+k)*I,I*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(z(this))return"-"+j(this).toString(x);for(var I=y(Math.pow(x,6)),A=this,k="";;){var D=de(A,I).g;A=H(A,D.j(I));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=D,b(A))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function z(x){return x.h==-1}r.l=function(x){return x=H(this,x),z(x)?-1:b(x)?0:1};function j(x){for(var I=x.g.length,A=[],k=0;k<I;k++)A[k]=~x.g[k];return new h(A,~x.h).add(R)}r.abs=function(){return z(this)?j(this):this},r.add=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],k=0,D=0;D<=I;D++){var L=k+(this.i(D)&65535)+(x.i(D)&65535),C=(L>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);k=C>>>16,L&=65535,C&=65535,A[D]=C<<16|L}return new h(A,A[A.length-1]&-2147483648?-1:0)};function H(x,I){return x.add(j(I))}r.j=function(x){if(b(this)||b(x))return T;if(z(this))return z(x)?j(this).j(j(x)):j(j(this).j(x));if(z(x))return j(this.j(j(x)));if(0>this.l(V)&&0>x.l(V))return y(this.m()*x.m());for(var I=this.g.length+x.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<x.g.length;D++){var L=this.i(k)>>>16,C=this.i(k)&65535,nt=x.i(D)>>>16,Nt=x.i(D)&65535;A[2*k+2*D]+=C*Nt,X(A,2*k+2*D),A[2*k+2*D+1]+=L*Nt,X(A,2*k+2*D+1),A[2*k+2*D+1]+=C*nt,X(A,2*k+2*D+1),A[2*k+2*D+2]+=L*nt,X(A,2*k+2*D+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new h(A,0)};function X(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function re(x,I){this.g=x,this.h=I}function de(x,I){if(b(I))throw Error("division by zero");if(b(x))return new re(T,T);if(z(x))return I=de(j(x),I),new re(j(I.g),j(I.h));if(z(I))return I=de(x,j(I)),new re(j(I.g),I.h);if(30<x.g.length){if(z(x)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var A=R,k=I;0>=k.l(x);)A=Se(A),k=Se(k);var D=Te(A,1),L=Te(k,1);for(k=Te(k,2),A=Te(A,2);!b(k);){var C=L.add(k);0>=C.l(x)&&(D=D.add(A),L=C),k=Te(k,1),A=Te(A,1)}return I=H(x,D.j(I)),new re(D,I)}for(D=T;0<=x.l(I);){for(A=Math.max(1,Math.floor(x.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=y(A),C=L.j(I);z(C)||0<C.l(x);)A-=k,L=y(A),C=L.j(I);b(L)&&(L=R),D=D.add(L),x=H(x,C)}return new re(D,x)}r.A=function(x){return de(this,x).h},r.and=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&x.i(k);return new h(A,this.h&x.h)},r.or=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|x.i(k);return new h(A,this.h|x.h)},r.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^x.i(k);return new h(A,this.h^x.h)};function Se(x){for(var I=x.g.length+1,A=[],k=0;k<I;k++)A[k]=x.i(k)<<1|x.i(k-1)>>>31;return new h(A,x.h)}function Te(x,I){var A=I>>5;I%=32;for(var k=x.g.length-A,D=[],L=0;L<k;L++)D[L]=0<I?x.i(L+A)>>>I|x.i(L+A+1)<<32-I:x.i(L+A);return new h(D,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Dv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,es=h}).apply(typeof Bg<"u"?Bg:typeof self<"u"?self:typeof window<"u"?window:{});var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vv,Na,Ov,Fu,Vd,Lv,Mv,bv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cu=="object"&&Cu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var v=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in v))break e;v=v[M]}u=u[u.length-1],E=v[u],m=m(E),m!=E&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,E=!1,M={next:function(){if(!E&&v<u.length){var $=v++;return{value:m($,u[$]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function w(u,m,v){return u.call.apply(u.bind,arguments)}function T(u,m,v){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function R(u,m,v){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,R.apply(null,arguments)}function V(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var E=v.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function b(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(E,M,$){for(var ee=Array(arguments.length-2),je=2;je<arguments.length;je++)ee[je-2]=arguments[je];return m.prototype[M].apply(E,ee)}}function z(u){const m=u.length;if(0<m){const v=Array(m);for(let E=0;E<m;E++)v[E]=u[E];return v}return[]}function j(u,m){for(let v=1;v<arguments.length;v++){const E=arguments[v];if(p(E)){const M=u.length||0,$=E.length||0;u.length=M+$;for(let ee=0;ee<$;ee++)u[M+ee]=E[ee]}else u.push(E)}}class H{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var Se=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Te(u,m,v){for(const E in u)m.call(v,u[E],E,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function I(u){const m={};for(const v in u)m[v]=u[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let v,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(v in E)u[v]=E[v];for(let $=0;$<A.length;$++)v=A[$],Object.prototype.hasOwnProperty.call(E,v)&&(u[v]=E[v])}}function D(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function L(u){f.setTimeout(()=>{throw u},0)}function C(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class nt{constructor(){this.h=this.g=null}add(m,v){const E=Nt.get();E.set(m,v),this.h?this.h.next=E:this.g=E,this.h=E}}var Nt=new H(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,te=!1,me=new nt,se=()=>{const u=f.Promise.resolve(void 0);Be=()=>{u.then(O)}};var O=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){L(v)}var m=Nt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}te=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u}();function Ae(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Se){e:{try{de(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ae.aa.h.call(this)}}b(Ae,fe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function $e(u,m,v,E,M){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!E,this.ha=M,this.key=++Fe,this.da=this.fa=!1}function yt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sr(u){this.src=u,this.g={},this.h=0}sr.prototype.add=function(u,m,v,E,M){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ee=Or(u,m,E,M);return-1<ee?(m=u[ee],v||(m.fa=!1)):(m=new $e(m,this.src,$,!!E,M),m.fa=v,u.push(m)),m};function ds(u,m){var v=m.type;if(v in u.g){var E=u.g[v],M=Array.prototype.indexOf.call(E,m,void 0),$;($=0<=M)&&Array.prototype.splice.call(E,M,1),$&&(yt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Or(u,m,v,E){for(var M=0;M<u.length;++M){var $=u[M];if(!$.da&&$.listener==m&&$.capture==!!v&&$.ha==E)return M}return-1}var Si="closure_lm_"+(1e6*Math.random()|0),fs={};function Do(u,m,v,E,M){if(Array.isArray(m)){for(var $=0;$<m.length;$++)Do(u,m[$],v,E,M);return null}return v=Lo(v),u&&u[be]?u.K(m,v,y(E)?!!E.capture:!!E,M):Vo(u,m,v,!1,E,M)}function Vo(u,m,v,E,M,$){if(!m)throw Error("Invalid event type");var ee=y(M)?!!M.capture:!!M,je=ms(u);if(je||(u[Si]=je=new sr(u)),v=je.add(m,v,E,ee,$),v.proxy)return v;if(E=cl(),v.proxy=E,E.src=u,E.listener=v,u.addEventListener)Re||(M=ee),M===void 0&&(M=!1),u.addEventListener(m.toString(),E,M);else if(u.attachEvent)u.attachEvent(ar(m.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return v}function cl(){function u(v){return m.call(u.src,u.listener,v)}const m=Oo;return u}function ps(u,m,v,E,M){if(Array.isArray(m))for(var $=0;$<m.length;$++)ps(u,m[$],v,E,M);else E=y(E)?!!E.capture:!!E,v=Lo(v),u&&u[be]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],v=Or($,v,E,M),-1<v&&(yt($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=ms(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Or(m,v,E,M)),(v=-1<u?m[u]:null)&&or(v))}function or(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[be])ds(m.i,u);else{var v=u.type,E=u.proxy;m.removeEventListener?m.removeEventListener(v,E,u.capture):m.detachEvent?m.detachEvent(ar(v),E):m.addListener&&m.removeListener&&m.removeListener(E),(v=ms(m))?(ds(v,u),v.h==0&&(v.src=null,m[Si]=null)):yt(u)}}}function ar(u){return u in fs?fs[u]:fs[u]="on"+u}function Oo(u,m){if(u.da)u=!0;else{m=new Ae(m,this);var v=u.listener,E=u.ha||u.src;u.fa&&or(u),u=v.call(E,m)}return u}function ms(u){return u=u[Si],u instanceof sr?u:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(u){return typeof u=="function"?u:(u[gs]||(u[gs]=function(m){return u.handleEvent(m)}),u[gs])}function ct(){K.call(this),this.i=new sr(this),this.M=this,this.F=null}b(ct,K),ct.prototype[be]=!0,ct.prototype.removeEventListener=function(u,m,v,E){ps(this,u,m,v,E)};function ht(u,m){var v,E=u.F;if(E)for(v=[];E;E=E.F)v.push(E);if(u=u.M,E=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var M=m;m=new fe(E,u),k(m,M)}if(M=!0,v)for(var $=v.length-1;0<=$;$--){var ee=m.g=v[$];M=lr(ee,E,!0,m)&&M}if(ee=m.g=u,M=lr(ee,E,!0,m)&&M,M=lr(ee,E,!1,m)&&M,v)for($=0;$<v.length;$++)ee=m.g=v[$],M=lr(ee,E,!1,m)&&M}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],E=0;E<v.length;E++)yt(v[E]);delete u.g[m],u.h--}}this.F=null},ct.prototype.K=function(u,m,v,E){return this.i.add(String(u),m,!1,v,E)},ct.prototype.L=function(u,m,v,E){return this.i.add(String(u),m,!0,v,E)};function lr(u,m,v,E){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,$=0;$<m.length;++$){var ee=m[$];if(ee&&!ee.da&&ee.capture==v){var je=ee.listener,dt=ee.ha||ee.src;ee.fa&&ds(u.i,ee),M=je.call(dt,E)!==!1&&M}}return M&&!E.defaultPrevented}function Mo(u,m,v){if(typeof u=="function")v&&(u=R(u,v));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function Lr(u){u.g=Mo(()=>{u.g=null,u.i&&(u.i=!1,Lr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ri extends K{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Lr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(u){K.call(this),this.h=u,this.g={}}b(Ai,K);var bo=[];function Fo(u){Te(u.g,function(m,v){this.g.hasOwnProperty(v)&&or(m)},u),u.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),Fo(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uo=f.JSON.stringify,jo=f.JSON.parse,Bo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ci(){}Ci.prototype.h=null;function ys(u){return u.h||(u.h=u.i())}function vs(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){fe.call(this,"d")}b(Un,fe);function _s(){fe.call(this,"c")}b(_s,fe);var jn={},zo=null;function Pi(){return zo=zo||new ct}jn.La="serverreachability";function $o(u){fe.call(this,jn.La,u)}b($o,fe);function ur(u){const m=Pi();ht(m,new $o(m))}jn.STAT_EVENT="statevent";function qo(u,m){fe.call(this,jn.STAT_EVENT,u),this.stat=m}b(qo,fe);function rt(u){const m=Pi();ht(m,new qo(m,u))}jn.Ma="timingevent";function ws(u,m){fe.call(this,jn.Ma,u),this.size=m}b(ws,fe);function En(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function ki(){this.g=!0}ki.prototype.xa=function(){this.g=!1};function xi(u,m,v,E,M,$){u.info(function(){if(u.g)if($)for(var ee="",je=$.split("&"),dt=0;dt<je.length;dt++){var Ve=je[dt].split("=");if(1<Ve.length){var vt=Ve[0];Ve=Ve[1];var ot=vt.split("_");ee=2<=ot.length&&ot[1]=="type"?ee+(vt+"="+Ve+"&"):ee+(vt+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+m+`
`+v+`
`+ee})}function Es(u,m,v,E,M,$,ee){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+m+`
`+v+`
`+$+" "+ee})}function Tn(u,m,v,E){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Nc(u,v)+(E?" "+E:"")})}function Wo(u,m){u.info(function(){return"TIMEOUT: "+m})}ki.prototype.info=function(){};function Nc(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var E=v[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var $=M[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<M.length;ee++)M[ee]=""}}}}return Uo(v)}catch{return m}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function Ni(){}b(Ni,Ci),Ni.prototype.g=function(){return new XMLHttpRequest},Ni.prototype.i=function(){return{}},In=new Ni;function Sn(u,m,v,E){this.j=u,this.i=m,this.l=v,this.R=E||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dl}function dl(){this.i=null,this.g="",this.h=!1}var Ho={},Is={};function Ss(u,m,v){u.L=1,u.v=jr(nn(m)),u.m=v,u.P=!0,Ko(u,null)}function Ko(u,m){u.F=Date.now(),qe(u),u.A=nn(u.v);var v=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),zr(v.i,"t",E),u.C=0,v=u.j.J,u.h=new dl,u.g=xl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Ri(R(u.Y,u,u.g),u.O)),m=u.U,v=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(bo[0]=M.toString()),M=bo);for(var $=0;$<M.length;$++){var ee=Do(v,M[$],E||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ur(),xi(u.i,u.u,u.A,u.l,u.R,u.m)}Sn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Kt(u)==3?m.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const ot=Kt(this.g);var m=this.g.Ba();const fn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Zo(this.g)))){this.J||ot!=4||m==7||(m==8||0>=fn?ur(3):ur(2)),Di(this);var v=this.g.Z();this.X=v;t:if(fl(this)){var E=Zo(this.g);u="";var M=E.length,$=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Mr(this);var ee="";break t}this.h.i=new f.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(E[m],{stream:!($&&m==M-1)});E.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,Es(this.i,this.u,this.A,this.l,this.R,ot,v),this.o){if(this.T&&!this.K){t:{if(this.g){var je,dt=this.g;if((je=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(je)){var Ve=je;break t}}Ve=null}if(v=Ve)Tn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,v);else{this.o=!1,this.s=3,rt(12),hn(this),Mr(this);break e}}if(this.P){v=!0;let sn;for(;!this.J&&this.C<ee.length;)if(sn=Dc(this,ee),sn==Is){ot==4&&(this.s=4,rt(14),v=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Ho){this.s=4,rt(15),Tn(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else Tn(this.i,this.l,sn,null),Go(this,sn);if(fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||ee.length!=0||this.h.h||(this.s=1,rt(16),v=!1),this.o=this.o&&v,!v)Tn(this.i,this.l,ee,"[Invalid Chunked Response]"),hn(this),Mr(this);else if(0<ee.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),ta(vt),vt.M=!0,rt(11))}}else Tn(this.i,this.l,ee,null),Go(this,ee);ot==4&&hn(this),this.o&&!this.J&&(ot==4?Ls(this.j,this):(this.o=!1,qe(this)))}else xs(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),hn(this),Mr(this)}}}catch{}finally{}};function fl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Dc(u,m){var v=u.C,E=m.indexOf(`
`,v);return E==-1?Is:(v=Number(m.substring(v,E)),isNaN(v)?Ho:(E+=1,E+v>m.length?Is:(m=m.slice(E,E+v),u.C=E+v,m)))}Sn.prototype.cancel=function(){this.J=!0,hn(this)};function qe(u){u.S=Date.now()+u.I,pl(u,u.I)}function pl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=En(R(u.ba,u),m)}function Di(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Wo(this.i,this.A),this.L!=2&&(ur(),rt(17)),hn(this),this.s=2,Mr(this)):pl(this,this.S-u)};function Mr(u){u.j.G==0||u.J||Ls(u.j,u)}function hn(u){Di(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Fo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Go(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Bt(v.h,u))){if(!u.K&&Bt(v.h,u)&&v.G==3){try{var E=v.Da.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Os(v),kn(v);else break e;Vs(v),rt(18)}}else v.za=M[1],0<v.za-v.T&&37500>M[2]&&v.F&&v.v==0&&!v.C&&(v.C=En(R(v.Za,v),6e3));if(1>=gl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else pr(v,11)}else if((u.K||v.g==u)&&Os(v),!X(m))for(M=v.Da.g.parse(m),m=0;m<M.length;m++){let Ve=M[m];if(v.T=Ve[0],Ve=Ve[1],v.G==2)if(Ve[0]=="c"){v.K=Ve[1],v.ia=Ve[2];const vt=Ve[3];vt!=null&&(v.la=vt,v.j.info("VER="+v.la));const ot=Ve[4];ot!=null&&(v.Aa=ot,v.j.info("SVER="+v.Aa));const fn=Ve[5];fn!=null&&typeof fn=="number"&&0<fn&&(E=1.5*fn,v.L=E,v.j.info("backChannelRequestTimeoutMs_="+E)),E=v;const sn=u.g;if(sn){const Ui=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ui){var $=E.h;$.g||Ui.indexOf("spdy")==-1&&Ui.indexOf("quic")==-1&&Ui.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Qo($,$.h),$.h=null))}if(E.D){const bs=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;bs&&(E.ya=bs,ze(E.I,E.D,bs))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),E=v;var ee=u;if(E.qa=kl(E,E.J?E.ia:null,E.W),ee.K){yl(E.h,ee);var je=ee,dt=E.L;dt&&(je.I=dt),je.B&&(Di(je),qe(je)),E.g=ee}else Fi(E);0<v.i.length&&qn(v)}else Ve[0]!="stop"&&Ve[0]!="close"||pr(v,7);else v.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?pr(v,7):St(v):Ve[0]!="noop"&&v.l&&v.l.ta(Ve),v.v=0)}}ur(4)}catch{}}var ml=class{constructor(u,m){this.g=u,this.map=m}};function Vi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gl(u){return u.h?1:u.g?u.g.size:0}function Bt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Qo(u,m){u.g?u.g.add(m):u.h=m}function yl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Vi.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return z(u.i)}function Rs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,E=0;E<v;E++)m.push(u[E]);return m}m=[],v=0;for(E in u)m[v++]=u[E];return m}function As(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const E in u)m[v++]=E;return m}}}function br(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=As(u),E=Rs(u),M=E.length,$=0;$<M;$++)m.call(void 0,E[$],v&&v[$],u)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vc(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var E=u[v].indexOf("="),M=null;if(0<=E){var $=u[v].substring(0,E);M=u[v].substring(E+1)}else $=u[v];m($,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function cr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof cr){this.h=u.h,Li(this,u.j),this.o=u.o,this.g=u.g,Fr(this,u.s),this.l=u.l;var m=u.i,v=new Bn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Ur(this,v),this.m=u.m}else u&&(m=String(u).match(Oi))?(this.h=!1,Li(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),Fr(this,m[4]),this.l=xe(m[5]||"",!0),Ur(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Bn(null,this.h))}cr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Br(m,Cs,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Br(m,Cs,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Br(v,v.charAt(0)=="/"?El:wl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Br(v,Yo)),u.join("")};function nn(u){return new cr(u)}function Li(u,m,v){u.j=v?xe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Fr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ur(u,m,v){m instanceof Bn?(u.i=m,zn(u.i,u.h)):(v||(m=Br(m,Tl)),u.i=new Bn(m,u.h))}function ze(u,m,v){u.i.set(m,v)}function jr(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Br(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,_l),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function _l(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cs=/[#\/\?@]/g,wl=/[#\?:]/g,El=/[#\?]/g,Tl=/[#\?@]/g,Yo=/#/g;function Bn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function It(u){u.g||(u.g=new Map,u.h=0,u.i&&Vc(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Bn.prototype,r.add=function(u,m){It(this),this.i=null,u=dn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Rn(u,m){It(u),m=dn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function An(u,m){return It(u),m=dn(u,m),u.g.has(m)}r.forEach=function(u,m){It(this),this.g.forEach(function(v,E){v.forEach(function(M){u.call(m,M,E,this)},this)},this)},r.na=function(){It(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let E=0;E<m.length;E++){const M=u[E];for(let $=0;$<M.length;$++)v.push(m[E])}return v},r.V=function(u){It(this);let m=[];if(typeof u=="string")An(this,u)&&(m=m.concat(this.g.get(dn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return It(this),this.i=null,u=dn(this,u),An(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function zr(u,m,v){Rn(u,m),0<v.length&&(u.i=null,u.g.set(dn(u,m),z(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var E=m[v];const $=encodeURIComponent(String(E)),ee=this.V(E);for(E=0;E<ee.length;E++){var M=$;ee[E]!==""&&(M+="="+encodeURIComponent(String(ee[E]))),u.push(M)}}return this.i=u.join("&")};function dn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function zn(u,m){m&&!u.j&&(It(u),u.i=null,u.g.forEach(function(v,E){var M=E.toLowerCase();E!=M&&(Rn(this,E),zr(this,M,v))},u)),u.j=m}function Oc(u,m){const v=new ki;if(f.Image){const E=new Image;E.onload=V(Ht,v,"TestLoadImage: loaded",!0,m,E),E.onerror=V(Ht,v,"TestLoadImage: error",!1,m,E),E.onabort=V(Ht,v,"TestLoadImage: abort",!1,m,E),E.ontimeout=V(Ht,v,"TestLoadImage: timeout",!1,m,E),f.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else m(!1)}function Il(u,m){const v=new ki,E=new AbortController,M=setTimeout(()=>{E.abort(),Ht(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:E.signal}).then($=>{clearTimeout(M),$.ok?Ht(v,"TestPingServer: ok",!0,m):Ht(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Ht(v,"TestPingServer: error",!1,m)})}function Ht(u,m,v,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(v)}catch{}}function Lc(){this.g=new Bo}function Sl(u,m,v){const E=v||"";try{br(u,function(M,$){let ee=M;y(M)&&(ee=Uo(M)),m.push(E+$+"="+encodeURIComponent(ee))})}catch(M){throw m.push(E+"type="+encodeURIComponent("_badmap")),M}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}b(hr,Ci),hr.prototype.g=function(){return new Mi(this.l,this.j)},hr.prototype.i=function(u){return function(){return u}}({});function Mi(u,m){ct.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Mi,ct),r=Mi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Cn(this):Pn(this),this.readyState==3&&Rl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Cn(this))},r.Qa=function(u){this.g&&(this.response=u,Cn(this))},r.ga=function(){this.g&&Cn(this)};function Cn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function dr(u){let m="";return Te(u,function(v,E){m+=E,m+=":",m+=v,m+=`\r
`}),m}function $r(u,m,v){e:{for(E in v){var E=!1;break e}E=!0}E||(v=dr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):ze(u,m,v))}function Qe(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Qe,ct);var Mc=/^https?$/i,Xo=["POST","PUT"];r=Qe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?ys(this.o):ys(In),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){bi(this,$);return}if(u=v||"",v=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)v.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const $ of E.keys())v.set($,E.get($));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Xo,m,void 0))||E||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of v)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(u),this.u=!1}catch($){bi(this,$)}};function bi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ps(u),rn(u)}function Ps(u){u.A||(u.A=!0,ht(u,"complete"),ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ht(this,"complete"),ht(this,"abort"),rn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rn(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Jo(this):this.bb())},r.bb=function(){Jo(this)};function Jo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Kt(u)!=4||u.Z()!=2)){if(u.u&&Kt(u)==4)Mo(u.Ea,0,u);else if(ht(u,"readystatechange"),Kt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var E;if(E=ee===0){var M=String(u.D).match(Oi)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),E=!Mc.test(M?M.toLowerCase():"")}v=E}if(v)ht(u,"complete"),ht(u,"success");else{u.m=6;try{var $=2<Kt(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Ps(u)}}finally{rn(u)}}}}function rn(u,m){if(u.g){ks(u);const v=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ht(u,"ready");try{v.onreadystatechange=E}catch{}}}function ks(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Kt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),jo(m)}};function Zo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xs(u){const m={};u=(u.g&&2<=Kt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(X(u[E]))continue;var v=D(u[E]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=m[M]||[];m[M]=$,$.push(v)}x(m,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $n(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ea(u){this.Aa=0,this.i=[],this.j=new ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$n("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$n("baseRetryDelayMs",5e3,u),this.cb=$n("retryDelaySeedMs",1e4,u),this.Wa=$n("forwardChannelMaxRetries",2,u),this.wa=$n("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Vi(u&&u.concurrentRequestLimit),this.Da=new Lc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ea.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,E){rt(0),this.W=u,this.H=m||{},v&&E!==void 0&&(this.H.OSID=v,this.H.OAID=E),this.F=this.X,this.I=kl(this,null,this.W),qn(this)};function St(u){if(Ns(u),u.G==3){var m=u.U++,v=nn(u.I);if(ze(v,"SID",u.K),ze(v,"RID",m),ze(v,"TYPE","terminate"),fr(u,v),m=new Sn(u,u.j,m),m.L=2,m.v=jr(nn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.v,v=!0),v||(m.g=xl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),qe(m)}Pl(u)}function kn(u){u.g&&(ta(u),u.g.cancel(),u.g=null)}function Ns(u){kn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Os(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function qn(u){if(!tn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Be||se(),te||(Be(),te=!0),me.add(m,u),u.B=0}}function bc(u,m){return gl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=En(R(u.Ga,u,m),Cl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Sn(this,this.j,u);let $=this.o;if(this.S&&($?($=I($),k($,this.S)):$=this.S),this.m!==null||this.O||(M.H=$,$=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var E=this.i[v];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=qr(this,M,m),v=nn(this.I),ze(v,"RID",u),ze(v,"CVER",22),this.D&&ze(v,"X-HTTP-Session-Id",this.D),fr(this,v),$&&(this.O?m="headers="+encodeURIComponent(String(dr($)))+"&"+m:this.m&&$r(v,this.m,$)),Qo(this.h,M),this.Ua&&ze(v,"TYPE","init"),this.P?(ze(v,"$req",m),ze(v,"SID","null"),M.T=!0,Ss(M,v,null)):Ss(M,v,m),this.G=2}}else this.G==3&&(u?Ds(this,u):this.i.length==0||tn(this.h)||Ds(this))};function Ds(u,m){var v;m?v=m.l:v=u.U++;const E=nn(u.I);ze(E,"SID",u.K),ze(E,"RID",v),ze(E,"AID",u.T),fr(u,E),u.m&&u.o&&$r(E,u.m,u.o),v=new Sn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=qr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Qo(u.h,v),Ss(v,E,m)}function fr(u,m){u.H&&Te(u.H,function(v,E){ze(m,E,v)}),u.l&&br({},function(v,E){ze(m,E,v)})}function qr(u,m,v){v=Math.min(u.i.length,v);var E=u.l?R(u.l.Na,u.l,u):null;e:{var M=u.i;let $=-1;for(;;){const ee=["count="+v];$==-1?0<v?($=M[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let je=!0;for(let dt=0;dt<v;dt++){let Ve=M[dt].g;const vt=M[dt].map;if(Ve-=$,0>Ve)$=Math.max(0,M[dt].g-100),je=!1;else try{Sl(vt,ee,"req"+Ve+"_")}catch{E&&E(vt)}}if(je){E=ee.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,E}function Fi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Be||se(),te||(Be(),te=!0),me.add(m,u),u.v=0}}function Vs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=En(R(u.Fa,u),Cl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Al(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=En(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),kn(this),Al(this))};function ta(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Al(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=nn(u.qa);ze(m,"RID","rpc"),ze(m,"SID",u.K),ze(m,"AID",u.T),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(m,"TO",u.ja),ze(m,"TYPE","xmlhttp"),fr(u,m),u.m&&u.o&&$r(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=jr(nn(m)),v.m=null,v.P=!0,Ko(v,u)}r.Za=function(){this.C!=null&&(this.C=null,kn(this),Vs(this),rt(19))};function Os(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ls(u,m){var v=null;if(u.g==m){Os(u),ta(u),u.g=null;var E=2}else if(Bt(u.h,m))v=m.D,yl(u.h,m),E=1;else return;if(u.G!=0){if(m.o)if(E==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;E=Pi(),ht(E,new ws(E,v)),qn(u)}else Fi(u);else if(M=m.s,M==3||M==0&&0<m.X||!(E==1&&bc(u,m)||E==2&&Vs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),M){case 1:pr(u,5);break;case 4:pr(u,10);break;case 3:pr(u,6);break;default:pr(u,2)}}}function Cl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function pr(u,m){if(u.j.info("Error code "+m),m==2){var v=R(u.fb,u),E=u.Xa;const M=!E;E=new cr(E||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Li(E,"https"),jr(E),M?Oc(E.toString(),v):Il(E.toString(),v)}else rt(2);u.G=0,u.l&&u.l.sa(m),Pl(u),Ns(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Pl(u){if(u.G=0,u.ka=[],u.l){const m=vl(u.h);(m.length!=0||u.i.length!=0)&&(j(u.ka,m),j(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function kl(u,m,v){var E=v instanceof cr?nn(v):new cr(v);if(E.g!="")m&&(E.g=m+"."+E.g),Fr(E,E.s);else{var M=f.location;E=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var $=new cr(null);E&&Li($,E),m&&($.g=m),M&&Fr($,M),v&&($.l=v),E=$}return v=u.D,m=u.ya,v&&m&&ze(E,v,m),ze(E,"VER",u.la),fr(u,E),E}function xl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Qe(new hr({eb:v})):new Qe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function na(){}r=na.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ms(){}Ms.prototype.g=function(u,m){return new zt(u,m)};function zt(u,m){ct.call(this),this.g=new ea(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!X(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!X(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Wn(this)}b(zt,ct),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){St(this.g)},zt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Uo(u),u=v);m.i.push(new ml(m.Ya++,u)),m.G==3&&qn(m)},zt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,zt.aa.N.call(this)};function Nl(u){Un.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}b(Nl,Un);function Dl(){_s.call(this),this.status=1}b(Dl,_s);function Wn(u){this.g=u}b(Wn,na),Wn.prototype.ua=function(){ht(this.g,"a")},Wn.prototype.ta=function(u){ht(this.g,new Nl(u))},Wn.prototype.sa=function(u){ht(this.g,new Dl)},Wn.prototype.ra=function(){ht(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,bv=function(){return new Ms},Mv=function(){return Pi()},Lv=jn,Vd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Fu=Ts,hl.COMPLETE="complete",Ov=hl,vs.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Na=vs,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Vv=Qe}).apply(typeof Cu<"u"?Cu:typeof self<"u"?self:typeof window<"u"?window:{});const zg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Xd("@firebase/firestore");function io(){return is.logLevel}function oe(r,...e){if(is.logLevel<=Pe.DEBUG){const t=e.map(cf);is.debug(`Firestore (${Ro}): ${r}`,...t)}}function xr(r,...e){if(is.logLevel<=Pe.ERROR){const t=e.map(cf);is.error(`Firestore (${Ro}): ${r}`,...t)}}function mo(r,...e){if(is.logLevel<=Pe.WARN){const t=e.map(cf);is.warn(`Firestore (${Ro}): ${r}`,...t)}}function cf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+r;throw xr(e),new Error(e)}function Ue(r,e){r||we()}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}}class $1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q1{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new pi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new pi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new Fv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Ft(e)}}class W1{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class H1{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new W1(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(this.o===void 0);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new K1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=Q1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function Ne(r,e){return r<e?-1:r>e?1:0}function go(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new mt(0,0))}static max(){return new Ee(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(),s===void 0?s=e.length-t:s>e.length-t&&we(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return za.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof za?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ge extends za{construct(e,t,s){return new Ge(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Ge(t)}static emptyPath(){return new Ge([])}}const Y1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends za{construct(e,t,s){return new Pt(e,t,s)}static isValidIdentifier(e){return Y1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new le(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new le(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new le(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new le(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ge.fromString(e))}static fromName(e){return new pe(Ge.fromString(e).popFirst(5))}static empty(){return new pe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ge(e.slice()))}}function X1(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new gi(o,pe.empty(),e)}function J1(r){return new gi(r.readTime,r.key,-1)}class gi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new gi(Ee.min(),pe.empty(),-1)}static max(){return new gi(Ee.max(),pe.empty(),-1)}}function Z1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(r){if(r.code!==G.FAILED_PRECONDITION||r.message!==eS)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,s)=>{t(e)})}static reject(e){return new W((t,s)=>{s(e)})}static waitFor(e){return new W((t,s)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},p=>s(p))}),h=!0,l===o&&t()})}static or(e){let t=W.resolve(!1);for(const s of e)t=t.next(o=>o?W.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new W((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(w=>{h[y]=w,++f,f===l&&s(h)},w=>o(w))}})}static doWhile(e,t){return new W((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function nS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Co(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pc.oe=-1;function mc(r){return r==null}function tc(r){return r===0&&1/r==-1/0}function rS(r){return typeof r=="number"&&Number.isInteger(r)&&!tc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=$g(e)),e=sS(r.get(t),e);return $g(e)}function sS(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function $g(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function os(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function jv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||Ct.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ct.RED,this.left=o??Ct.EMPTY,this.right=l??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ct(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ct.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wg(this.data.getIterator())}getIteratorFrom(e){return new Wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class Wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new gt(Pt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Bv("Invalid base64 string: "+l):l}}(e);return new xt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const oS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(r){if(Ue(!!r),typeof r=="string"){let e=0;const t=oS.exec(r);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(r.seconds),nanos:st(r.nanos)}}function st(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function vi(r){return typeof r=="string"?xt.fromBase64String(r):xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gc(r){const e=r.mapValue.fields.__previous_value__;return hf(e)?gc(e):e}function $a(r){const e=yi(r.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,s,o,l,h,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y}}class qa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _i(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?hf(r)?4:uS(r)?9007199254740991:lS(r)?10:11:we()}function nr(r,e){if(r===e)return!0;const t=_i(r);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return $a(r).isEqual($a(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=yi(o.timestampValue),f=yi(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return vi(o.bytesValue).isEqual(vi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return st(o.geoPointValue.latitude)===st(l.geoPointValue.latitude)&&st(o.geoPointValue.longitude)===st(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return st(o.integerValue)===st(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=st(o.doubleValue),f=st(l.doubleValue);return h===f?tc(h)===tc(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return go(r.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(qg(h)!==qg(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!nr(h[p],f[p])))return!1;return!0}(r,e);default:return we()}}function Wa(r,e){return(r.values||[]).find(t=>nr(t,e))!==void 0}function yo(r,e){if(r===e)return 0;const t=_i(r),s=_i(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=st(l.integerValue||l.doubleValue),p=st(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(r,e);case 3:return Hg(r.timestampValue,e.timestampValue);case 4:return Hg($a(r),$a(e));case 5:return Ne(r.stringValue,e.stringValue);case 6:return function(l,h){const f=vi(l),p=vi(h);return f.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const w=Ne(f[y],p[y]);if(w!==0)return w}return Ne(f.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Ne(st(l.latitude),st(h.latitude));return f!==0?f:Ne(st(l.longitude),st(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Kg(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,p,y,w;const T=l.fields||{},R=h.fields||{},V=(f=T.value)===null||f===void 0?void 0:f.arrayValue,b=(p=R.value)===null||p===void 0?void 0:p.arrayValue,z=Ne(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((w=b==null?void 0:b.values)===null||w===void 0?void 0:w.length)||0);return z!==0?z:Kg(V,b)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===ku.mapValue&&h===ku.mapValue)return 0;if(l===ku.mapValue)return 1;if(h===ku.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let T=0;T<p.length&&T<w.length;++T){const R=Ne(p[T],w[T]);if(R!==0)return R;const V=yo(f[p[T]],y[w[T]]);if(V!==0)return V}return Ne(p.length,w.length)}(r.mapValue,e.mapValue);default:throw we()}}function Hg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=yi(r),s=yi(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function Kg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=yo(t[o],s[o]);if(l)return l}return Ne(t.length,s.length)}function vo(r){return Od(r)}function Od(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=yi(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return vi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return pe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Od(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Od(t.fields[h])}`;return o+"}"}(r.mapValue):we()}function Uu(r){switch(_i(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gc(r);return e?16+Uu(e):16;case 5:return 2*r.stringValue.length;case 6:return vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Uu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return os(s.fields,(l,h)=>{o+=l.length+Uu(h)}),o}(r.mapValue);default:throw we()}}function Gg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ld(r){return!!r&&"integerValue"in r}function df(r){return!!r&&"arrayValue"in r}function Qg(r){return!!r&&"nullValue"in r}function Yg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ju(r){return!!r&&"mapValue"in r}function lS(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function La(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return os(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=La(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=La(r.arrayValue.values[t]);return e}return Object.assign({},r)}function uS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(t)}setAll(e){let t=Pt.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=La(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){os(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new wn(La(this.value))}}function zv(r){const e=[];return os(r.fields,(t,s)=>{const o=new Pt([t]);if(ju(s)){const l=zv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ut(e,0,Ee.min(),Ee.min(),Ee.min(),wn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ut(e,1,t,Ee.min(),s,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,Ee.min(),Ee.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Ee.min(),Ee.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.position=e,this.inclusive=t}}function Xg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=pe.comparator(pe.fromName(h.referenceValue),t.key):s=yo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Jg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!nr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t="asc"){this.field=e,this.dir=t}}function cS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{}class ut extends $v{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new dS(e,t,s):t==="array-contains"?new mS(e,s):t==="in"?new gS(e,s):t==="not-in"?new yS(e,s):t==="array-contains-any"?new vS(e,s):new ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new fS(e,s):new pS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yo(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends $v{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Fn(e,t)}matches(e){return qv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qv(r){return r.op==="and"}function Wv(r){return hS(r)&&qv(r)}function hS(r){for(const e of r.filters)if(e instanceof Fn)return!1;return!0}function Md(r){if(r instanceof ut)return r.field.canonicalString()+r.op.toString()+vo(r.value);if(Wv(r))return r.filters.map(e=>Md(e)).join(",");{const e=r.filters.map(t=>Md(t)).join(",");return`${r.op}(${e})`}}function Hv(r,e){return r instanceof ut?function(s,o){return o instanceof ut&&s.op===o.op&&s.field.isEqual(o.field)&&nr(s.value,o.value)}(r,e):r instanceof Fn?function(s,o){return o instanceof Fn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,f)=>l&&Hv(h,o.filters[f]),!0):!1}(r,e):void we()}function Kv(r){return r instanceof ut?function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`}(r):r instanceof Fn?function(t){return t.op.toString()+" {"+t.getFilters().map(Kv).join(" ,")+"}"}(r):"Filter"}class dS extends ut{constructor(e,t,s){super(e,t,s),this.key=pe.fromName(s.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class fS extends ut{constructor(e,t){super(e,"in",t),this.keys=Gv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pS extends ut{constructor(e,t){super(e,"not-in",t),this.keys=Gv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>pe.fromName(s.referenceValue))}class mS extends ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return df(t)&&Wa(t.arrayValue,this.value)}}class gS extends ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wa(this.value.arrayValue,t)}}class yS extends ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Wa(this.value.arrayValue,t)}}class vS extends ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!df(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Wa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function Zg(r,e=null,t=[],s=[],o=null,l=null,h=null){return new _S(r,e,t,s,o,l,h)}function ff(r){const e=Ie(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Md(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>vo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>vo(s)).join(",")),e.ue=t}return e.ue}function pf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!cS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Hv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Jg(r.startAt,e.startAt)&&Jg(r.endAt,e.endAt)}function bd(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wS(r,e,t,s,o,l,h,f){return new Po(r,e,t,s,o,l,h,f)}function Qv(r){return new Po(r)}function ey(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Yv(r){return r.collectionGroup!==null}function Ma(r){const e=Ie(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new gt(Pt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Ha(l,s))}),t.has(Pt.keyField().canonicalString())||e.ce.push(new Ha(Pt.keyField(),s))}return e.ce}function Zn(r){const e=Ie(r);return e.le||(e.le=ES(e,Ma(r))),e.le}function ES(r,e){if(r.limitType==="F")return Zg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Ha(o.field,l)});const t=r.endAt?new nc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new nc(r.startAt.position,r.startAt.inclusive):null;return Zg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Fd(r,e){const t=r.filters.concat([e]);return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ud(r,e,t){return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function yc(r,e){return pf(Zn(r),Zn(e))&&r.limitType===e.limitType}function Xv(r){return`${ff(Zn(r))}|lt:${r.limitType}`}function so(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Kv(o)).join(", ")}]`),mc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>vo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>vo(o)).join(",")),`Target(${s})`}(Zn(r))}; limitType=${r.limitType})`}function vc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):pe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of Ma(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,f,p){const y=Xg(h,f,p);return h.inclusive?y<=0:y<0}(s.startAt,Ma(s),o)||s.endAt&&!function(h,f,p){const y=Xg(h,f,p);return h.inclusive?y>=0:y>0}(s.endAt,Ma(s),o))}(r,e)}function TS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Jv(r){return(e,t)=>{let s=!1;for(const o of Ma(r)){const l=IS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function IS(r,e,t){const s=r.field.isKeyField()?pe.comparator(e.key,t.key):function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?yo(p,y):we()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new et(pe.comparator);function Nr(){return SS}const Zv=new et(pe.comparator);function Da(...r){let e=Zv;for(const t of r)e=e.insert(t.key,t);return e}function e_(r){let e=Zv;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Zi(){return ba()}function t_(){return ba()}function ba(){return new as(r=>r.toString(),(r,e)=>r.isEqual(e))}const RS=new et(pe.comparator),AS=new gt(pe.comparator);function ke(...r){let e=AS;for(const t of r)e=e.add(t);return e}const CS=new gt(Ne);function PS(){return CS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function n_(r){return{integerValue:""+r}}function kS(r,e){return rS(e)?n_(e):mf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this._=void 0}}function xS(r,e,t){return r instanceof Ka?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&hf(l)&&(l=gc(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Ga?i_(r,e):r instanceof Qa?s_(r,e):function(o,l){const h=r_(o,l),f=ty(h)+ty(o.Pe);return Ld(h)&&Ld(o.Pe)?n_(f):mf(o.serializer,f)}(r,e)}function NS(r,e,t){return r instanceof Ga?i_(r,e):r instanceof Qa?s_(r,e):t}function r_(r,e){return r instanceof rc?function(s){return Ld(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Ka extends _c{}class Ga extends _c{constructor(e){super(),this.elements=e}}function i_(r,e){const t=o_(e);for(const s of r.elements)t.some(o=>nr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Qa extends _c{constructor(e){super(),this.elements=e}}function s_(r,e){let t=o_(e);for(const s of r.elements)t=t.filter(o=>!nr(o,s));return{arrayValue:{values:t}}}class rc extends _c{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ty(r){return st(r.integerValue||r.doubleValue)}function o_(r){return df(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this.field=e,this.transform=t}}function VS(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Ga&&o instanceof Ga||s instanceof Qa&&o instanceof Qa?go(s.elements,o.elements,nr):s instanceof rc&&o instanceof rc?nr(s.Pe,o.Pe):s instanceof Ka&&o instanceof Ka}(r.transform,e.transform)}class OS{constructor(e,t){this.version=e,this.transformResults=t}}class er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class wc{}function a_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new u_(r.key,er.none()):new rl(r.key,r.data,er.none());{const t=r.data,s=wn.empty();let o=new gt(Pt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new ls(r.key,s,new Mn(o.toArray()),er.none())}}function LS(r,e,t){r instanceof rl?function(o,l,h){const f=o.value.clone(),p=ry(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof ls?function(o,l,h){if(!Bu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=ry(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(l_(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Fa(r,e,t,s){return r instanceof rl?function(l,h,f,p){if(!Bu(l.precondition,h))return f;const y=l.value.clone(),w=iy(l.fieldTransforms,p,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof ls?function(l,h,f,p){if(!Bu(l.precondition,h))return f;const y=iy(l.fieldTransforms,p,h),w=h.data;return w.setAll(l_(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,s):function(l,h,f){return Bu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function MS(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=r_(s.transform,o||null);l!=null&&(t===null&&(t=wn.empty()),t.set(s.field,l))}return t||null}function ny(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&go(s,o,(l,h)=>VS(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class rl extends wc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ls extends wc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function l_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function ry(r,e,t){const s=new Map;Ue(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,NS(h,f,t[o]))}return s}function iy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,xS(l,h,e))}return s}class u_ extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bS extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&LS(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Fa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Fa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=t_();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=a_(h,f);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(t,s)=>ny(t,s))&&go(this.baseMutations,e.baseMutations,(t,s)=>ny(t,s))}}class gf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ue(e.mutations.length===s.length);let o=function(){return RS}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new gf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Oe;function BS(r){switch(r){default:return we();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function c_(r){if(r===void 0)return xr("GRPC error has no .code"),G.UNKNOWN;switch(r){case lt.OK:return G.OK;case lt.CANCELLED:return G.CANCELLED;case lt.UNKNOWN:return G.UNKNOWN;case lt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case lt.INTERNAL:return G.INTERNAL;case lt.UNAVAILABLE:return G.UNAVAILABLE;case lt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case lt.NOT_FOUND:return G.NOT_FOUND;case lt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case lt.ABORTED:return G.ABORTED;case lt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case lt.DATA_LOSS:return G.DATA_LOSS;default:return we()}}(Oe=lt||(lt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new es([4294967295,4294967295],0);function sy(r){const e=zS().encode(r),t=new Dv;return t.update(e),new Uint8Array(t.digest())}function oy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new es([t,s],0),new es([o,l],0)]}class yf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Va(`Invalid padding: ${t}`);if(s<0)throw new Va(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Va(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=es.fromNumber(this.Te)}Ee(e,t,s){let o=e.add(t.multiply(es.fromNumber(s)));return o.compare($S)===1&&(o=new es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=sy(e),[s,o]=oy(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);if(!this.de(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new yf(l,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.Te===0)return;const t=sy(e),[s,o]=oy(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ec(Ee.min(),o,new et(Ne),Nr(),ke())}}class il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new il(s,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class h_{constructor(e,t){this.targetId=e,this.me=t}}class d_{constructor(e,t,s=xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ay{constructor(){this.fe=0,this.ge=ly(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),s=ke();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we()}}),new il(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=ly()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qS{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nr(),this.qe=xu(),this.Qe=xu(),this.Ke=new et(Ne)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:we()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(bd(l))if(s===0){const h=new pe(l.path);this.We(t,h,Ut.newNoDocument(h,Ee.min()))}else Ue(s===1);else{const h=this.Ze(t);if(h!==s){const f=this.Xe(e),p=f?this.et(f,e,h):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=vi(s).toUint8Array()}catch(p){if(p instanceof Bv)return mo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new yf(h,o,l)}catch(p){return mo(p instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Te===0?null:f}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.Le.nt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,h)=>{const f=this.Ye(h);if(f){if(l.current&&bd(f.target)){const p=new pe(f.target.path);this.st(p).has(h)||this.ot(h,p)||this.We(h,p,Ut.newNoDocument(p,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let s=ke();this.Qe.forEach((l,h)=>{let f=!0;h.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new Ec(e,t,this.Ke,this.ke,s);return this.ke=Nr(),this.qe=xu(),this.Qe=xu(),this.Ke=new et(Ne),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new ay,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new gt(Ne),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gt(Ne),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new ay),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xu(){return new et(pe.comparator)}function ly(){return new et(pe.comparator)}const WS={asc:"ASCENDING",desc:"DESCENDING"},HS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KS={and:"AND",or:"OR"};class GS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jd(r,e){return r.useProto3Json||mc(e)?e:{value:e}}function ic(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function QS(r,e){return ic(r,e.toTimestamp())}function tr(r){return Ue(!!r),Ee.fromTimestamp(function(t){const s=yi(t);return new mt(s.seconds,s.nanos)}(r))}function vf(r,e){return Bd(r,e).canonicalString()}function Bd(r,e){const t=function(o){return new Ge(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function p_(r){const e=Ge.fromString(r);return Ue(__(e)),e}function zd(r,e){return vf(r.databaseId,e.path)}function md(r,e){const t=p_(e);if(t.get(1)!==r.databaseId.projectId)throw new le(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(g_(t))}function m_(r,e){return vf(r.databaseId,e)}function YS(r){const e=p_(r);return e.length===4?Ge.emptyPath():g_(e)}function $d(r){return new Ge(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function g_(r){return Ue(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function uy(r,e,t){return{name:zd(r,e),fields:t.value.mapValue.fields}}function XS(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,w){return y.useProto3Json?(Ue(w===void 0||typeof w=="string"),xt.fromBase64String(w||"")):(Ue(w===void 0||w instanceof Buffer||w instanceof Uint8Array),xt.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(y){const w=y.code===void 0?G.UNKNOWN:c_(y.code);return new le(w,y.message||"")}(h);t=new d_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=md(r,s.document.name),l=tr(s.document.updateTime),h=s.document.createTime?tr(s.document.createTime):Ee.min(),f=new wn({mapValue:{fields:s.document.fields}}),p=Ut.newFoundDocument(o,l,h,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new zu(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=md(r,s.document),l=s.readTime?tr(s.readTime):Ee.min(),h=Ut.newNoDocument(o,l),f=s.removedTargetIds||[];t=new zu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=md(r,s.document),l=s.removedTargetIds||[];t=new zu([],l,o,null)}else{if(!("filter"in e))return we();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new jS(o,l),f=s.targetId;t=new h_(f,h)}}return t}function JS(r,e){let t;if(e instanceof rl)t={update:uy(r,e.key,e.value)};else if(e instanceof u_)t={delete:zd(r,e.key)};else if(e instanceof ls)t={update:uy(r,e.key,e.data),updateMask:aR(e.fieldMask)};else{if(!(e instanceof bS))return we();t={verify:zd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const f=h.transform;if(f instanceof Ka)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ga)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Qa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof rc)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw we()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:QS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we()}(r,e.precondition)),t}function ZS(r,e){return r&&r.length>0?(Ue(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?tr(o.updateTime):tr(l);return h.isEqual(Ee.min())&&(h=tr(l)),new OS(h,o.transformResults||[])}(t,e))):[]}function eR(r,e){return{documents:[m_(r,e.path)]}}function tR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=m_(r,o);const l=function(y){if(y.length!==0)return v_(Fn.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(w=>function(R){return{field:oo(R.field),direction:iR(R.dir)}}(w))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=jd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function nR(r){let e=YS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ue(s===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(T){const R=y_(T);return R instanceof Fn&&Wv(R)?R.getFilters():[R]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(R=>function(b){return new Ha(ao(b.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(R))}(t.orderBy));let f=null;t.limit&&(f=function(T){let R;return R=typeof T=="object"?T.value:T,mc(R)?null:R}(t.limit));let p=null;t.startAt&&(p=function(T){const R=!!T.before,V=T.values||[];return new nc(V,R)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const R=!T.before,V=T.values||[];return new nc(V,R)}(t.endAt)),wS(e,o,h,l,f,"F",p,y)}function rR(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function y_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ao(t.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ao(t.unaryFilter.field);return ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ao(t.unaryFilter.field);return ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=ao(t.unaryFilter.field);return ut.create(h,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(r):r.fieldFilter!==void 0?function(t){return ut.create(ao(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Fn.create(t.compositeFilter.filters.map(s=>y_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we()}}(t.compositeFilter.op))}(r):we()}function iR(r){return WS[r]}function sR(r){return HS[r]}function oR(r){return KS[r]}function oo(r){return{fieldPath:r.canonicalString()}}function ao(r){return Pt.fromServerFormat(r.fieldPath)}function v_(r){return r instanceof ut?function(t){if(t.op==="=="){if(Yg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NAN"}};if(Qg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Yg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NAN"}};if(Qg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(t.field),op:sR(t.op),value:t.value}}}(r):r instanceof Fn?function(t){const s=t.getFilters().map(o=>v_(o));return s.length===1?s[0]:{compositeFilter:{op:oR(t.op),filters:s}}}(r):we()}function aR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,s,o,l=Ee.min(),h=Ee.min(),f=xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.ht=e}}function uR(r){const e=nR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.ln=new hR}addToCollectionParentIndex(e,t){return this.ln.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(gi.min())}updateCollectionGroup(e,t,s){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class hR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gt(Ge.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new _o(0)}static Qn(){return new _o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy([r,e],[t,s]){const o=Ne(r,t);return o===0?Ne(e,s):o}class dR{constructor(e){this.Gn=e,this.buffer=new gt(hy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();hy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Co(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ao(t)}await this.Yn(3e5)})}}class pR{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return W.resolve(pc.oe);const s=new dR(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(cy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cy):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,l,h,f,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,f=Date.now(),this.removeTargets(e,s,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(y=Date.now(),io()<=Pe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function mR(r,e){return new pR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.changes=new as(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?W.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Fa(s.mutation,o,Mn.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ke()){const o=Zi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=Da();return l.forEach((f,p)=>{h=h.insert(f,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=Zi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ke()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let l=Nr();const h=ba(),f=function(){return ba()}();return t.forEach((p,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof ls)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Fa(w.mutation,y,w.mutation.getFieldMask(),mt.now())):h.set(y.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,w)=>h.set(y,w)),t.forEach((y,w)=>{var T;return f.set(y,new yR(w,(T=h.get(y))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const s=ba();let o=new et((h,f)=>h-f),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let w=s.get(p)||Mn.empty();w=f.applyToLocalView(y,w),s.set(p,w);const T=(o.get(f.batchId)||ke()).add(p);o=o.insert(f.batchId,T)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,w=p.value,T=t_();w.forEach(R=>{if(!l.has(R)){const V=a_(t.get(R),s.get(R));V!==null&&T.set(R,V),l=l.add(R)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return W.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):W.resolve(Zi());let f=-1,p=l;return h.next(y=>W.forEach(y,(w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?W.resolve():this.remoteDocumentCache.getEntry(e,w).next(R=>{p=p.insert(w,R)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,ke())).next(w=>({batchId:f,changes:e_(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(s=>{let o=Da();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Da();return this.indexManager.getCollectionParents(e,l).next(f=>W.forEach(f,p=>{const y=function(T,R){return new Po(R,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(w=>{w.forEach((T,R)=>{h=h.insert(T,R)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((p,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Ut.newInvalidDocument(w)))});let f=Da();return h.forEach((p,y)=>{const w=l.get(p);w!==void 0&&Fa(w.mutation,y,Mn.empty(),mt.now()),vc(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return W.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:uR(o.bundledQuery),readTime:tr(o.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.overlays=new et(pe.comparator),this.Er=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Zi();return W.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.Tt(e,t,l)}),W.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Er.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(s)),W.resolve()}getOverlaysForCollection(e,t,s){const o=Zi(),l=t.length+1,h=new pe(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return W.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new et((y,w)=>y-w);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=Zi(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=Zi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>f.set(y,w)),!(f.size()>=o)););return W.resolve(f)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Er.get(o.largestBatchId).delete(s.key);this.Er.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new US(t,s));let l=this.Er.get(t);l===void 0&&(l=ke(),this.Er.set(t,l)),this.Er.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this.dr=new gt(Tt.Ar),this.Rr=new gt(Tt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new Tt(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new Tt(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new pe(new Ge([])),s=new Tt(t,e),o=new Tt(t,e+1),l=[];return this.Rr.forEachInRange([s,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new pe(new Ge([])),s=new Tt(t,e),o=new Tt(t,e+1);let l=ke();return this.Rr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Tt(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return pe.comparator(e.key,t.key)||Ne(e.br,t.br)}static Vr(e,t){return Ne(e.br,t.br)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new gt(Tt.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new FS(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.vr=this.vr.add(new Tt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,t){return W.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),l=o<0?0:o;return W.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tt(t,0),o=new Tt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([s,o],h=>{const f=this.Cr(h.br);l.push(f)}),W.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(Ne);return t.forEach(o=>{const l=new Tt(o,0),h=new Tt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],f=>{s=s.add(f.br)})}),W.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;pe.isDocumentKey(l)||(l=l.child(""));const h=new Tt(new pe(l),0);let f=new gt(Ne);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.br)),!0)},h),W.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return W.forEach(t.mutations,o=>{const l=new Tt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new Tt(t,0),o=this.vr.firstAfterOrEqual(s);return W.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.Nr=e,this.docs=function(){return new et(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return W.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let s=Nr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))}),W.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Nr();const h=t.path,f=new pe(h.child("")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||Z1(J1(w),s)<=0||(o.has(w.key)||vc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return W.resolve(l)}getAllFromCollectionGroup(e,t,s,o){we()}Lr(e,t){return W.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new SR(this)}getSize(e){return W.resolve(this.size)}}class SR extends gR{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),W.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.persistence=e,this.Br=new as(t=>ff(t),pf),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.kr=0,this.qr=new _f,this.targetCount=0,this.Qr=_o.qn()}forEachTarget(e,t){return this.Br.forEach((s,o)=>t(o)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),W.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Un(t),W.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Br.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Br.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),W.waitFor(l).next(()=>o)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return W.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),W.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),W.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return W.resolve(s)}containsKey(e,t){return W.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new pc(0),this.Ur=!1,this.Ur=!0,this.Wr=new ER,this.referenceDelegate=e(this),this.Gr=new RR(this),this.indexManager=new cR,this.remoteDocumentCache=function(o){return new IR(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new lR(t),this.jr=new _R(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new TR(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new AR(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return W.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class AR extends tS{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Zr=new _f,this.Xr=null}static ei(e){return new wf(e)}get ti(){if(this.Xr)return this.Xr;throw we()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),W.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),W.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,s=>{const o=pe.fromPath(s);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ee.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return W.or([()=>W.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class sc{constructor(e,t){this.persistence=e,this.ri=new as(s=>iS(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=mR(this,t)}static ei(e,t){return new sc(e,t)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return W.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(l=>l?W.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,h=>this.ir(e,h,t).next(f=>{f||(s++,l.removeEntry(h,Ee.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uu(e.data.value)),t}ir(e,t,s){return W.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return W.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=ke(),o=ke();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Ef(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return uE()?8:nS(jt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new CR;return this.ts(e,t,h).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,h,f.size)})}).next(()=>l.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(io()<=Pe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",so(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(io()<=Pe.DEBUG&&oe("QueryEngine","Query:",so(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(io()<=Pe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",so(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(t))):W.resolve())}Xi(e,t){if(ey(t))return W.resolve(null);let s=Zn(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ud(t,null,"F"),s=Zn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=ke(...l);return this.Zi.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.rs(t,f);return this.ss(t,y,h,p.readTime)?this.Xi(e,Ud(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,s,o){return ey(t)||o.isEqual(Ee.min())?W.resolve(null):this.Zi.getDocuments(e,s).next(l=>{const h=this.rs(t,l);return this.ss(t,h,s,o)?W.resolve(null):(io()<=Pe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),so(t)),this.os(e,h,t,X1(o,-1)).next(f=>f))})}rs(e,t){let s=new gt(Jv(e));return t.forEach((o,l)=>{vc(e,l)&&(s=s.add(l))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,s){return io()<=Pe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",so(t)),this.Zi.getDocumentsMatchingQuery(e,t,gi.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new et(Ne),this.cs=new as(l=>ff(l),pf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vR(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function xR(r,e,t,s){return new kR(r,e,t,s)}async function E_(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],f=[];let p=ke();for(const y of o){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(s,p).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:f}))})})}function NR(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,w){const T=y.batch,R=T.keys();let V=W.resolve();return R.forEach(b=>{V=V.next(()=>w.getEntry(p,b)).next(z=>{const j=y.docVersions.get(b);Ue(j!==null),z.version.compareTo(j)<0&&(T.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),w.addEntry(z)))})}),V.next(()=>f.mutationQueue.removeMutationBatch(p,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let p=ke();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function T_(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function DR(r,e){const t=Ie(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((w,T)=>{const R=o.get(T);if(!R)return;f.push(t.Gr.removeMatchingKeys(l,w.removedDocuments,T).next(()=>t.Gr.addMatchingKeys(l,w.addedDocuments,T)));let V=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(xt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):w.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(w.resumeToken,s)),o=o.insert(T,V),function(z,j,H){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(R,V,w)&&f.push(t.Gr.updateTargetData(l,V))});let p=Nr(),y=ke();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),f.push(VR(l,h,e.documentUpdates).next(w=>{p=w.Is,y=w.Es})),!s.isEqual(Ee.min())){const w=t.Gr.getLastRemoteSnapshotVersion(l).next(T=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(w)}return W.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function VR(r,e,t){let s=ke(),o=ke();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Nr();return t.forEach((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ee.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):oe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{Is:h,Es:o}})}function OR(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function LR(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(l=>l?(o=l,W.resolve(o)):t.Gr.allocateTargetId(s).next(h=>(o=new ci(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function qd(r,e,t){const s=Ie(r),o=s.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Co(h))throw h;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function dy(r,e,t){const s=Ie(r);let o=Ee.min(),l=ke();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,w){const T=Ie(p),R=T.cs.get(w);return R!==void 0?W.resolve(T.us.get(R)):T.Gr.getTargetData(y,w)}(s,h,Zn(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,f.targetId).next(p=>{l=p})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,t?o:Ee.min(),t?l:ke())).next(f=>(MR(s,TS(e),f),{documents:f,ds:l})))}function MR(r,e,t){let s=r.ls.get(e)||Ee.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.ls.set(e,s)}class fy{constructor(){this.activeTargetIds=PS()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bR{constructor(){this._o=new fy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new fy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function gd(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class BR extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,s,o,l,h){const f=gd(),p=this.No(t,s.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${f}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,l,h),this.Bo(t,p,y,o).then(w=>(oe("RestConnection",`Received RPC '${t}' ${f}: `,w),w),w=>{throw mo("RestConnection",`RPC '${t}' ${f} failed with error: `,w,"url: ",p,"request:",o),w})}ko(t,s,o,l,h,f){return this.Oo(t,s,o,l,h)}Lo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,s){const o=UR[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,o){const l=gd();return new Promise((h,f)=>{const p=new Vv;p.setWithCredentials(!0),p.listenOnce(Ov.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Fu.NO_ERROR:const w=p.getResponseJson();oe(bt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Fu.TIMEOUT:oe(bt,`RPC '${e}' ${l} timed out`),f(new le(G.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const T=p.getStatus();if(oe(bt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const b=function(j){const H=j.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(H)>=0?H:G.UNKNOWN}(V.status);f(new le(b,V.message))}else f(new le(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new le(G.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{oe(bt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);oe(bt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,s,15)})}qo(e,t,s){const o=gd(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=bv(),f=Mv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const w=l.join("");oe(bt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const T=h.createWebChannel(w,p);let R=!1,V=!1;const b=new jR({Eo:j=>{V?oe(bt,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(R||(oe(bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),R=!0),oe(bt,`RPC '${e}' stream ${o} sending:`,j),T.send(j))},Ao:()=>T.close()}),z=(j,H,X)=>{j.listen(H,re=>{try{X(re)}catch(de){setTimeout(()=>{throw de},0)}})};return z(T,Na.EventType.OPEN,()=>{V||(oe(bt,`RPC '${e}' stream ${o} transport opened.`),b.So())}),z(T,Na.EventType.CLOSE,()=>{V||(V=!0,oe(bt,`RPC '${e}' stream ${o} transport closed`),b.Do())}),z(T,Na.EventType.ERROR,j=>{V||(V=!0,mo(bt,`RPC '${e}' stream ${o} transport errored:`,j),b.Do(new le(G.UNAVAILABLE,"The operation could not be completed")))}),z(T,Na.EventType.MESSAGE,j=>{var H;if(!V){const X=j.data[0];Ue(!!X);const re=X,de=(re==null?void 0:re.error)||((H=re[0])===null||H===void 0?void 0:H.error);if(de){oe(bt,`RPC '${e}' stream ${o} received error:`,de);const Se=de.status;let Te=function(A){const k=lt[A];if(k!==void 0)return c_(k)}(Se),x=de.message;Te===void 0&&(Te=G.INTERNAL,x="Unknown error status: "+Se+" with message "+de.message),V=!0,b.Do(new le(Te,x)),T.close()}else oe(bt,`RPC '${e}' stream ${o} received:`,X),b.vo(X)}}),z(f,Lv.STAT_EVENT,j=>{j.stat===Vd.PROXY?oe(bt,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Vd.NOPROXY&&oe(bt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.bo()},0),b}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r){return new GS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t,s,o,l,h,f,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new I_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new le(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.E_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zR extends S_{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=XS(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ee.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?tr(h.readTime):Ee.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=$d(this.serializer),t.addTarget=function(l,h){let f;const p=h.target;if(f=bd(p)?{documents:eR(l,p)}:{query:tR(l,p).ct},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=f_(l,h.resumeToken);const y=jd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ee.min())>0){f.readTime=ic(l,h.snapshotVersion.toTimestamp());const y=jd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const s=rR(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=$d(this.serializer),t.removeTarget=e,this.c_(t)}}class $R extends S_{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=ZS(e.writeResults,e.commitTime),s=tr(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=$d(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>JS(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new le(G.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,Bd(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(G.UNKNOWN,l.toString())})}ko(e,t,s,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.ko(e,Bd(t,s),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(G.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class WR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(xr(t),this.C_=!1):oe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{us(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.k_.add(4),await sl(y),y.K_.set("Unknown"),y.k_.delete(4),await Ic(y)}(this))})}),this.K_=new WR(s,o)}}async function Ic(r){if(us(r))for(const e of r.q_)await e(!0)}async function sl(r){for(const e of r.q_)await e(!1)}function R_(r,e){const t=Ie(r);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Rf(t)?Sf(t):ko(t).s_()&&If(t,e))}function Tf(r,e){const t=Ie(r),s=ko(t);t.B_.delete(e),s.s_()&&A_(t,e),t.B_.size===0&&(s.s_()?s.a_():us(t)&&t.K_.set("Unknown"))}function If(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ko(r).V_(e)}function A_(r,e){r.U_.xe(e),ko(r).m_(e)}function Sf(r){r.U_=new qS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.B_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),ko(r).start(),r.K_.F_()}function Rf(r){return us(r)&&!ko(r).i_()&&r.B_.size>0}function us(r){return Ie(r).k_.size===0}function C_(r){r.U_=void 0}async function KR(r){r.K_.set("Online")}async function GR(r){r.B_.forEach((e,t)=>{If(r,e)})}async function QR(r,e){C_(r),Rf(r)?(r.K_.O_(e),Sf(r)):r.K_.set("Unknown")}async function YR(r,e,t){if(r.K_.set("Online"),e instanceof d_&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.B_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.B_.delete(f),o.U_.removeTarget(f))}(r,e)}catch(s){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await oc(r,s)}else if(e instanceof zu?r.U_.$e(e):e instanceof h_?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ee.min()))try{const s=await T_(r.localStore);t.compareTo(s)>=0&&await function(l,h){const f=l.U_.it(h);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.B_.get(y);w&&l.B_.set(y,w.withResumeToken(p.resumeToken,h))}}),f.targetMismatches.forEach((p,y)=>{const w=l.B_.get(p);if(!w)return;l.B_.set(p,w.withResumeToken(xt.EMPTY_BYTE_STRING,w.snapshotVersion)),A_(l,p);const T=new ci(w.target,p,y,w.sequenceNumber);If(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){oe("RemoteStore","Failed to raise snapshot:",s),await oc(r,s)}}async function oc(r,e,t){if(!Co(e))throw e;r.k_.add(1),await sl(r),r.K_.set("Offline"),t||(t=()=>T_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Ic(r)})}function P_(r,e){return e().catch(t=>oc(r,t,e))}async function Sc(r){const e=Ie(r),t=wi(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;XR(e);)try{const o=await OR(e.localStore,s);if(o===null){e.L_.length===0&&t.a_();break}s=o.batchId,JR(e,o)}catch(o){await oc(e,o)}k_(e)&&x_(e)}function XR(r){return us(r)&&r.L_.length<10}function JR(r,e){r.L_.push(e);const t=wi(r);t.s_()&&t.f_&&t.g_(e.mutations)}function k_(r){return us(r)&&!wi(r).i_()&&r.L_.length>0}function x_(r){wi(r).start()}async function ZR(r){wi(r).w_()}async function eA(r){const e=wi(r);for(const t of r.L_)e.g_(t.mutations)}async function tA(r,e,t){const s=r.L_.shift(),o=gf.from(s,e,t);await P_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Sc(r)}async function nA(r,e){e&&wi(r).f_&&await async function(s,o){if(function(h){return BS(h)&&h!==G.ABORTED}(o.code)){const l=s.L_.shift();wi(s).__(),await P_(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Sc(s)}}(r,e),k_(r)&&x_(r)}async function my(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const s=us(t);t.k_.add(3),await sl(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Ic(t)}async function rA(r,e){const t=Ie(r);e?(t.k_.delete(2),await Ic(t)):e||(t.k_.add(2),await sl(t),t.K_.set("Unknown"))}function ko(r){return r.W_||(r.W_=function(t,s,o){const l=Ie(t);return l.b_(),new zR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:KR.bind(null,r),mo:GR.bind(null,r),po:QR.bind(null,r),R_:YR.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),Rf(r)?Sf(r):r.K_.set("Unknown")):(await r.W_.stop(),C_(r))})),r.W_}function wi(r){return r.G_||(r.G_=function(t,s,o){const l=Ie(t);return l.b_(),new $R(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:ZR.bind(null,r),po:nA.bind(null,r),p_:eA.bind(null,r),y_:tA.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Sc(r)):(await r.G_.stop(),r.L_.length>0&&(oe("RemoteStore",`Stopping write stream with ${r.L_.length} pending writes`),r.L_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new Af(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(r,e){if(xr("AsyncQueue",`${e}: ${r}`),Co(r))return new le(G.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{static emptySet(e){return new fo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||pe.comparator(t.key,s.key):(t,s)=>pe.comparator(t.key,s.key),this.keyedMap=Da(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.z_=new et(pe.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):we():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class wo{constructor(e,t,s,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new wo(e,t,fo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class sA{constructor(){this.queries=yy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Ie(t),l=o.queries;o.queries=yy(),l.forEach((h,f)=>{for(const p of f.J_)p.onError(s)})})(this,new le(G.ABORTED,"Firestore shutting down"))}}function yy(){return new as(r=>Xv(r),yc)}async function oA(r,e){const t=Ie(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(s=2):(l=new iA,s=e.Z_()?0:1);try{switch(s){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Cf(h,`Initialization of query '${so(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Pf(t)}async function aA(r,e){const t=Ie(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function lA(r,e){const t=Ie(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.J_)f.ta(o)&&(s=!0);h.H_=o}}s&&Pf(t)}function uA(r,e,t){const s=Ie(r),o=s.queries.get(e);if(o)for(const l of o.J_)l.onError(t);s.queries.delete(e)}function Pf(r){r.X_.forEach(e=>{e.next()})}var Wd,vy;(vy=Wd||(Wd={})).na="default",vy.Cache="cache";class cA{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Wd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.key=e}}class D_{constructor(e){this.key=e}}class hA{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=Jv(e),this.ma=new fo(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new gy,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const R=o.get(w),V=vc(this.query,T)?T:null,b=!!R&&this.mutatedKeys.has(R.key),z=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let j=!1;R&&V?R.data.isEqual(V.data)?b!==z&&(s.track({type:3,doc:V}),j=!0):this.ya(R,V)||(s.track({type:2,doc:V}),j=!0,(p&&this.Va(V,p)>0||y&&this.Va(V,y)<0)&&(f=!0)):!R&&V?(s.track({type:0,doc:V}),j=!0):R&&!V&&(s.track({type:1,doc:R}),j=!0,(p||y)&&(f=!0)),j&&(V?(h=h.add(V),l=z?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{ma:h,pa:s,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((w,T)=>function(V,b){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return z(V)-z(b)}(w.type,T.type)||this.Va(w.doc,T.doc)),this.wa(s),o=o!=null&&o;const f=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,h.length!==0||y?{snapshot:new wo(this.query,e.ma,l,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new gy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new D_(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new N_(s))}),t}va(e){this.da=e.ds,this.Ra=ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return wo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class dA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class fA{constructor(e){this.key=e,this.Fa=!1}}class pA{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new as(f=>Xv(f),yc),this.Oa=new Map,this.Na=new Set,this.La=new et(pe.comparator),this.Ba=new Map,this.ka=new _f,this.qa={},this.Qa=new Map,this.Ka=_o.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function mA(r,e,t=!0){const s=F_(r);let o;const l=s.xa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await V_(s,e,t,!0),o}async function gA(r,e){const t=F_(r);await V_(t,e,!0,!1)}async function V_(r,e,t,s){const o=await LR(r.localStore,Zn(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await yA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&R_(r.remoteStore,o),f}async function yA(r,e,t,s,o){r.Ua=(T,R,V)=>async function(z,j,H,X){let re=j.view.ga(H);re.ss&&(re=await dy(z.localStore,j.query,!1).then(({documents:x})=>j.view.ga(x,re)));const de=X&&X.targetChanges.get(j.targetId),Se=X&&X.targetMismatches.get(j.targetId)!=null,Te=j.view.applyChanges(re,z.isPrimaryClient,de,Se);return wy(z,j.targetId,Te.ba),Te.snapshot}(r,T,R,V);const l=await dy(r.localStore,e,!0),h=new hA(e,l.ds),f=h.ga(l.documents),p=il.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,p);wy(r,t,y.ba);const w=new dA(e,t,h);return r.xa.set(e,w),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function vA(r,e,t){const s=Ie(r),o=s.xa.get(e),l=s.Oa.get(o.targetId);if(l.length>1)return s.Oa.set(o.targetId,l.filter(h=>!yc(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await qd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Tf(s.remoteStore,o.targetId),Hd(s,o.targetId)}).catch(Ao)):(Hd(s,o.targetId),await qd(s.localStore,o.targetId,!0))}async function _A(r,e){const t=Ie(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Tf(t.remoteStore,s.targetId))}async function wA(r,e,t){const s=CA(r);try{const o=await function(h,f){const p=Ie(h),y=mt.now(),w=f.reduce((V,b)=>V.add(b.key),ke());let T,R;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let b=Nr(),z=ke();return p.hs.getEntries(V,w).next(j=>{b=j,b.forEach((H,X)=>{X.isValidDocument()||(z=z.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,b)).next(j=>{T=j;const H=[];for(const X of f){const re=MS(X,T.get(X.key).overlayedDocument);re!=null&&H.push(new ls(X.key,re,zv(re.value.mapValue),er.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,H,f)}).next(j=>{R=j;const H=j.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(V,j.batchId,H)})}).then(()=>({batchId:R.batchId,changes:e_(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,p){let y=h.qa[h.currentUser.toKey()];y||(y=new et(Ne)),y=y.insert(f,p),h.qa[h.currentUser.toKey()]=y}(s,o.batchId,t),await ol(s,o.changes),await Sc(s.remoteStore)}catch(o){const l=Cf(o,"Failed to persist write");t.reject(l)}}async function O_(r,e){const t=Ie(r);try{const s=await DR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Ba.get(l);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Ue(h.Fa):o.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await ol(t,s,e)}catch(s){await Ao(s)}}function _y(r,e,t){const s=Ie(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((l,h)=>{const f=h.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const p=Ie(h);p.onlineState=f;let y=!1;p.queries.forEach((w,T)=>{for(const R of T.J_)R.ea(f)&&(y=!0)}),y&&Pf(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function EA(r,e,t){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ba.get(e),l=o&&o.key;if(l){let h=new et(pe.comparator);h=h.insert(l,Ut.newNoDocument(l,Ee.min()));const f=ke().add(l),p=new Ec(Ee.min(),new Map,new et(Ne),h,f);await O_(s,p),s.La=s.La.remove(l),s.Ba.delete(e),kf(s)}else await qd(s.localStore,e,!1).then(()=>Hd(s,e,t)).catch(Ao)}async function TA(r,e){const t=Ie(r),s=e.batch.batchId;try{const o=await NR(t.localStore,e);M_(t,s,null),L_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ol(t,o)}catch(o){await Ao(o)}}async function IA(r,e,t){const s=Ie(r);try{const o=await function(h,f){const p=Ie(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.mutationQueue.lookupMutationBatch(y,f).next(T=>(Ue(T!==null),w=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>p.localDocuments.getDocuments(y,w))})}(s.localStore,e);M_(s,e,t),L_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ol(s,o)}catch(o){await Ao(o)}}function L_(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function M_(r,e,t){const s=Ie(r);let o=s.qa[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Hd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||b_(r,s)})}function b_(r,e){r.Na.delete(e.path.canonicalString());const t=r.La.get(e);t!==null&&(Tf(r.remoteStore,t),r.La=r.La.remove(e),r.Ba.delete(t),kf(r))}function wy(r,e,t){for(const s of t)s instanceof N_?(r.ka.addReference(s.key,e),SA(r,s)):s instanceof D_?(oe("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||b_(r,s.key)):we()}function SA(r,e){const t=e.key,s=t.path.canonicalString();r.La.get(t)||r.Na.has(s)||(oe("SyncEngine","New document in limbo: "+t),r.Na.add(s),kf(r))}function kf(r){for(;r.Na.size>0&&r.La.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new pe(Ge.fromString(e)),s=r.Ka.next();r.Ba.set(s,new fA(t)),r.La=r.La.insert(t,s),R_(r.remoteStore,new ci(Zn(Qv(t.path)),s,"TargetPurposeLimboResolution",pc.oe))}}async function ol(r,e,t){const s=Ie(r),o=[],l=[],h=[];s.xa.isEmpty()||(s.xa.forEach((f,p)=>{h.push(s.Ua(p,e,t).then(y=>{var w;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Ef.zi(p.targetId,y);l.push(T)}}))}),await Promise.all(h),s.Ma.R_(o),await async function(p,y){const w=Ie(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>W.forEach(y,R=>W.forEach(R.Wi,V=>w.persistence.referenceDelegate.addReference(T,R.targetId,V)).next(()=>W.forEach(R.Gi,V=>w.persistence.referenceDelegate.removeReference(T,R.targetId,V)))))}catch(T){if(!Co(T))throw T;oe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const R=T.targetId;if(!T.fromCache){const V=w.us.get(R),b=V.snapshotVersion,z=V.withLastLimboFreeSnapshotVersion(b);w.us=w.us.insert(R,z)}}}(s.localStore,l))}async function RA(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const s=await E_(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(f=>{f.forEach(p=>{p.reject(new le(G.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ol(t,s.Ts)}}function AA(r,e){const t=Ie(r),s=t.Ba.get(e);if(s&&s.Fa)return ke().add(s.key);{let o=ke();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const f=t.xa.get(h);o=o.unionWith(f.view.fa)}return o}}function F_(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=O_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EA.bind(null,e),e.Ma.R_=lA.bind(null,e.eventManager),e.Ma.Wa=uA.bind(null,e.eventManager),e}function CA(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IA.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return xR(this.persistence,new PR,e.initialUser,this.serializer)}ja(e){return new w_(wf.ei,this.serializer)}za(e){return new bR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class PA extends ac{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ue(this.persistence.referenceDelegate instanceof sc);const s=this.persistence.referenceDelegate.garbageCollector;return new fR(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new w_(s=>sc.ei(s,t),this.serializer)}}class Kd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_y(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RA.bind(null,this.syncEngine),await rA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sA}()}createDatastore(e){const t=Tc(e.databaseInfo.databaseId),s=function(l){return new BR(l)}(e.databaseInfo);return function(l,h,f,p){return new qR(l,h,f,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,f){return new HR(s,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>_y(this.syncEngine,t,0),function(){return py.p()?new py:new FR}())}createSyncEngine(e,t){return function(o,l,h,f,p,y,w){const T=new pA(o,l,h,f,p,y);return w&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);oe("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await sl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Kd.provider={build:()=>new Kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=Uv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{oe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Cf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function vd(r,e){r.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await E_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Ey(r,e){r.asyncQueue.verifyOperationInProgress();const t=await NA(r);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>my(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>my(e.remoteStore,o)),r._onlineComponents=e}async function NA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await vd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),await vd(r,new ac)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await vd(r,new PA(void 0));return r._offlineComponents}async function U_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await Ey(r,r._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await Ey(r,new Kd))),r._onlineComponents}function DA(r){return U_(r).then(e=>e.syncEngine)}async function VA(r){const e=await U_(r),t=e.eventManager;return t.onListen=mA.bind(null,e.syncEngine),t.onUnlisten=vA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_A.bind(null,e.syncEngine),t}function OA(r,e,t={}){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,p,y){const w=new kA({next:R=>{w.eu(),h.enqueueAndForget(()=>aA(l,T)),R.fromCache&&p.source==="server"?y.reject(new le(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),T=new cA(f,w,{includeMetadataChanges:!0,ua:!0});return oA(l,T)}(await VA(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r,e,t){if(!t)throw new le(G.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function LA(r,e,t,s){if(e===!0&&s===!0)throw new le(G.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Iy(r){if(!pe.isDocumentKey(r))throw new le(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Sy(r){if(pe.isDocumentKey(r))throw new le(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Rc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we()}function Eo(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rc(r);throw new le(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new le(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j_((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new le(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new le(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new le(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new z1;switch(s.type){case"firstParty":return new H1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Ty.get(t);s&&(oe("ComponentProvider","Removing Datastore"),Ty.delete(t),s.terminate())}(this),Promise.resolve()}}function MA(r,e,t,s={}){var o;const l=(r=Eo(r,Ac))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let f,p;if(typeof s.mockUserToken=="string")f=s.mockUserToken,p=Ft.MOCK_USER;else{f=nE(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new le(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ft(y)}r._authCredentials=new $1(new Fv(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class un{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class mi extends cs{constructor(e,t,s){super(e,t,Qv(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new pe(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function z_(r,e,...t){if(r=Wt(r),B_("collection","path",e),r instanceof Ac){const s=Ge.fromString(e,...t);return Sy(s),new mi(r,null,s)}{if(!(r instanceof un||r instanceof mi))throw new le(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ge.fromString(e,...t));return Sy(s),new mi(r.firestore,null,s)}}function xf(r,e,...t){if(r=Wt(r),arguments.length===1&&(e=Uv.newId()),B_("doc","path",e),r instanceof Ac){const s=Ge.fromString(e,...t);return Iy(s),new un(r,null,new pe(s))}{if(!(r instanceof un||r instanceof mi))throw new le(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ge.fromString(e,...t));return Iy(s),new un(r.firestore,r instanceof mi?r.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new I_(this,"async_queue_retry"),this.fu=()=>{const s=yd();s&&oe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=yd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=yd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new pi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Co(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(s);throw xr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Af.createAndSchedule(this,e,t,s,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&we()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Cc extends Ac{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Ay,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ay(e),this._firestoreClient=void 0,await e}}}function bA(r,e){const t=typeof r=="object"?r:Gy(),s=typeof r=="string"?r:"(default)",o=Zd(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=eE("firestore");l&&MA(o,...l)}return o}function $_(r){if(r._terminated)throw new le(G.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FA(r),r._firestoreClient}function FA(r){var e,t,s;const o=r._freezeSettings(),l=function(f,p,y,w){return new aS(f,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,j_(w.experimentalLongPollingOptions),w.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new xA(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(xt.fromBase64String(e))}catch(t){throw new le(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=/^__.*__$/;class jA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new rl(e,this.data,t,this.fieldTransforms)}}function q_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Lf{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Lu(e),o}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return lc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(q_(this.Mu)&&UA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class BA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Tc(e)}$u(e,t,s,o=!1){return new Lf({Mu:e,methodName:t,Ku:s,path:Pt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mf(r){const e=r._freezeSettings(),t=Tc(r._databaseId);return new BA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function W_(r,e,t,s,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);G_("Data must be an object, but it was:",h,s);const f=H_(s,h);let p,y;if(l.merge)p=new Mn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const R=$A(e,T,t);if(!h.contains(R))throw new le(G.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);WA(w,R)||w.push(R)}p=new Mn(w),y=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=h.fieldTransforms;return new jA(new wn(f),p,y)}class bf extends Df{_toFieldTransform(e){return new DS(e.path,new Ka)}isEqual(e){return e instanceof bf}}function zA(r,e,t,s=!1){return Ff(t,r.$u(s?4:3,e))}function Ff(r,e){if(K_(r=Wt(r)))return G_("Unsupported field value:",e,r),H_(r,e);if(r instanceof Df)return function(s,o){if(!q_(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const f of s){let p=Ff(f,o.ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:ic(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ic(o.serializer,l)}}if(s instanceof Vf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof To)return{bytesValue:f_(o.serializer,s._byteString)};if(s instanceof un){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:vf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Of)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw f.qu("VectorValues must only contain numeric values.");return mf(f.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${Rc(s)}`)}(r,e)}function H_(r,e){const t={};return jv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(r,(s,o)=>{const l=Ff(o,e.Ou(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function K_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof Vf||r instanceof To||r instanceof un||r instanceof Df||r instanceof Of)}function G_(r,e,t){if(!K_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=Rc(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function $A(r,e,t){if((e=Wt(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return Q_(r,e);throw lc("Field path arguments must be of type string or ",r,!1,void 0,t)}const qA=new RegExp("[~\\*/\\[\\]]");function Q_(r,e,t){if(e.search(qA)>=0)throw lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Nf(...e.split("."))._internalPath}catch{throw lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function lc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new le(G.INVALID_ARGUMENT,f+r+p)}function WA(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Uf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HA extends Y_{data(){return super.data()}}function Uf(r,e){return typeof e=="string"?Q_(r,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}class X_ extends jf{}function GA(r,e,...t){let s=[];e instanceof jf&&s.push(e),s=s.concat(t),function(l){const h=l.filter(p=>p instanceof zf).length,f=l.filter(p=>p instanceof Bf).length;if(h>1||h>0&&f>0)throw new le(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Bf extends X_{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Bf(e,t,s)}_apply(e){const t=this._parse(e);return J_(e._query,t),new cs(e.firestore,e.converter,Fd(e._query,t))}_parse(e){const t=Mf(e.firestore);return function(l,h,f,p,y,w,T){let R;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new le(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Py(T,w);const V=[];for(const b of T)V.push(Cy(p,l,b));R={arrayValue:{values:V}}}else R=Cy(p,l,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Py(T,w),R=zA(f,h,T,w==="in"||w==="not-in");return ut.create(y,w,R)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class zf extends jf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)J_(h,p),h=Fd(h,p)}(e._query,t),new cs(e.firestore,e.converter,Fd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $f extends X_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $f(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new le(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ha(l,h)}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Po(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function QA(r,e="asc"){const t=e,s=Uf("orderBy",r);return $f._create(s,t)}function Cy(r,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new le(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yv(e)&&t.indexOf("/")!==-1)throw new le(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ge.fromString(t));if(!pe.isDocumentKey(s))throw new le(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gg(r,new pe(s))}if(t instanceof un)return Gg(r,t._key);throw new le(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rc(t)}.`)}function Py(r,e){if(!Array.isArray(r)||r.length===0)throw new le(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J_(r,e){const t=function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YA{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return os(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>st(h.doubleValue));return new Of(l)}convertGeoPoint(e){return new Vf(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=gc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const t=yi(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ge.fromString(e);Ue(__(s));const o=new qa(s.get(1),s.get(3)),l=new pe(s.popFirst(5));return o.isEqual(t)||xr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XA extends Y_{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Uf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class $u extends XA{data(e={}){return super.data(e)}}class JA{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Du(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new $u(this._firestore,this._userDataWriter,s.key,s,new Du(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const p=new $u(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Du(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new $u(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Du(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:ZA(f.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class eC extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}function tC(r){r=Eo(r,cs);const e=Eo(r.firestore,Cc),t=$_(e),s=new eC(e);return KA(r._query),OA(t,r._query).then(o=>new JA(e,s,r,o))}function nC(r,e,t){r=Eo(r,un);const s=Eo(r.firestore,Cc),o=Z_(r.converter,e);return e0(s,[W_(Mf(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,er.none())])}function rC(r,e){const t=Eo(r.firestore,Cc),s=xf(r),o=Z_(r.converter,e);return e0(t,[W_(Mf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,er.exists(!1))]).then(()=>s)}function e0(r,e){return function(s,o){const l=new pi;return s.asyncQueue.enqueueAndForget(async()=>wA(await DA(s),o,l)),l.promise}($_(r),e)}function iC(){return new bf("serverTimestamp")}(function(e,t=!0){(function(o){Ro=o})(Io),po(new ts("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Cc(new q1(s.getProvider("auth-internal")),new G1(s.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new le(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(y.options.projectId,w)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),fi(zg,"4.7.5",e),fi(zg,"4.7.5","esm2017")})();const sC={apiKey:"AIzaSyDif-77wl1ZTc_DSUPMGQVzspQ_REZz9FU",authDomain:"misha-f6603.firebaseapp.com",projectId:"misha-f6603",storageBucket:"misha-f6603.firebasestorage.app",messagingSenderId:"858591471164",appId:"1:858591471164:web:91f99f5362c95e38368539"},t0=Ky(sC),Pc=j1(t0),qf=bA(t0);var _d={exports:{}},wd,ky;function oC(){if(ky)return wd;ky=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wd=r,wd}var Ed,xy;function aC(){if(xy)return Ed;xy=1;var r=oC();function e(){}function t(){}return t.resetWarningCache=e,Ed=function(){function s(h,f,p,y,w,T){if(T!==r){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}s.isRequired=s;function o(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Ed}var Ny;function lC(){return Ny||(Ny=1,_d.exports=aC()()),_d.exports}var uC=lC();const kt=bw(uC),n0=q.createContext();function cC(){return q.useContext(n0)}function r0({children:r}){const[e,t]=q.useState(null);return q.useEffect(()=>{const s=PI(Pc,o=>{t(o)});return()=>s()},[]),ne.jsx(n0.Provider,{value:{user:e,setUser:t},children:r})}r0.propTypes={children:kt.element.isRequired};var Ca={},Dy;function hC(){if(Dy)return Ca;Dy=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.parse=h,Ca.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function h(R,V){const b=new l,z=R.length;if(z<2)return b;const j=(V==null?void 0:V.decode)||w;let H=0;do{const X=R.indexOf("=",H);if(X===-1)break;const re=R.indexOf(";",H),de=re===-1?z:re;if(X>de){H=R.lastIndexOf(";",X-1)+1;continue}const Se=f(R,H,X),Te=p(R,X,Se),x=R.slice(Se,Te);if(b[x]===void 0){let I=f(R,X+1,de),A=p(R,de,I);const k=j(R.slice(I,A));b[x]=k}H=de+1}while(H<z);return b}function f(R,V,b){do{const z=R.charCodeAt(V);if(z!==32&&z!==9)return V}while(++V<b);return b}function p(R,V,b){for(;V>b;){const z=R.charCodeAt(--V);if(z!==32&&z!==9)return V+1}return b}function y(R,V,b){const z=(b==null?void 0:b.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=z(V);if(!e.test(j))throw new TypeError(`argument val is invalid: ${V}`);let H=R+"="+j;if(!b)return H;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);H+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);H+="; Domain="+b.domain}if(b.path){if(!s.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);H+="; Path="+b.path}if(b.expires){if(!T(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);H+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(H+="; HttpOnly"),b.secure&&(H+="; Secure"),b.partitioned&&(H+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return H}function w(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function T(R){return o.call(R)==="[object Date]"}return Ca}hC();/**
 * react-router v7.1.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vy="popstate";function dC(r={}){function e(s,o){let{pathname:l,search:h,hash:f}=s.location;return Gd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Ya(o)}return pC(e,t,null,r)}function Ze(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function rr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fC(){return Math.random().toString(36).substring(2,10)}function Oy(r,e){return{usr:r.state,key:r.key,idx:e}}function Gd(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?xo(e):e,state:t,key:e&&e.key||s||fC()}}function Ya({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function xo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function pC(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f="POP",p=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function T(){f="POP";let j=w(),H=j==null?null:j-y;y=j,p&&p({action:f,location:z.location,delta:H})}function R(j,H){f="PUSH";let X=Gd(z.location,j,H);y=w()+1;let re=Oy(X,y),de=z.createHref(X);try{h.pushState(re,"",de)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;o.location.assign(de)}l&&p&&p({action:f,location:z.location,delta:1})}function V(j,H){f="REPLACE";let X=Gd(z.location,j,H);y=w();let re=Oy(X,y),de=z.createHref(X);h.replaceState(re,"",de),l&&p&&p({action:f,location:z.location,delta:0})}function b(j){let H=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof j=="string"?j:Ya(j);return X=X.replace(/ $/,"%20"),Ze(H,`No window.location.(origin|href) available to create URL for href: ${X}`),new URL(X,H)}let z={get action(){return f},get location(){return r(o,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Vy,T),p=j,()=>{o.removeEventListener(Vy,T),p=null}},createHref(j){return e(o,j)},createURL:b,encodeLocation(j){let H=b(j);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:R,replace:V,go(j){return h.go(j)}};return z}function i0(r,e,t="/"){return mC(r,e,t,!1)}function mC(r,e,t,s){let o=typeof e=="string"?xo(e):e,l=Ei(o.pathname||"/",t);if(l==null)return null;let h=s0(r);gC(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let y=CC(l);f=RC(h[p],y,s)}return f}function s0(r,e=[],t=[],s=""){let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(Ze(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let y=Cr([s,p.relativePath]),w=t.concat(p);l.children&&l.children.length>0&&(Ze(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),s0(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:IC(y,l.index),routesMeta:w})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of o0(l.path))o(l,h,p)}),e}function o0(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=o0(s.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function gC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:SC(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var yC=/^:[\w-]+$/,vC=3,_C=2,wC=1,EC=10,TC=-2,Ly=r=>r==="*";function IC(r,e){let t=r.split("/"),s=t.length;return t.some(Ly)&&(s+=TC),e&&(s+=_C),t.filter(o=>!Ly(o)).reduce((o,l)=>o+(yC.test(l)?vC:l===""?wC:EC),s)}function SC(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function RC(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let p=s[f],y=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=uc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},w),R=p.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=uc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Cr([l,T.pathname]),pathnameBase:NC(Cr([l,T.pathnameBase])),route:R}),T.pathnameBase!=="/"&&(l=Cr([l,T.pathnameBase]))}return h}function uc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=AC(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:w,isOptional:T},R)=>{if(w==="*"){let b=f[R]||"";h=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const V=f[R];return T&&!V?y[w]=void 0:y[w]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function AC(r,e=!1,t=!0){rr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function CC(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ei(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function PC(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?xo(r):r;return{pathname:t?t.startsWith("/")?t:kC(t,e):e,search:DC(s),hash:VC(o)}}function kC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Td(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function a0(r){let e=xC(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function l0(r,e,t,s=!1){let o;typeof r=="string"?o=xo(r):(o={...r},Ze(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),Ze(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),Ze(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let R=h.split("/");for(;R[0]==="..";)R.shift(),T-=1;o.pathname=R.join("/")}f=T>=0?e[T]:"/"}let p=PC(o,f),y=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||w)&&(p.pathname+="/"),p}var Cr=r=>r.join("/").replace(/\/\/+/g,"/"),NC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),DC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,VC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function OC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var u0=["POST","PUT","PATCH","DELETE"];new Set(u0);var LC=["GET",...u0];new Set(LC);var No=q.createContext(null);No.displayName="DataRouter";var kc=q.createContext(null);kc.displayName="DataRouterState";var c0=q.createContext({isTransitioning:!1});c0.displayName="ViewTransition";var MC=q.createContext(new Map);MC.displayName="Fetchers";var bC=q.createContext(null);bC.displayName="Await";var ir=q.createContext(null);ir.displayName="Navigation";var al=q.createContext(null);al.displayName="Location";var Vr=q.createContext({outlet:null,matches:[],isDataRoute:!1});Vr.displayName="Route";var Wf=q.createContext(null);Wf.displayName="RouteError";function FC(r,{relative:e}={}){Ze(ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=q.useContext(ir),{hash:o,pathname:l,search:h}=ul(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Cr([t,l])),s.createHref({pathname:f,search:h,hash:o})}function ll(){return q.useContext(al)!=null}function hs(){return Ze(ll(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(al).location}var h0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function d0(r){q.useContext(ir).static||q.useLayoutEffect(r)}function UC(){let{isDataRoute:r}=q.useContext(Vr);return r?JC():jC()}function jC(){Ze(ll(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(No),{basename:e,navigator:t}=q.useContext(ir),{matches:s}=q.useContext(Vr),{pathname:o}=hs(),l=JSON.stringify(a0(s)),h=q.useRef(!1);return d0(()=>{h.current=!0}),q.useCallback((p,y={})=>{if(rr(h.current,h0),!h.current)return;if(typeof p=="number"){t.go(p);return}let w=l0(p,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Cr([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state,y)},[e,t,l,o,r])}q.createContext(null);function ul(r,{relative:e}={}){let{matches:t}=q.useContext(Vr),{pathname:s}=hs(),o=JSON.stringify(a0(t));return q.useMemo(()=>l0(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function BC(r,e){return f0(r,e)}function f0(r,e,t,s){var H;Ze(ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(ir),{matches:l}=q.useContext(Vr),h=l[l.length-1],f=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",w=h&&h.route;{let X=w&&w.path||"";p0(p,!w||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let T=hs(),R;if(e){let X=typeof e=="string"?xo(e):e;Ze(y==="/"||((H=X.pathname)==null?void 0:H.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${X.pathname}" was given in the \`location\` prop.`),R=X}else R=T;let V=R.pathname||"/",b=V;if(y!=="/"){let X=y.replace(/^\//,"").split("/");b="/"+V.replace(/^\//,"").split("/").slice(X.length).join("/")}let z=i0(r,{pathname:b});rr(w||z!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),rr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=HC(z&&z.map(X=>Object.assign({},X,{params:Object.assign({},f,X.params),pathname:Cr([y,o.encodeLocation?o.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?y:Cr([y,o.encodeLocation?o.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),l,t,s);return e&&j?q.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function zC(){let r=XC(),e=OC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,h)}var $C=q.createElement(zC,null),qC=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?q.createElement(Vr.Provider,{value:this.props.routeContext},q.createElement(Wf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WC({routeContext:r,match:e,children:t}){let s=q.useContext(No);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Vr.Provider,{value:r},t)}function HC(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Ze(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,f=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:w,errors:T}=t,R=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||R){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,y,w)=>{let T,R=!1,V=null,b=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,V=y.route.errorElement||$C,h&&(f<0&&w===0?(p0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,b=null):f===w&&(R=!0,b=y.route.hydrateFallbackElement||null)));let z=e.concat(o.slice(0,w+1)),j=()=>{let H;return T?H=V:R?H=b:y.route.Component?H=q.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=p,q.createElement(WC,{match:y,routeContext:{outlet:p,matches:z,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?q.createElement(qC,{location:t.location,revalidation:t.revalidation,component:V,error:T,children:j(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):j()},null)}function Hf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KC(r){let e=q.useContext(No);return Ze(e,Hf(r)),e}function GC(r){let e=q.useContext(kc);return Ze(e,Hf(r)),e}function QC(r){let e=q.useContext(Vr);return Ze(e,Hf(r)),e}function Kf(r){let e=QC(r),t=e.matches[e.matches.length-1];return Ze(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function YC(){return Kf("useRouteId")}function XC(){var s;let r=q.useContext(Wf),e=GC("useRouteError"),t=Kf("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function JC(){let{router:r}=KC("useNavigate"),e=Kf("useNavigate"),t=q.useRef(!1);return d0(()=>{t.current=!0}),q.useCallback(async(o,l={})=>{rr(t.current,h0),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var My={};function p0(r,e,t){!e&&!My[r]&&(My[r]=!0,rr(!1,t))}q.memo(ZC);function ZC({routes:r,future:e,state:t}){return f0(r,void 0,t,e)}function qu(r){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eP({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){Ze(!ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=xo(t));let{pathname:p="/",search:y="",hash:w="",state:T=null,key:R="default"}=t,V=q.useMemo(()=>{let b=Ei(p,h);return b==null?null:{location:{pathname:b,search:y,hash:w,state:T,key:R},navigationType:s}},[h,p,y,w,T,R,s]);return rr(V!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:q.createElement(ir.Provider,{value:f},q.createElement(al.Provider,{children:e,value:V}))}function tP({children:r,location:e}){return BC(Qd(r),e)}function Qd(r,e=[]){let t=[];return q.Children.forEach(r,(s,o)=>{if(!q.isValidElement(s))return;let l=[...e,o];if(s.type===q.Fragment){t.push.apply(t,Qd(s.props.children,l));return}Ze(s.type===qu,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Qd(s.props.children,l)),t.push(h)}),t}var Wu="get",Hu="application/x-www-form-urlencoded";function xc(r){return r!=null&&typeof r.tagName=="string"}function nP(r){return xc(r)&&r.tagName.toLowerCase()==="button"}function rP(r){return xc(r)&&r.tagName.toLowerCase()==="form"}function iP(r){return xc(r)&&r.tagName.toLowerCase()==="input"}function sP(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function oP(r,e){return r.button===0&&(!e||e==="_self")&&!sP(r)}var Vu=null;function aP(){if(Vu===null)try{new FormData(document.createElement("form"),0),Vu=!1}catch{Vu=!0}return Vu}var lP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(r){return r!=null&&!lP.has(r)?(rr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hu}"`),null):r}function uP(r,e){let t,s,o,l,h;if(rP(r)){let f=r.getAttribute("action");s=f?Ei(f,e):null,t=r.getAttribute("method")||Wu,o=Id(r.getAttribute("enctype"))||Hu,l=new FormData(r)}else if(nP(r)||iP(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||f.getAttribute("action");if(s=p?Ei(p,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||Wu,o=Id(r.getAttribute("formenctype"))||Id(f.getAttribute("enctype"))||Hu,l=new FormData(f,r),!aP()){let{name:y,type:w,value:T}=r;if(w==="image"){let R=y?`${y}.`:"";l.append(`${R}x`,"0"),l.append(`${R}y`,"0")}else y&&l.append(y,T)}}else{if(xc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wu,s=null,o=Hu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}function Gf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function cP(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hP(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function dP(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await cP(l,t);return h.links?h.links():[]}return[]}));return gP(s.flat(1).filter(hP).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function by(r,e,t,s,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,f=(p,y)=>{var w;return t[y].pathname!==p.pathname||((w=t[y].route.path)==null?void 0:w.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>h(p,y)||f(p,y)):l==="data"?e.filter((p,y)=>{var T;let w=s.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(h(p,y)||f(p,y))return!0;if(p.route.shouldRevalidate){let R=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function fP(r,e){return pP(r.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function pP(r){return[...new Set(r)]}function mP(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function gP(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(mP(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function yP(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function vP(){let r=q.useContext(No);return Gf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function _P(){let r=q.useContext(kc);return Gf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Qf=q.createContext(void 0);Qf.displayName="FrameworkContext";function m0(){let r=q.useContext(Qf);return Gf(r,"You must render this element inside a <HydratedRouter> element"),r}function wP(r,e){let t=q.useContext(Qf),[s,o]=q.useState(!1),[l,h]=q.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,R=q.useRef(null);q.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let z=H=>{H.forEach(X=>{h(X.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),q.useEffect(()=>{if(s){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[s]);let V=()=>{o(!0)},b=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,R,{}]:[l,R,{onFocus:Pa(f,V),onBlur:Pa(p,b),onMouseEnter:Pa(y,V),onMouseLeave:Pa(w,b),onTouchStart:Pa(T,V)}]:[!1,R,{}]}function Pa(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function EP({page:r,...e}){let{router:t}=vP(),s=q.useMemo(()=>i0(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?q.createElement(IP,{page:r,matches:s,...e}):null}function TP(r){let{manifest:e,routeModules:t}=m0(),[s,o]=q.useState([]);return q.useEffect(()=>{let l=!1;return dP(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function IP({page:r,matches:e,...t}){let s=hs(),{manifest:o,routeModules:l}=m0(),{loaderData:h,matches:f}=_P(),p=q.useMemo(()=>by(r,e,f,o,s,"data"),[r,e,f,o,s]),y=q.useMemo(()=>by(r,e,f,o,s,"assets"),[r,e,f,o,s]),w=q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let V=new Set,b=!1;if(e.forEach(j=>{var X;let H=o.routes[j.route.id];!H||!H.hasLoader||(!p.some(re=>re.route.id===j.route.id)&&j.route.id in h&&((X=l[j.route.id])!=null&&X.shouldRevalidate)||H.hasClientLoader?b=!0:V.add(j.route.id))}),V.size===0)return[];let z=yP(r);return b&&V.size>0&&z.searchParams.set("_routes",e.filter(j=>V.has(j.route.id)).map(j=>j.route.id).join(",")),[z.pathname+z.search]},[h,s,o,p,e,r,l]),T=q.useMemo(()=>fP(y,o),[y,o]),R=TP(y);return q.createElement(q.Fragment,null,w.map(V=>q.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),T.map(V=>q.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),R.map(({key:V,link:b})=>q.createElement("link",{key:V,...b})))}function SP(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var g0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{g0&&(window.__reactRouterVersion="7.1.0")}catch{}function RP({basename:r,children:e,window:t}){let s=q.useRef();s.current==null&&(s.current=dC({window:t,v5Compat:!0}));let o=s.current,[l,h]=q.useState({action:o.action,location:o.location}),f=q.useCallback(p=>{q.startTransition(()=>h(p))},[h]);return q.useLayoutEffect(()=>o.listen(f),[o,f]),q.createElement(eP,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var y0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yf=q.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:f,target:p,to:y,preventScrollReset:w,viewTransition:T,...R},V){let{basename:b}=q.useContext(ir),z=typeof y=="string"&&y0.test(y),j,H=!1;if(typeof y=="string"&&z&&(j=y,g0))try{let A=new URL(window.location.href),k=y.startsWith("//")?new URL(A.protocol+y):new URL(y),D=Ei(k.pathname,b);k.origin===A.origin&&D!=null?y=D+k.search+k.hash:H=!0}catch{rr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=FC(y,{relative:o}),[re,de,Se]=wP(s,R),Te=kP(y,{replace:h,state:f,target:p,preventScrollReset:w,relative:o,viewTransition:T});function x(A){e&&e(A),A.defaultPrevented||Te(A)}let I=q.createElement("a",{...R,...Se,href:j||X,onClick:H||l?e:x,ref:SP(V,de),target:p,"data-discover":!z&&t==="render"?"true":void 0});return re&&!z?q.createElement(q.Fragment,null,I,q.createElement(EP,{page:X})):I});Yf.displayName="Link";var AP=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:f,children:p,...y},w){let T=ul(h,{relative:y.relative}),R=hs(),V=q.useContext(kc),{navigator:b,basename:z}=q.useContext(ir),j=V!=null&&OP(T)&&f===!0,H=b.encodeLocation?b.encodeLocation(T).pathname:T.pathname,X=R.pathname,re=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(X=X.toLowerCase(),re=re?re.toLowerCase():null,H=H.toLowerCase()),re&&z&&(re=Ei(re,z)||re);const de=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let Se=X===H||!o&&X.startsWith(H)&&X.charAt(de)==="/",Te=re!=null&&(re===H||!o&&re.startsWith(H)&&re.charAt(H.length)==="/"),x={isActive:Se,isPending:Te,isTransitioning:j},I=Se?e:void 0,A;typeof s=="function"?A=s(x):A=[s,Se?"active":null,Te?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(x):l;return q.createElement(Yf,{...y,"aria-current":I,className:A,ref:w,style:k,to:h,viewTransition:f},typeof p=="function"?p(x):p)});AP.displayName="NavLink";var CP=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=Wu,action:f,onSubmit:p,relative:y,preventScrollReset:w,viewTransition:T,...R},V)=>{let b=DP(),z=VP(f,{relative:y}),j=h.toLowerCase()==="get"?"get":"post",H=typeof f=="string"&&y0.test(f),X=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let de=re.nativeEvent.submitter,Se=(de==null?void 0:de.getAttribute("formmethod"))||h;b(de||re.currentTarget,{fetcherKey:e,method:Se,navigate:t,replace:o,state:l,relative:y,preventScrollReset:w,viewTransition:T})};return q.createElement("form",{ref:V,method:j,action:z,onSubmit:s?p:X,...R,"data-discover":!H&&r==="render"?"true":void 0})});CP.displayName="Form";function PP(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v0(r){let e=q.useContext(No);return Ze(e,PP(r)),e}function kP(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let f=UC(),p=hs(),y=ul(r,{relative:l});return q.useCallback(w=>{if(oP(w,e)){w.preventDefault();let T=t!==void 0?t:Ya(p)===Ya(y);f(r,{replace:T,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[p,f,y,t,s,e,r,o,l,h])}var xP=0,NP=()=>`__${String(++xP)}__`;function DP(){let{router:r}=v0("useSubmit"),{basename:e}=q.useContext(ir),t=YC();return q.useCallback(async(s,o={})=>{let{action:l,method:h,encType:f,formData:p,body:y}=uP(s,e);if(o.navigate===!1){let w=o.fetcherKey||NP();await r.fetch(w,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||f,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function VP(r,{relative:e}={}){let{basename:t}=q.useContext(ir),s=q.useContext(Vr);Ze(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...ul(r||".",{relative:e})},h=hs();if(r==null){l.search=h.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(w=>w==="")){f.delete("index"),p.filter(T=>T).forEach(T=>f.append("index",T));let w=f.toString();l.search=w?`?${w}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Cr([t,l.pathname])),Ya(l)}function OP(r,e={}){let t=q.useContext(c0);Ze(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=v0("useViewTransitionState"),o=ul(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ei(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=Ei(t.nextLocation.pathname,s)||t.nextLocation.pathname;return uc(o.pathname,h)!=null||uc(o.pathname,l)!=null}new TextEncoder;async function LP(r){const e=xf(qf,"/users",r);await nC(e,{})}function MP(r,e){const{type:t,money:s}=e;if(!r||!t||!s){console.error("Invalid data: Missing uid, type, or money"),console.log("uid: "+r),console.log("type: "+t),console.log("money: "+s);return}try{const o=xf(qf,"/users",r),l=z_(o,"expenses");rC(l,{type:t,money:s,timestamp:iC()})}catch(o){console.log(o)}}const bP=async r=>{const e=z_(qf,"users",r,"expenses"),t=GA(e,QA("timestamp")),s=await tC(t),o=[];return s.forEach(l=>{o.push(l.data())}),o},_0=q.createContext();function w0(){return q.useContext(_0)}function E0({children:r,uid:e}){const[t,s]=q.useState([]);q.useEffect(()=>{(async()=>{const h=await bP(e);s(h)})()},[e]);const o=async l=>{MP(e,l),s(h=>[...h,l])};return ne.jsx(_0.Provider,{value:{transactions:t,addExpense:o},children:r})}E0.propTypes={children:kt.node.isRequired,uid:kt.string};const FP=(r,e)=>SI(Pc,r,e),UP=(r,e)=>RI(Pc,r,e);function jP(){const[r,e]=q.useState(""),[t,s]=q.useState(""),[o,l]=q.useState(""),[h,f]=q.useState(""),[p,y]=q.useState(!0),w=async R=>{if(R.preventDefault(),t!==o){f("Passwords do not match.");return}try{const b=(await FP(r,t)).user.uid;LP(b)}catch(V){console.log(V.message)}},T=async R=>{R.preventDefault();try{await UP(r,t)}catch(V){f("wrong email or password"),console.log(V)}};return ne.jsxs("div",{className:"max-w-sm mx-auto p-6 bg-white shadow-lg rounded-lg",children:[ne.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:p?"Sign Up":"Sign In"}),ne.jsxs("form",{onSubmit:p?w:T,children:[ne.jsxs("div",{className:"mb-4",children:[ne.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email"}),ne.jsx("input",{id:"email",type:"email",value:r,onChange:R=>e(R.target.value),required:!0,className:"w-full px-4 py-2 mt-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ne.jsxs("div",{className:"mb-4",children:[ne.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Password"}),ne.jsx("input",{id:"password",type:"password",value:t,onChange:R=>s(R.target.value),required:!0,className:"w-full px-4 py-2 mt-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p&&ne.jsxs("div",{className:"mb-4",children:[ne.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700",children:"Confirm Password"}),ne.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:R=>l(R.target.value),required:!0,className:"w-full px-4 py-2 mt-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ne.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-200",children:p?"Sign Up":"Sign In"})]}),h&&ne.jsx("p",{className:"text-red-500 text-sm mt-2 text-center",children:h}),ne.jsxs("p",{className:"mt-4 text-center text-sm",children:[p?"Already have an account?":"Don't have an account?"," ",ne.jsx("button",{onClick:()=>{f(""),y(!p)},className:"text-blue-500 font-semibold hover:underline",children:p?"Sign In":"Sign Up"})]})]})}function BP(){const r=async()=>{try{await kI(Pc)}catch(e){console.error("Error logging out: ",e)}};return ne.jsx("button",{onClick:r,className:"px-6 py-2 bg-red-500 text-sm text-white rounded-lg hover:bg-red-600 transition-colors duration-200",children:"Log Out"})}const T0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-dollar-sign'%3e%3cline%20x1='12'%20y1='1'%20x2='12'%20y2='23'%3e%3c/line%3e%3cpath%20d='M17%205H9.5a3.5%203.5%200%200%200%200%207h5a3.5%203.5%200%200%201%200%207H6'%3e%3c/path%3e%3c/svg%3e",I0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-shopping-bag'%3e%3cpath%20d='M6%202L3%206v14a2%202%200%200%200%202%202h14a2%202%200%200%200%202-2V6l-3-4z'%3e%3c/path%3e%3cline%20x1='3'%20y1='6'%20x2='21'%20y2='6'%3e%3c/line%3e%3cpath%20d='M16%2010a4%204%200%200%201-8%200'%3e%3c/path%3e%3c/svg%3e",S0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-activity'%3e%3cpolyline%20points='22%2012%2018%2012%2015%2021%209%203%206%2012%202%2012'%3e%3c/polyline%3e%3c/svg%3e",R0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-home'%3e%3cpath%20d='M3%209l9-7%209%207v11a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2z'%3e%3c/path%3e%3cpolyline%20points='9%2022%209%2012%2015%2012%2015%2022'%3e%3c/polyline%3e%3c/svg%3e",A0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-dribbble'%3e%3ccircle%20cx='12'%20cy='12'%20r='10'%3e%3c/circle%3e%3cpath%20d='M8.56%202.75c4.37%206.03%206.02%209.42%208.03%2017.72m2.54-15.38c-3.72%204.35-8.94%205.66-16.88%205.85m19.5%201.9c-3.5-.93-6.63-.82-8.94%200-2.58.92-5.01%202.86-7.44%206.32'%3e%3c/path%3e%3c/svg%3e",C0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-truck'%3e%3crect%20x='1'%20y='3'%20width='15'%20height='13'%3e%3c/rect%3e%3cpolygon%20points='16%208%2020%208%2023%2011%2023%2016%2016%2016%2016%208'%3e%3c/polygon%3e%3ccircle%20cx='5.5'%20cy='18.5'%20r='2.5'%3e%3c/circle%3e%3ccircle%20cx='18.5'%20cy='18.5'%20r='2.5'%3e%3c/circle%3e%3c/svg%3e",P0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-map-pin'%3e%3cpath%20d='M21%2010c0%207-9%2013-9%2013s-9-6-9-13a9%209%200%200%201%2018%200z'%3e%3c/path%3e%3ccircle%20cx='12'%20cy='10'%20r='3'%3e%3c/circle%3e%3c/svg%3e",zP={salary:T0,shop:I0,health:S0,housing:R0,entertainment:A0,publicTransport:C0,travel:P0},$P={green:"text-green-600",red:"text-red-600"};function k0({expenseType:r,money:e,color:t="red"}){return ne.jsxs("div",{className:`flex justify-between items-center gap-6
                  bg-gray-100 p-2 rounded-lg shadow-md`,children:[ne.jsxs("div",{className:"flex gap-4 items-center",children:[ne.jsx("img",{src:zP[r],alt:`${r} Icon`,className:"size-full"}),ne.jsx("p",{className:"text-lg font-semibold text-gray-800",children:r})]}),ne.jsxs("p",{className:`text-lg font-bold ${$P[t]}`,children:[e," PLN"]})]})}k0.propTypes={expenseType:kt.oneOf(["salary","shop","health","housing","entertainment","publicTransport","travel"]).isRequired,money:kt.number.isRequired,color:kt.oneOf(["green","red"])};const Fy="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23333'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-plus-circle'%3e%3ccircle%20cx='12'%20cy='12'%20r='10'%3e%3c/circle%3e%3cline%20x1='12'%20y1='8'%20x2='12'%20y2='16'%3e%3c/line%3e%3cline%20x1='8'%20y1='12'%20x2='16'%20y2='12'%3e%3c/line%3e%3c/svg%3e",qP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23333'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-minus-circle'%3e%3ccircle%20cx='12'%20cy='12'%20r='10'%3e%3c/circle%3e%3cline%20x1='8'%20y1='12'%20x2='16'%20y2='12'%3e%3c/line%3e%3c/svg%3e";function x0({setSwitchToButtons:r,showForm:e,setShowForm:t,transactionType:s}){const{addExpense:o}=w0(),[l,h]=q.useState(""),[f,p]=q.useState(0),T=s?[T0]:[I0,S0,R0,A0,C0,P0],R=V=>{V.preventDefault();const z=[["shop","health","housing","entertainment","publicTransport","travel"],["salary"]][+s][f]||"shop",j=z==="salary"?Math.abs(l):-Math.abs(l);o({type:z,money:j,timestamp:WP()}),r(!1),t(!1),h(""),p(0)};return e&&ne.jsxs("form",{className:"absolute top-8 w-[var(--form-width)] px-4 py-3 bg-red-100 rounded-xl",onSubmit:R,children:[ne.jsx("input",{required:!0,type:"number",value:l,className:`w-40 py-2 no-spin bg-transparent border-none outline-none
                   text-xl font-semibold`,placeholder:"Enter amount",onChange:V=>{V.preventDefault(),h(V.target.value)}}),ne.jsx("span",{className:"text-xl",children:ne.jsx("strong",{children:"PLN"})}),ne.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:T.map((V,b)=>ne.jsx("img",{src:V,className:"form__icon",style:{borderColor:f===b?"red":"black"},onClick:z=>{p(b),z.target.style.borderColor="red"}},b))}),ne.jsx("button",{className:`w-full mt-4 py-2 rounded-lg bg-green-500 text-white
                     text-lg font-medium shadow-md
                   hover:bg-green-600 active:scale-95 transition-transform`,children:"Save"})]})}x0.propTypes={setSwitchToButtons:kt.func.isRequired,showForm:kt.bool.isRequired,setShowForm:kt.func.isRequired,transactionType:kt.bool.isRequired};function WP(){const r=Date.now();return{seconds:Math.floor(r/1e3),nanoseconds:r%1e3*1e6}}function N0({switchToButtons:r,setSwitchToButtons:e,setShowForm:t,setTransactionType:s}){const[o,l]=q.useState(!0),h=q.useRef(null);q.useEffect(()=>{o||requestAnimationFrame(()=>{h.current.style.transition="transform 80ms ease-in-out",h.current.style.transform="translateY(-4rem)"})},[o]);const f=()=>{l(!0),t(!0)};return ne.jsxs(ne.Fragment,{children:[!r&&ne.jsx("button",{onClick:()=>{e(!0),l(!1)},className:"absolute bottom-8 right-6  hover:cursor-pointer",children:ne.jsx("img",{src:Fy,className:"size-12"})}),r&&!o&&ne.jsxs(ne.Fragment,{children:[ne.jsx("button",{className:"absolute bottom-8 right-6  hover:cursor-pointer",onClick:()=>{f(),s(!1)},children:ne.jsx("img",{src:qP,className:"size-12"})}),ne.jsx("button",{ref:h,className:`absolute bottom-8 right-6 translate-y-0
                       hover:cursor-pointer`,onClick:()=>{f(),s(!0)},children:ne.jsx("img",{src:Fy,className:"size-12"})})]})]})}N0.propTypes={switchToButtons:kt.bool.isRequired,setSwitchToButtons:kt.func.isRequired,setShowForm:kt.func.isRequired,setTransactionType:kt.func.isRequired};function HP(){const[r,e]=q.useState(!1),[t,s]=q.useState(!1),[o,l]=q.useState(!1);return ne.jsxs(ne.Fragment,{children:[ne.jsx(N0,{switchToButtons:r,setSwitchToButtons:e,setShowForm:s,setTransactionType:l}),ne.jsx(x0,{setSwitchToButtons:e,showForm:t,setShowForm:s,transactionType:o})]})}function KP(){const{transactions:r}=w0(),e=r.reduce((s,o)=>s+Number(o.money),0),t=e>0?"text-green-600 bg-green-100 hover:scale-105 hover:shadow-md":e<0?"text-red-600 bg-red-100 hover:scale-105 hover:shadow-md":"text-blue-600 bg-blue-100 hover:scale-105 hover:shadow-md";return ne.jsxs(ne.Fragment,{children:[ne.jsxs("header",{className:"flex justify-between items-center mt-2 mb-6 p-4 bg-gray-100 rounded-md text-2xl font-semibold",children:[ne.jsxs("div",{children:["Total:",ne.jsx("span",{className:`font-bold text-xl px-2 py-1 rounded-md inline-block
                      transition-all duration-300 ${t}`,children:e}),"PLN"]}),ne.jsx(BP,{})]}),ne.jsx("div",{className:"relative p-[var(--content-padding)] pb-6 bg-gray-200 rounded-xl",children:ne.jsxs("article",{className:`flex flex-col gap-1 h-[450px]
                     overflow-y-scroll no-scrollbar`,children:[r.map(s=>{const{type:o,money:l,timestamp:h}=s,f=h.seconds,p=o==="salary"?"green":"red";return ne.jsx(k0,{expenseType:o,money:Number(l),color:p},f)}),ne.jsx(HP,{})]})})]})}function D0({NavButton:r}){const e=["transactions","charts","profile"];return ne.jsx("nav",{className:`grid grid-cols-3
                 border-t-4 border-[#333]`,children:e.map(t=>ne.jsx(Yf,{to:`/${t}`,children:ne.jsx(r,{name:t,imgPath:"/finance-tracker/assets/".concat(t).concat(".svg")})},t))})}D0.propTypes={NavButton:kt.elementType.isRequired};function V0({name:r,imgPath:e}){return ne.jsxs("div",{className:`flex flex-col justify-center items-center
                 hover:transition-colors duration-300 ease-in
                 hover:cursor-pointer hover:bg-[rgba(0,0,0,0.2)]`,children:[ne.jsx("img",{src:e}),ne.jsx("p",{className:"text-xs font-bold",children:r})]})}V0.propTypes={name:kt.string.isRequired,imgPath:kt.string.isRequired};function GP(){const{user:r}=cC();let e="";r&&(e=r.uid);const t=function(){return ne.jsx("h1",{children:"Supposed to show charts for you expenses info, not done yet"})},s=function(){return ne.jsx("h1",{children:"Supposed to show profile info, not done yet"})};return ne.jsx(RP,{basename:"/finance-tracker",children:ne.jsxs("main",{className:`flex flex-col justify-between
                 mx-auto w-[var(--phone-width)] h-[var(--phone-height)]
                 border-phone rounded-xl`,children:[r?ne.jsx(E0,{uid:e,children:ne.jsx("div",{className:"pt-[var(--phone-padding)] px-[var(--phone-padding)]",children:ne.jsxs(tP,{children:[ne.jsx(qu,{path:"/transactions",element:ne.jsx(KP,{})}),ne.jsx(qu,{path:"/charts",element:ne.jsx(t,{})}),ne.jsx(qu,{path:"/profile",element:ne.jsx(s,{})})]})})}):ne.jsx(jP,{}),ne.jsx(D0,{NavButton:V0})]})})}Hw.createRoot(document.getElementById("root")).render(ne.jsx(r0,{children:ne.jsx(GP,{})}));
