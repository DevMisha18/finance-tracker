import{c as g,r,j as a,F as v,b as t,E as y,d as N,e as E,P as x,f as F}from"./index-DfraIl1g.js";function P({setShowEmailForm:c}){const{user:s}=g(),[n,i]=r.useState(""),[l,d]=r.useState(""),[m,f]=r.useState(""),[u,o]=r.useState(""),p=async e=>{if(e.preventDefault(),n!==l)return o("Emails don't match");const w=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!w.test(n)||!w.test(l))return o("Invalid email provided");const h=y.credential(s.email,m);N(s,h).then(()=>{E(s,n).then(()=>{c(!1),alert("Email changed successfully!")}).catch(b=>{console.error("Error updating email:",b),o("Failed to update email. Please try again.")})}).catch(b=>{console.error("Error reauthenticating:",b),o("Incorrect password. Please try again.")})};return a(v,{children:t("form",{onSubmit:e=>p(e),className:"mt-14 p-4 rounded-lg bg-white  font-medium",children:[t("div",{className:"flex justify-between gap-2 pb-6",children:[a("label",{htmlFor:"email",children:"New email"}),a("input",{type:"email",id:"email",className:"form-input",value:n,onChange:e=>i(e.target.value)})]}),t("div",{className:"flex justify-between gap-2 pb-6",children:[a("label",{htmlFor:"confirm-email",children:"Confirm email"}),a("input",{type:"email",id:"confirm-email",className:"form-input",value:l,onChange:e=>d(e.target.value)})]}),t("div",{className:"flex justify-between gap-2 pb-14",children:[a("label",{htmlFor:"password",children:"Password"}),a("input",{type:"password",id:"password",className:"form-input",value:m,onChange:e=>f(e.target.value)})]}),u&&a("p",{className:"text-sm font-normal text-red-600",children:u}),a("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold py-2 px-3 rounded",onClick:e=>p(e),children:"Change password"})]})})}P.propTypes={setShowEmailForm:x.func.isRequired};function C({setShowPasswordForm:c}){const{user:s}=g(),[n,i]=r.useState(""),[l,d]=r.useState(""),[m,f]=r.useState(""),[u,o]=r.useState(""),p=async e=>{if(e.preventDefault(),l!==m)return o("Passwords don't match");const w=y.credential(s.email,n);N(s,w).then(()=>{F(s,l).then(()=>{c(!1),alert("Password changed successfully!")}).catch(h=>{console.error("Error updating password:",h),o("Failed to update password. Please try again.")})}).catch(h=>{console.error("Error reauthenticating:",h),o("Incorrect password. Please try again.")})};return a(v,{children:t("form",{onSubmit:e=>p(e),className:"mt-14 p-4 rounded-lg bg-white font-medium",children:[t("div",{className:"flex justify-between gap-2 pb-6",children:[a("label",{htmlFor:"current-password",children:"Current password"}),a("input",{type:"password",id:"current-password",className:"form-input",value:n,onChange:e=>i(e.target.value)})]}),t("div",{className:"flex justify-between  gap-2 pb-6",children:[a("label",{htmlFor:"new-password",children:"New password"}),a("input",{type:"password",id:"new-password",className:"form-input",value:l,onChange:e=>d(e.target.value)})]}),t("div",{className:"flex justify-between gap-2 pb-14",children:[a("label",{htmlFor:"confirm-password",children:"Confirm Password"}),a("input",{type:"password",id:"confirm-password",className:"form-input",value:m,onChange:e=>f(e.target.value)})]}),u&&a("p",{className:"text-sm font-normal text-red-600",children:u}),a("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold py-2 px-3 rounded",onClick:e=>p(e),children:"Change password"})]})})}C.propTypes={setShowPasswordForm:x.func.isRequired};function j(){const[c,s]=r.useState(!1),[n,i]=r.useState(!1),{user:l}=g(),d=l.email;return t(v,{children:[t("div",{className:"relative pb-4 border-b-2 border-black text-center",children:[a("h2",{className:"mb-2",children:`email: ${d}`}),t("div",{className:"flex justify-center gap-4",children:[a("button",{className:"change-x-btn",onClick:()=>{s(!0),i(!1)},children:"change email"}),a("button",{className:"change-x-btn",onClick:()=>{s(!1),i(!0)},children:"change password"})]})]}),c&&a(P,{setShowEmailForm:s}),n&&a(C,{setShowPasswordForm:i})]})}export{j as default};
